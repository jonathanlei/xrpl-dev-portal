<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Build a Desktop Wallet in JavaScript - XRPL.org</title>
  <meta name="viewport" content="width=device-width">
  <meta property="og:title" content="Build a Desktop Wallet in JavaScript | XRPL.org">
  <meta property="og:url"
    content="https://xrpl.org/build-a-desktop-wallet-in-javascript.html" />
  <meta property="og:description"
    content="Build a graphical desktop wallet for the XRPL using JavaScript." />
  <meta name="description"
    content="Build a graphical desktop wallet for the XRPL using JavaScript." />
  <meta property="og:image"
    content="https://xrpl.org/assets/img/xrpl-fb-li-card.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:image"
    content="https://xrpl.org/assets/img/xrpl-twitter-card.png" />
  <meta name="robots" content="index, follow" />
  <meta name="docsearch:language" content="en" />
  <link rel="alternate" href="https://xrpl.org/build-a-desktop-wallet-in-javascript.html" hreflang="en" />
  <link rel="alternate" href="https://xrpl.org/ja/build-a-desktop-wallet-in-javascript.html" hreflang="ja" />
  <link rel="alternate" href="https://xrpl.org/build-a-desktop-wallet-in-javascript.html" hreflang="x-default" /><!-- Default: US english -->


  <!-- favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicons/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicons/favicon-32x32.png">
  <link rel="manifest" href="assets/favicons/site.webmanifest">
  <link rel="shortcut icon" href="favicon.ico">
  <meta name="msapplication-TileColor" content="#25A768">
  <meta name="msapplication-config" content="assets/favicons/browserconfig.xml">
  <meta name="theme-color" content="#25A768">
  <!-- The page supports both dark and light color schemes, and the page author prefers dark. -->
  <meta name="color-scheme" content="dark light">

  <!-- jQuery -->
  <script src="assets/vendor/jquery-3.7.1.min.js"></script>

  <!-- Google Tag Manager -->
    <script type="application/javascript">
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      "event": "page_info",
      "page_type": "Document",
      "page_group": "Docs",
      "page_funnel": "Tutorials",
      "page_labels": []
    })
    </script>
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-KCQZ3L8');</script>


  <!-- Stylesheet -->
  <link rel="stylesheet" href="assets/css/xrplai.css" />
  <link href="assets/css/devportal2022-v25.css" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />

  <script src="https://cmp.osano.com/AzyjT6TIZMlgyLyy8/f11f7772-8ed5-4b73-bd17-c0814edcc440/osano.js"></script>


  <!-- Theme switch -->
  <script src="assets/js/theme-switch.js"></script>



    <!-- expandable code samples -->
    <script src="assets/js/expandcode.js"></script>
    <!-- multi-code selection tabs -->
    <script src="assets/js/multicodetab.js"></script>
    <!-- copy code button -->
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script>
    <script>
        $(document).ready(function() {
            $(".multicode").minitabs();
            make_code_expandable();
            new ClipboardJS('.clipboard-btn');
        });
    </script>


</head>

<body class="xrp-ledger-dev-portal sidebar-primary lang-en " data-spy="scroll"
  data-target=".page-toc" data-offset="0" id="xrp-ledger-dev-portal">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KCQZ3L8" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

<nav class="top-nav navbar navbar-expand-lg navbar-dark fixed-top">
  <a href="/" class="navbar-brand"><img class="logo"  height="40" alt="XRPL.org" /></a>
  <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#top-main-nav" aria-controls="navbarHolder" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"><div></div></span>
  </button>
  <div class="collapse navbar-collapse justify-content-between" id="top-main-nav">
    <ul class="nav navbar-nav" id="topnav-pages">

            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="xrp-ledger-overview.html" id="topnav_xrp-ledger-overviewhtml" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>About</span></a>
        <div class="dropdown-menu" aria-labelledby="topnav_xrp-ledger-overviewhtml" id="topnav_dd_xrp-ledger-overviewhtml">
          <div class="navcol col-for-xrp-ledger">
            <h5 class="dropdown-item">XRP Ledger</h5>
            <a class="dropdown-item " href="xrp-ledger-overview.html">XRPL Overview</a>
            <a class="dropdown-item" href="uses.html">Use Cases & Featured Projects</a>
            <a class="dropdown-item" href="history.html">History</a>
          </div><!--./col-->
          <div class="navcol col-for-xrp">
            <h5 class="dropdown-item">XRP</h5>
            <a class="dropdown-item" href="xrp-overview.html">XRP Overview</a>
          </div><!--./col-->
          <div class="navcol col-for-sustainability">
            <h5 class="dropdown-item">Sustainability</h5>
            <a class="dropdown-item" href="impact.html">Impact</a>
          </div><!--./col-->
          <div class="navcol col-for-about">
            <h5 class="dropdown-item">About</h5>
            <a class="dropdown-item external-link" href="https://foundation.xrpl.org/" target="_blank">XRPL Foundation</a>
            <a class="dropdown-item" href="faq.html">FAQ</a>
            <a class="dropdown-item" href="privacy-policy.html">Privacy Policy</a>
          </div><!--./col-->
        </div><!--/.dropdown-menu-->
      </li>

            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="docs.html" id="topnav_docshtml" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Docs</span></a>
        <div class="dropdown-menu" aria-labelledby="topnav_docshtml" id="topnav_dd_docshtml">
          <a class="dropdown-item dropdown-hero" id="dropdown-hero-for-documentation" href="docs.html">
            <img id="top-nav-hero-docs" alt="Documentation icon" />
            <div class="dropdown-hero-text">
              <h4>Documentation</h4>
              <p>Dive into XRP Ledger technology and start integrating.</p>
            </div>
          </a>
          <div class="navcol col-for-article-types">
            <h5 class="dropdown-item">Article Types</h5>
            <a class="dropdown-item" href="introduction.html">Introduction</a>
            <a class="dropdown-item" href="use-cases.html">Use Cases</a>
            <a class="dropdown-item" href="concepts.html">Concepts</a>
            <a class="dropdown-item" href="tutorials.html">Tutorials</a>
            <a class="dropdown-item" href="references.html">References</a>
            <a class="dropdown-item" href="infrastructure.html">Infrastructure</a>
          </div><!--./col-->
          <div class="navcol col-for-get-started">
            <h5 class="dropdown-item">Get Started</h5>
            <a class="dropdown-item" href="get-started-using-python.html">Python</a>
            <a class="dropdown-item" href="get-started-using-javascript.html">JavaScript</a>
            <a class="dropdown-item" href="get-started-using-java.html">Java</a>
            <a class="dropdown-item" href="get-started-using-http-websocket-apis.html">HTTP / WebSocket</a>
          </div><!--./col-->
          <div class="navcol col-for-popular-pages">
            <h5 class="dropdown-item">Popular Pages</h5>
            <a class="dropdown-item" href="send-xrp.html">Send XRP</a>
            <a class="dropdown-item" href="reserves.html">Reserves</a>
            <a class="dropdown-item" href="xrp-testnet-faucet.html">XRP Faucets</a>
            <a class="dropdown-item" href="run-rippled-as-a-validator.html">Join UNL</a>
            <a class="dropdown-item" href="build-run-rippled-in-reporting-mode.html">Build and Run rippled in Reporting Mode</a>
            <a class="dropdown-item" href="public-api-methods.html">API Methods</a>
          </div><!--./col-->
        </div><!--/.dropdown-menu-->
      </li>

            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="resources.html" id="topnav_resourceshtml" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Resources</span></a>
        <div class="dropdown-menu" aria-labelledby="topnav_resourceshtml" id="topnav_dd_resourceshtml">
          <div class="navcol col-for-development">
            <h5 class="dropdown-item">Development</h5>
            <a class="dropdown-item" href="code-samples.html">Code Samples</a>
            <a class="dropdown-item" href="dev-tools.html">Dev Tools</a>
            <a class="dropdown-item external-link" href="https://learn.xrpl.org/" target="_blank">XRPL Learning Portal</a>
          </div><!--./col-->
          <div class="navcol col-for-current-status">
            <h5 class="dropdown-item">Current Status</h5>
            <a class="dropdown-item external-link" href="https://livenet.xrpl.org/" target="_blank">Ledger Explorer</a>
            <a class="dropdown-item" href="known-amendments.html">Known Amendments</a>
          </div><!--./col-->
          <div class="navcol col-for-join-in">
            <h5 class="dropdown-item">Join In</h5>
            <a class="dropdown-item" href="contribute-code.html">Contribute Code</a>
            <a class="dropdown-item" href="contribute-documentation.html">Contribute Documentation</a>
          </div><!--./col-->
        </div><!--/.dropdown-menu-->
      </li>

            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="contribute.html" id="topnav_contributehtml" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Community</span></a>
        <div class="dropdown-menu" aria-labelledby="topnav_contributehtml" id="topnav_dd_contributehtml">
          <a class="dropdown-item dropdown-hero" id="dropdown-hero-for-contribute-to-the-xrpl-community" href="contribute.html">
            <img id="top-nav-hero-contribute" alt="Contribute to the XRPL Community icon" />
            <div class="dropdown-hero-text">
              <h4>Contribute to the XRPL Community</h4>
              <p>Join the conversation</p>
            </div>
          </a>
          <div class="navcol col-for-ungrouped">
            <a class="dropdown-item" href="events.html">Events</a>
            <a class="dropdown-item" href="ambassadors.html">Ambassadors</a>
            <a class="dropdown-item" href="developer-funding.html">Developer Funding</a>
            <a class="dropdown-item external-link" href="https://jobs.xrpl.org/" target="_blank">XRPL Jobs</a>
            <a class="dropdown-item external-link" href="https://xrpl.org/blog/" target="_blank">Dev Blog</a>
            <a class="dropdown-item external-link" href="https://xrplgrants.org/" target="_blank">XRPL Grants</a>
            <a class="dropdown-item external-link" href="https://github.com/XRPLF" target="_blank">GitHub</a>
            <a class="dropdown-item external-link" href="https://github.com/XRPLF/xrpl-dev-portal/raw/master/content/XRPL_Logo_Kit.zip" target="_blank">XRPL Brand Kit</a>
            <a class="dropdown-item" href="report-a-scam.html">Report a Scam</a>
          </div><!--./col-->
        </div><!--/.dropdown-menu-->
      </li>

    </ul><!-- /.navbar-nav -->

    <div class="nav-item search" id="topnav-search">
      <form class="navbar-form navbar-right" role="search">
        <div class="form-inline">
          <div class="input-group" id="topsearchboxcontainer">
            <label class="input-group-prepend" for="topsearchbox"><i class="fa fa-search input-group-text"></i><span class="sr-only">Search</span></label>
            <input id="topsearchbox" name="q" type="text" class="form-control searchinput" placeholder="Start search">
          </div><!--/.input-group-->
        </div>
      </form>
    </div><!--/#topnav-search-->

    <div class="nav-item" id="topnav-language">
      <div class="dropdown">
        <a class="nav-link dropdown-toggle with-caret" id="language_selector_header_btn" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          English
          <span class="chevron"><span></span><span></span></span>
        </a>
        <div class="dropdown-menu smaller-dropdown" aria-labelledby="language_selector_header_btn">
          <hr />
          <a class="dropdown-item" href="/ja/build-a-desktop-wallet-in-javascript.html">
            日本語
          </a>
          <hr />
        </div><!--/.dropdown-menu-->
      </div><!--/.dropdown-->
    </div><!--/.language-selector-->

    <div class="nav-item" id="topnav-theme">
      <form class="form-inline">
        <div class="custom-control custom-theme-toggle form-inline-item" title="" data-toggle="tooltip" data-placement="left" data-original-title="Toggle Dark Mode">
          <input type="checkbox" class="custom-control-input" id="css-toggle-btn">
          <label class="custom-control-label" for="css-toggle-btn"><span class="d-lg-none">Light/Dark Theme</span></label>
        </div>
      </form>
    </div><!--/#topnav-theme-->
  </div><!--/#top-main-nav-->
</nav>
  <div class="container-fluid" role="document" id="main_content_wrapper">
    <div class="row">
      <!-- Right sidebar first so it's at the beginning for mobile layouts -->
      <aside class="right-sidebar col-lg-3 order-lg-4" role="complementary">
  <a class="with-caret expander collapsed d-lg-none" id="toc-expander" role="button" data-toggle="collapse" data-target="#page-toc-wrapper" aria-expanded="false">
    Page Toolbar
    <span class="chevron"><span></span><span></span></span>
  </a>
  <div id="page-toc-wrapper" class="collapse d-lg-block">
<div class="github-edit-wrap">
    <a href="https://github.com/XRPLF/xrpl-dev-portal/edit/master/content/tutorials/build-apps/build-a-desktop-wallet-in-javascript.md" target="_blank" class="btn btn-primary github-edit">Edit page</a>
</div><!-- /.github-edit -->    <div class="toc-header">
      <h4>In this document</h4>
    </div>
    <ul class="page-toc nav flex-column" role="directory">
        <li class="nav-item level-1"><a class="nav-link" href="#build-a-desktop-wallet-in-javascript">Build a Desktop Wallet in JavaScript</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#prerequisites">Prerequisites</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#source-code">Source Code</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#rationale">Rationale</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#goals">Goals</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#steps">Steps</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#0-project-setup-hello-world">0. Project setup - Hello World</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#1-ledger-index">1. Ledger Index</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#2-show-ledger-updates-by-using-websocket-subscriptions">2. Show Ledger Updates by using WebSocket subscriptions</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#3-display-an-account">3. Display an Account</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#4-show-accounts-transactions">4. Show Account's Transactions</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#5-saving-the-private-keys-with-a-password">5. Saving the Private Keys with a Password</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#6-styling">6. Styling</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#7-send-xrp">7. Send XRP</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#8-domain-verification-and-polish">8. Domain Verification and Polish</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#summary">Summary</a></li>
      </ul>
  </div>
      </aside>

      <!-- main column -->
      <main class="main col-md-7 col-lg-6 order-md-3 " role="main" id="main_content_body">
<nav class="breadcrumbs-wrap" aria-label="breadcrumb">
  <ul class="breadcrumb">
    




    <li class="active breadcrumb-item"><a href="index.html">Home</a></li>
    <li class="active breadcrumb-item"><a href="docs.html">Documentation</a></li>
    <li class="active breadcrumb-item"><a href="tutorials.html">Tutorials</a></li>
    <li class="active breadcrumb-item"><a href="javascript.html">JavaScript</a></li>
    <li class="active breadcrumb-item">Build a Desktop Wallet in JavaScript</li>
  </ul>
</nav><!--/.breadcrumbs-wrap-->  <article>
    <div class="content">
        <h1 id="build-a-desktop-wallet-in-javascript">Build a Desktop Wallet in JavaScript<a aria-hidden="true" class="hover_anchor" href="#build-a-desktop-wallet-in-javascript"><i class="fa fa-link"></i></a></h1>
<!-- STYLE_OVERRIDE: wallet -->
<p>This tutorial demonstrates how to build a desktop wallet for the XRP Ledger using the JavaScript programming language, the Electron Framework and various libraries. This application can be used as a starting point for building a more complex and powerful application, as a reference point for building comparable apps, or as a learning experience to better understand how to integrate XRP Ledger functionality into a larger project.</p>
<h2 id="prerequisites">Prerequisites<a aria-hidden="true" class="hover_anchor" href="#prerequisites"><i class="fa fa-link"></i></a></h2>
<p>To complete this tutorial, you should meet the following requirements:</p>
<ul>
<li>You have <a class="external-link" href="https://nodejs.org/" target="_blank">Node.js <i aria-hidden="true" class="fa fa-external-link"></i></a> 14+ installed.</li>
<li>You are somewhat familiar with modern JavaScript programming and have completed the <a href="get-started-using-javascript.html">Get Started Using JavaScript tutorial</a>.</li>
<li>You have some understanding of the XRP Ledger, its capabilities, and of cryptocurrency in general. Ideally you have completed the <a class="external-link" href="https://learn.xrpl.org/" target="_blank">Basic XRPL guide <i aria-hidden="true" class="fa fa-external-link"></i></a>.</li>
</ul>
<h3 id="source-code">Source Code<a aria-hidden="true" class="hover_anchor" href="#source-code"><i class="fa fa-link"></i></a></h3>
<p>You can find the complete source code for all of this tutorial's examples in the <a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/" target="_blank">code samples section of this website's repository <i aria-hidden="true" class="fa fa-external-link"></i></a>. After a <code>npm install</code> in this directory you can run the application for each step as described in the <code>scripts</code> section of  <code>package.json</code>, e.g, <code>npm run ledger-index</code>.</p>
<p class="devportal-callout caution"><strong>Caution:</strong> Be careful if you copy-and-paste the source code from these directly from these files. The sample code is split up into different files per step, so some shared imports and files are in different directories in the examples. This especially applies to the <code>library</code>, <code>bootstrap</code>, and <code>WALLET_DIR</code> contents.</p>
<h2 id="rationale">Rationale<a aria-hidden="true" class="hover_anchor" href="#rationale"><i class="fa fa-link"></i></a></h2>
<p>This tutorial will take you through the process of creating a XRP Wallet application from scratch. Starting with a simple,
"Hello World" like example with minimal functionality, we will step-by-step add more complex features.</p>
<p>We will use the well-established <a class="external-link" href="https://www.electronjs.org/" target="_blank">Electron Framework <i aria-hidden="true" class="fa fa-external-link"></i></a> to let us use JavaScript to write this desktop application.</p>
<h2 id="goals">Goals<a aria-hidden="true" class="hover_anchor" href="#goals"><i class="fa fa-link"></i></a></h2>
<p>At the end of this tutorial, you will have built a JavaScript Wallet application that looks something like this:</p>
<p><img alt="Desktop wallet screenshot" src="img/javascript-wallet-preview.png"/></p>
<p>The look and feel of the user interface should be roughly the same regardless of operating system, as the Electron Framework allows us to write cross-platform applications that are styled with HTML and CSS just like a web-based application.</p>
<p>The application we are going to build here will be capable of the following:</p>
<ul>
<li>Showing updates to the XRP Ledger in real-time.</li>
<li>Viewing any XRP Ledger account's activity "read-only" including showing how much XRP was delivered by each transaction.</li>
<li>Sending <a href="direct-xrp-payments.html">direct XRP payments</a>, and providing feedback about the intended destination address, including:<ul>
<li>Whether the intended destination already exists in the XRP Ledger, or the payment would have to fund its creation.</li>
<li>If the address doesn't want to receive XRP (<strong>Disallow XRP</strong> flag enabled).</li>
<li>If the address has a <a href="xrp-ledger-toml.html#account-verification">verified domain name</a> associated with it.</li>
</ul>
</li>
</ul>
<p>The application in this tutorial <em>doesn't</em> have the ability to send or trade <a href="issued-currencies.html">tokens</a> or
use other <a href="payment-types.html">payment types</a> like <a class="external-link" href="https://xrpl.org/escrow.html" target="_blank">Escrow <i aria-hidden="true" class="fa fa-external-link"></i></a> or <a class="external-link" href="https://xrpl.org/payment-channels.html" target="_blank">Payment Channels <i aria-hidden="true" class="fa fa-external-link"></i></a>. However, it provides a foundation
that you can implement those and other features on top of.</p>
<p>In addition to the above features, you'll also learn a bit about Events, IPC (inter-process-communication) and asynchronous (async) code in JavaScript.</p>
<h2 id="steps">Steps<a aria-hidden="true" class="hover_anchor" href="#steps"><i class="fa fa-link"></i></a></h2>
<h3 id="0-project-setup-hello-world">0. Project setup - Hello World<a aria-hidden="true" class="hover_anchor" href="#0-project-setup-hello-world"><i class="fa fa-link"></i></a></h3>
<ol>
<li>To initialize the project, create a file named <code>package.json</code> with the following content:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-0" id="codeblock-0button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-0"><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xrpl-javascript-desktop-wallet"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MIT"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"electron ./index.js"</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"async"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^3.2.4"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"fernet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^0.4.0"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"node-fetch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^2.6.9"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"pbkdf2-hmac"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^1.1.0"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"open"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^8.4.0"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"toml"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^3.0.0"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"xrpl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^2.6.0"</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"electron"</span><span class="p">:</span><span class="w"> </span><span class="s2">"22.3.24"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here we define the libraries our application will use in the <code>dependencies</code> section as well as shortcuts for running our application in the <code>scripts</code> section.</p>
<ol start="2">
<li>After you create your package.json file, install those dependencies by running the following command:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-1" id="codeblock-1button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-1"><span class="go">npm install</span>
</code></pre></div>
<p>This installs the Electron Framework, the xrpl.js client library and a couple of helpers we are going to need for our
application to work.</p>
<ol start="3">
<li>In the root folder, create an <code>index.js</code> file with the following content:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-2" id="codeblock-2button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-2"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">app</span><span class="p">,</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'electron'</span><span class="p">)</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">)</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * This is our main function, it creates our application window, preloads the code we will need to communicate</span>
<span class="cm"> * between the renderer Process and the main Process, loads a layout and performs the main logic</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">createWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Creates the application window</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">appWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="mf">1024</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="mf">768</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Loads a layout</span><span class="w"></span>
<span class="w">  </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">loadFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">'view'</span><span class="p">,</span><span class="w"> </span><span class="s1">'template.html'</span><span class="p">))</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">appWindow</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Here we have to wait for the application to signal that it is ready</span><span class="w"></span>
<span class="c1">// to execute our code. In this case we just create a main window.</span><span class="w"></span>
<span class="nx">app</span><span class="p">.</span><span class="nx">whenReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">createWindow</span><span class="p">()</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<ol start="4">
<li>
<p>Make a new folder named <code>view</code> in the root directory of the project.</p>
</li>
<li>
<p>Now, inside the <code>view</code> folder, add a <code>template.html</code> file with the following content:</p>
</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-3" id="codeblock-3button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-3"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"UTF-8"</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">"Content-Security-Policy"</span> <span class="na">content</span><span class="o">=</span><span class="s">"default-src 'self'; script-src 'self'"</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">"X-Content-Security-Policy"</span> <span class="na">content</span><span class="o">=</span><span class="s">"default-src 'self'; script-src 'self'"</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>XRPL Wallet Tutorial (JavaScript / Electron)<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Build a XRPL Wallet<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Hello world!<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<ol start="6">
<li>Now, start the application with the following command:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-4" id="codeblock-4button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-4"><span class="go">npm run start</span>
</code></pre></div>
<p class="devportal-callout tip"><strong>Tip:</strong> When you need to debug the application, you can open Developer Tools like in Chrome or Firefox by selecting "View / Toggle Developer Tools" from The application Menu or using a Shortcut ("Ctrl+Shift+I" on Windows or Linux, "Option+Command+I on Mac).</p>
<p>You should see a window appear that displays the text "Build a XRPL Wallet" and "Hello world!"
To run the reference application found in <code>content/_code-samples/build-a-desktop-wallet/desktop-js</code> for this step, run:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-5" id="codeblock-5button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-5"><span class="go">npm run hello</span>
</code></pre></div>
<p>In the next steps we will continually expand on this very basic setup. To better keep track of all the changes that will be made, the files in the <a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/" target="_blank">reference section <i aria-hidden="true" class="fa fa-external-link"></i></a> are numbered/prefixed with the respective step number:</p>
<p><strong>Full code for this step:</strong>
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/0_hello.js" target="_blank"><code>0-hello/0_hello.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/0_hello.html" target="_blank"><code>0-hello/view/0_hello.html</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,</p>
<h3 id="1-ledger-index">1. Ledger Index<a aria-hidden="true" class="hover_anchor" href="#1-ledger-index"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong>
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/1_ledger-index.js" target="_blank"><code>1-ledger-index/index.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/1_preload.js" target="_blank"><code>1-ledger-index/view/preload.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/1_ledger-index.html" target="_blank"><code>1-ledger-index/view/template.html</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/1_renderer.js" target="_blank"><code>1-ledger-index/view/renderer.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>Our first step was to have a running "Hello World" application. Now we want to expand on that so that the application can interact on a very basic level with the XRP Ledger and display some information about the current ledger state on the screen. After completing this step, the - for the time being unstyled - application should look like this:</p>
<p><img alt="Screenshot: Step 1, hello world equivalent" src="img/javascript-wallet-1.png"/></p>
<ol>
<li>Update <code>index.js</code> by adding the following snippet in the import section at the top of the file below the <code>path</code> import:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-6" id="codeblock-6button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-6"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">app</span><span class="p">,</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'electron'</span><span class="p">)</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">)</span><span class="w"></span>

<span class="c1">// Step 3 code additions - start</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xrpl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"xrpl"</span><span class="p">)</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">TESTNET_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"wss://s.altnet.rippletest.net:51233"</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * This function creates a WebService client, which connects to the XRPL and fetches the latest ledger index.</span>
<span class="cm"> *</span>
<span class="cm"> * @returns {Promise&lt;number&gt;}</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">getValidatedLedgerIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">xrpl</span><span class="p">.</span><span class="nx">Client</span><span class="p">(</span><span class="nx">TESTNET_URL</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">()</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Reference: https://xrpl.org/ledger.html#ledger</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">ledgerRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"ledger"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"ledger_index"</span><span class="o">:</span><span class="w"> </span><span class="s2">"validated"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">ledgerResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">ledgerRequest</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">()</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">ledgerResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">ledger_index</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">// Step 3 code additions - end</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * This is our main function, it creates our application window, preloads the code we will need to communicate</span>
<span class="cm"> * between the renderer Process and the main Process, loads a layout and performs the main logic</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">createWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>This helper function does the following: It establishes a WebSocket connection to the XRP Ledger, calls the XRP Ledger API's <a href="ledger.html">ledger method</a> and returns the ledger index from the response. We will wire up this function at the end of this step.</p>
<ol start="2">
<li>In order to attach a preloader script, modify the <code>createWindow</code> method in <code>index.js</code> by adding the following code:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-7" id="codeblock-7button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-7"><span class="w">  </span><span class="c1">// Creates the application window</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">appWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="mf">1024</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="mf">768</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Step 1 code additions - start</span><span class="w"></span>
<span class="w">    </span><span class="nx">webPreferences</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nx">preload</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">'view'</span><span class="p">,</span><span class="w"> </span><span class="s1">'preload.js'</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Step 1 code additions - end</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
</code></pre></div>
<ol start="3">
<li>Now in the <code>view</code> folder, create a file <code>preload.js</code> with the following content:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-8" id="codeblock-8button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-8"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">contextBridge</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'electron'</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Expose functionality from main process (aka. "backend") to be used by the renderer process(aka. "backend")</span><span class="w"></span>
<span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">'electronAPI'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// By calling "onUpdateLedgerIndex" in the frontend process we can now attach a callback function</span><span class="w"></span>
<span class="w">  </span><span class="c1">// by making onUpdateLedgerIndex available at the window level.</span><span class="w"></span>
<span class="w">  </span><span class="c1">// The subscribed function gets triggered whenever the backend process triggers the event 'update-ledger-index'</span><span class="w"></span>
<span class="w">  </span><span class="nx">onUpdateLedgerIndex</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update-ledger-index'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>This preloader script is used to expose functions to the browser's window object, so that the user interface can react to events broadcast from the main logic in <code>index.js</code>.</p>
<p>In the browser, <code>window.electronAPI.onUpdateLedgerIndex(callback)</code> can now be used to pass a callback function via <code>ipcRenderer.on('eventName', callback)</code> that will be triggered by <code>appWindow.webContents.send('eventName', value)</code>.</p>
<ol start="4">
<li>Now, in <code>view/template.html</code>, replace the body in order to show a placeholder for the ledger index instead of "Hello world!"</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-9" id="codeblock-9button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-9"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Step 1 code modifications - start --&gt;</span>
    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Build a XRPL Wallet<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    Latest validated ledger index: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-index"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Step 1 code modifications - end --&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<ol start="5">
<li>In <code>view/template.html</code> add the following line at the bottom of the file:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-10" id="codeblock-10button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-10"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- Step 1 code additions - start --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"renderer.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- Step 1 code additions - end --&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<ol start="6">
<li>Now create the <code>renderer.js</code> file in the <code>view</code> folder with the following code:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-11" id="codeblock-11button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-11"><span class="kd">const</span><span class="w"> </span><span class="nx">ledgerIndexEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ledger-index'</span><span class="p">)</span><span class="w"></span>

<span class="c1">// Here we define the callback function that performs the content update</span><span class="w"></span>
<span class="c1">// whenever 'update-ledger-index' is called by the main process</span><span class="w"></span>
<span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onUpdateLedgerIndex</span><span class="p">((</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ledgerIndexEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<ol start="7">
<li>To wire up our main application to send the ledger index to the frontend, modify <code>index.js</code> by adding the following snippet replacing the last section in the file:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-12" id="codeblock-12button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-12"><span class="c1">// Here we have to wait for the application to signal that it is ready</span><span class="w"></span>
<span class="c1">// to execute our code. In this case we create a main window, query</span><span class="w"></span>
<span class="c1">// the ledger for its latest index and submit the result to the main</span><span class="w"></span>
<span class="c1">// window where it will be displayed</span><span class="w"></span>
<span class="nx">app</span><span class="p">.</span><span class="nx">whenReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Step 1 code additions - start</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">appWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createWindow</span><span class="p">()</span><span class="w"></span>

<span class="w">  </span><span class="nx">getValidatedLedgerIndex</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-ledger-index'</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Step 1 code additions - end</span><span class="w"></span>

<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>Here we first call our helper function <code>getValidatedLedgerIndex()</code> and then broadcast an event named <code>update-ledger-index</code>. This attaches a payload containing the latest ledger information which can be handled by the frontend.</p>
<p>This example shows how to do Inter Process Communication (IPC) in Electron. Technically, JavaScript has no true parallel processes or threading because it follows a single-threaded event-driven paradigm. Nonetheless Electron provides us with two IPC modules called <code>ipcMain</code> and <code>ipcRenderer</code>. We can roughly equate <code>ipcMain</code> to a backend process and <code>ipcRenderer</code> to a frontend process when we think in terms of client-server applications. It works as follows:</p>
<ol>
<li>We started by creating a function that enables the frontend to subscribe to backend events via the <code>ContextBridge</code> (<code>onUpdateLedgerIndex</code> in <code>view/preload.js</code>)</li>
<li>Then we make the function available by putting it in a preloader script to ensure it is loaded and can be used by the frontend.</li>
<li>On the frontend, we can then use that function to attach a callback that handles frontend updates when the event is dispatched. In this case, we created a separate file, <code>renderer.js</code>, to define and attach the callback.</li>
<li>Lastly, we dispatch the event from the main logic in <code>index.js</code> using <code>appWindow.webContents.send('update-ledger-index', value)</code>.</li>
</ol>
<p>To get the application running at this early stage of development, run the following command:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-13" id="codeblock-13button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-13"><span class="go">npm run start</span>
</code></pre></div>
<p>You should see something like 'Latest validated ledger index: 39296259'. The number will be different since it is the latest ledger index as of when the app started. We'll make it continuously update later on.</p>
<p>To run the reference application found in <code>content/_code-samples/build-a-desktop-wallet/desktop-js</code> for this step, run:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-14" id="codeblock-14button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-14"><span class="go">npm run ledger-index</span>
</code></pre></div>
<h3 id="2-show-ledger-updates-by-using-websocket-subscriptions">2. Show Ledger Updates by using WebSocket subscriptions<a aria-hidden="true" class="hover_anchor" href="#2-show-ledger-updates-by-using-websocket-subscriptions"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong>
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/2_async-subscribe.js" target="_blank"><code>2-async/index.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/2_preload.js" target="_blank"><code>2-async/view/preload.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/2_renderer.js" target="_blank"><code>2-async/view/renderer.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/2_async.html" target="_blank"><code>2-async/view/template.html</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>Our application so far only shows the latest validated ledger sequence at the time when we opened it. Let's take things up a notch and add some dashboard like functionality where our wallet app will keep in sync with the ledger and display the latest specs and stats like a clock that is keeping track of time. The result will look something like this:</p>
<p><img alt="Screenshot: Step 2, show ledger updates" src="img/javascript-wallet-2.png"/></p>
<ol>
<li>
<p>In <code>index.js</code> remove the <code>getValidatedLedgerIndex</code> function.</p>
</li>
<li>
<p>Then update the <code>app.whenReady().then()</code> section at the bottom of the file section in the following way:</p>
</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-15" id="codeblock-15button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-15"><span class="cm">/**</span>
<span class="cm"> * This function creates a XRPL client, subscribes to 'ledger' events from the XRPL and broadcasts those by</span>
<span class="cm"> * dispatching the 'update-ledger-data' event which will be picked up by the frontend</span>
<span class="cm"> *</span>
<span class="cm"> * @returns {Promise&lt;void&gt;}</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">appWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createWindow</span><span class="p">()</span><span class="w"></span>

<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">xrpl</span><span class="p">.</span><span class="nx">Client</span><span class="p">(</span><span class="nx">TESTNET_URL</span><span class="p">)</span><span class="w"></span>

<span class="w">          </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">()</span><span class="w"></span>

<span class="w">          </span><span class="c1">// Subscribe client to 'ledger' events</span><span class="w"></span>
<span class="w">          </span><span class="c1">// Reference: https://xrpl.org/subscribe.html</span><span class="w"></span>
<span class="w">          </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">            </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">"streams"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ledger"</span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">})</span><span class="w"></span>

<span class="w">          </span><span class="c1">// Dispatch 'update-ledger-data' event</span><span class="w"></span>
<span class="w">          </span><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"ledgerClosed"</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">ledger</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-ledger-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">ledger</span><span class="p">)</span><span class="w"></span>
<span class="w">          </span><span class="p">})</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="nx">app</span><span class="p">.</span><span class="nx">whenReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">main</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Here, we have reduced the <code>app.whenReady</code> logic to an one-liner and put the necessary functionality into a separate <code>main()</code> function. The most relevant piece of code here is the swapping of a single call to the ledger for a subscription. Our client is now connecting to the XRPL via <a class="external-link" href="https://en.wikipedia.org/wiki/WebSocket" target="_blank">WebSockets <i aria-hidden="true" class="fa fa-external-link"></i></a>. This establishes a permanent bidirectional connection to the XRPL, which allows us to subscribe to events that the server sends out. This saves resources on the server, which now only sends out data we explicitly asked for when a change happens, as well as the client which does not have to sort through incoming data for relevant changes. It also reduces the complexity of the application and saves us a couple of lines of code.</p>
<ol start="3">
<li>Then, update <code>preload.js</code> by renaming the <code>onUpdateLedgerIndex</code> to <code>onUpdateLedgerData</code> and the <code>update-ledger-index</code> event to <code>update-ledger-data</code>:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-16" id="codeblock-16button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-16"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">contextBridge</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'electron'</span><span class="p">);</span><span class="w"></span>

<span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">'electronAPI'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">onUpdateLedgerData</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update-ledger-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>This renaming might seem a bit nit-picky, but now we actually pass on an object of values instead of a single integer.</p>
<ol start="4">
<li>Next, modify the <code>view/template.html</code> file by adding placeholders to the <code>&lt;body&gt;</code> section:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-17" id="codeblock-17button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-17"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Step 2 code additions - start --&gt;</span>
    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Build a XRPL Wallet - Part 2/8<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Latest validated ledger stats<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Ledger Index: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-index"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Ledger Hash: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-hash"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Close Time: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-close-time"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="cm">&lt;!-- Step 2 code additions - end --&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<ol start="5">
<li>Modify the <code>view/renderer.js</code> file to handle the new placeholders. Note that the renamed preloader function is now reflected in <code>window.electronAPI.onUpdateLedgerData</code>:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-18" id="codeblock-18button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-18"><span class="kd">const</span><span class="w"> </span><span class="nx">ledgerIndexEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ledger-index'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">ledgerHashEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ledger-hash'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">ledgerCloseTimeEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ledger-close-time'</span><span class="p">)</span><span class="w"></span>

<span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onUpdateLedgerData</span><span class="p">((</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ledgerIndexEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="p">.</span><span class="nx">ledger_index</span><span class="w"></span>
<span class="w">    </span><span class="nx">ledgerHashEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="p">.</span><span class="nx">ledger_hash</span><span class="w"></span>
<span class="w">    </span><span class="nx">ledgerCloseTimeEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="p">.</span><span class="nx">ledger_time</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>This should make our application listen to regular updates of the ledger and display them in the frontend.</p>
<p>Now run the application with the following command:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-19" id="codeblock-19button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-19"><span class="go">npm run start</span>
</code></pre></div>
<p>This time the application should be the same as in the last step, with the difference that the latest ledger index value gets updated roughly very 3-5 seconds.</p>
<p>To run the reference application found in <code>content/_code-samples/build-a-desktop-wallet/desktop-js</code> for this step, run:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-20" id="codeblock-20button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-20"><span class="go">npm run async</span>
</code></pre></div>
<h3 id="3-display-an-account">3. Display an Account<a aria-hidden="true" class="hover_anchor" href="#3-display-an-account"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong>
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/3_helpers.js" target="_blank"><code>library/3_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/3_account.js" target="_blank"><code>3-account/index.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/3_preload.js" target="_blank"><code>3-account/view/preload.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/3_renderer.js" target="_blank"><code>3-account/view/renderer.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/3_account.html" target="_blank"><code>3-account/view/template.html</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>We now have a permanent connection to the XRPL and some code to bring the delivered data to life on our screen, it's time to add some "wallet" functionality by managing an individual account.</p>
<p>We will ask the user for address of the account to monitor by using a HTML dialog element. We will furthermore refactor the application by encapsulating some functionality in a library. After finishing this step the application should look like this:</p>
<p><img alt="Screenshot: Step 3, show account information" src="img/javascript-wallet-3.png"/></p>
<ol>
<li>In the project root, create a new directory named <code>library</code>. Inside this directory, create a file <code>3_helpers.js</code> with the following content:</li>
</ol>
<p><code>3_helpers.js</code></p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-21" id="codeblock-21button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-21"><span class="kd">const</span><span class="w"> </span><span class="nx">xrpl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"xrpl"</span><span class="p">);</span><span class="w"></span>

<span class="c1">// The rippled server and its APIs represent time as an unsigned integer.</span><span class="w"></span>
<span class="c1">// This number measures the number of seconds since the "Ripple Epoch" of</span><span class="w"></span>
<span class="c1">// January 1, 2000 (00:00 UTC). This is like the way the Unix epoch  works,</span><span class="w"></span>
<span class="c1">// Reference: https://xrpl.org/basic-data-types.html</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">RIPPLE_EPOCH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">946684800</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">rawAccountData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">classicAddress</span><span class="o">:</span><span class="w"> </span><span class="nx">rawAccountData</span><span class="p">.</span><span class="nx">Account</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">xAddress</span><span class="o">:</span><span class="w"> </span><span class="nx">xrpl</span><span class="p">.</span><span class="nx">classicAddressToXAddress</span><span class="p">(</span><span class="nx">rawAccountData</span><span class="p">.</span><span class="nx">Account</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="nx">xrpBalance</span><span class="o">:</span><span class="w"> </span><span class="nx">xrpl</span><span class="p">.</span><span class="nx">dropsToXrp</span><span class="p">(</span><span class="nx">rawAccountData</span><span class="p">.</span><span class="nx">Balance</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">prepareLedgerData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">rawLedgerData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">RIPPLE_EPOCH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">rawLedgerData</span><span class="p">.</span><span class="nx">ledger_time</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="nx">rawLedgerData</span><span class="p">.</span><span class="nx">close_time</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">dateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">timestamp</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1000</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">dateTimeString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dateTime</span><span class="p">.</span><span class="nx">toLocaleDateString</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">dateTime</span><span class="p">.</span><span class="nx">toLocaleTimeString</span><span class="p">()</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">ledgerIndex</span><span class="o">:</span><span class="w"> </span><span class="nx">rawLedgerData</span><span class="p">.</span><span class="nx">ledger_index</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">ledgerHash</span><span class="o">:</span><span class="w"> </span><span class="nx">rawLedgerData</span><span class="p">.</span><span class="nx">ledger_hash</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">ledgerCloseTime</span><span class="o">:</span><span class="w"> </span><span class="nx">dateTimeString</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="p">,</span><span class="w"> </span><span class="nx">prepareLedgerData</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here we define three utility functions that will transform data we receive from the ledger into flat value objects for easy digestion in the frontend code. As we progress in this tutorial, we will keep this pattern of adding functionality by adding files that are prefixed by the step number.</p>
<ol start="2">
<li>Modify <code>index.js</code> and add <code>ipcMain</code> to the imports on the <code>require('electron')</code> line. Then add the new helper file at the bottom of the include section:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-22" id="codeblock-22button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-22"><span class="c1">// Step 3 code additions - start</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">app</span><span class="p">,</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcMain</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'electron'</span><span class="p">)</span><span class="w"></span>
<span class="c1">// Step 3 code additions - end</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xrpl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"xrpl"</span><span class="p">)</span><span class="w"></span>
<span class="c1">// Step 3 code additions - start</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="p">,</span><span class="w"> </span><span class="nx">prepareLedgerData</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'./library/3_helpers'</span><span class="p">)</span><span class="w"></span>
<span class="c1">// Step 3 code additions - end</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">TESTNET_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"wss://s.altnet.rippletest.net:51233"</span><span class="w"></span>
</code></pre></div>
<ol start="3">
<li>Modify <code>index.js</code> in the following way:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-23" id="codeblock-23button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-23"><span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">appWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createWindow</span><span class="p">()</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Step 3 code modifications - start</span><span class="w"></span>
<span class="w">  </span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'address-entered'</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">address</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w">  </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">xrpl</span><span class="p">.</span><span class="nx">Client</span><span class="p">(</span><span class="nx">TESTNET_URL</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">()</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/subscribe.html</span><span class="w"></span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">      </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"streams"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ledger"</span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="s2">"accounts"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">address</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/subscribe.html#ledger-stream</span><span class="w"></span>
<span class="w">    </span><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"ledgerClosed"</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">rawLedgerData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">ledger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareLedgerData</span><span class="p">(</span><span class="nx">rawLedgerData</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-ledger-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">ledger</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Initial Ledger Request -&gt; Get account details on startup</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/ledger.html</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">ledgerResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">      </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"ledger"</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialLedgerData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareLedgerData</span><span class="p">(</span><span class="nx">ledgerResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">closed</span><span class="p">.</span><span class="nx">ledger</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-ledger-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">initialLedgerData</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/subscribe.html#transaction-streams</span><span class="w"></span>
<span class="w">    </span><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"transaction"</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">transaction</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// Reference: https://xrpl.org/account_info.html</span><span class="w"></span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountInfoRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"account_info"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"account"</span><span class="o">:</span><span class="w"> </span><span class="nx">address</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"ledger_index"</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">ledger_index</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountInfoResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">accountInfoRequest</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="p">(</span><span class="nx">accountInfoResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">account_data</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-account-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">accountData</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Initial Account Request -&gt; Get account details on startup</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/account_info.html</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountInfoResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">      </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"account_info"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"account"</span><span class="o">:</span><span class="w"> </span><span class="nx">address</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"ledger_index"</span><span class="o">:</span><span class="w"> </span><span class="s2">"current"</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="p">(</span><span class="nx">accountInfoResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">account_data</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-account-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">accountData</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Step 3 code modifications - end</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>As the account we want to query is known only after the user enters an address, we had to wrap our application logic into an event handler:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-24" id="codeblock-24button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-24"><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'address-entered'</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">address</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// ...</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>In addition to the subscription to the ledger stream we also can subscribe the client to specific addresses, and we use this feature here to subscribe to an account address which we are going to prompt the user for:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-25" id="codeblock-25button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-25"><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">"streams"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ledger"</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="s2">"accounts"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">address</span><span class="p">]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>After this subscription our code attached listeners to the <code>ledgerClosed</code> and the <code>transactions</code> event. As soon as a <code>transaction</code> event is triggered, we do an <code>account_info</code> request to get the latest account status, as the transaction could have changed our account's state.</p>
<p>In addition to the subscriptions we added an initial <code>ledger</code> and <code>accountInfo</code> request to have some data at application startup. Otherwise we would see empty fields until something happened on the ledger that triggered one of our subscriptions.</p>
<ol start="4">
<li>Now, add the following code to <code>preload.js</code>:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-26" id="codeblock-26button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-26"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">contextBridge</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'electron'</span><span class="p">);</span><span class="w"></span>

<span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">'electronAPI'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">onUpdateLedgerData</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update-ledger-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Step 3 code additions - start</span><span class="w"></span>
<span class="w">  </span><span class="nx">onEnterAccountAddress</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">address</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'address-entered'</span><span class="p">,</span><span class="w"> </span><span class="nx">address</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nx">onUpdateAccountData</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update-account-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="c1">//Step 3 code additions - end</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>Here is a notable difference from the previous step: previously we only used <code>ipcRenderer</code> to send events from the main logic to the frontend, but now we use it bidirectionally, also sending events from the frontend to the main logic:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-27" id="codeblock-27button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-27"><span class="nx">onEnterAccountAddress</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">address</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'address-entered'</span><span class="p">,</span><span class="w"> </span><span class="nx">address</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol start="5">
<li>Then, modify the <code>view/template.html</code> by replacing the <code>&lt;body&gt;</code> with this markup:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-28" id="codeblock-28button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-28"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Build a XRPL Wallet - Part 3/8<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>Account info<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
        Classic Address: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"account-address-classic"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
        X-Address: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"account-address-x"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
        XRP Balance: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"account-balance"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>Latest validated ledger stats<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
        Ledger Index: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-index"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
        Ledger Hash: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-hash"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
        Close Time: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-close-time"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">dialog</span> <span class="na">id</span><span class="o">=</span><span class="s">"account-address-dialog"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"dialog"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"address-input"</span><span class="p">&gt;</span>Enter account address:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"address-input"</span> <span class="na">name</span><span class="o">=</span><span class="s">"address-input"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Confirm<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dialog</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<ol start="6">
<li>To incorporate the refactored markup, handle the HTML dialog element and well as the new account data section replace the contents of <code>view/renderer.js</code> with the following code:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-29" id="codeblock-29button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-29"><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'DOMContentLoaded'</span><span class="p">,</span><span class="w"> </span><span class="nx">openAccountAddressDialog</span><span class="p">);</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">openAccountAddressDialog</span><span class="p">(){</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountAddressDialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'account-address-dialog'</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountAddressInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accountAddressDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'input'</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">submitButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accountAddressDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'button[type="submit"]'</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="nx">submitButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accountAddressInput</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onEnterAccountAddress</span><span class="p">(</span><span class="nx">address</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="nx">accountAddressDialog</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">});</span><span class="w"></span>

<span class="w">    </span><span class="nx">accountAddressDialog</span><span class="p">.</span><span class="nx">showModal</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">ledgerIndexEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ledger-index'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">ledgerHashEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ledger-hash'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">ledgerCloseTimeEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ledger-close-time'</span><span class="p">)</span><span class="w"></span>

<span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onUpdateLedgerData</span><span class="p">((</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">ledger</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ledgerIndexEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ledger</span><span class="p">.</span><span class="nx">ledgerIndex</span><span class="w"></span>
<span class="w">    </span><span class="nx">ledgerHashEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ledger</span><span class="p">.</span><span class="nx">ledgerHash</span><span class="w"></span>
<span class="w">    </span><span class="nx">ledgerCloseTimeEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ledger</span><span class="p">.</span><span class="nx">ledgerCloseTime</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">accountAddressClassicEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'account-address-classic'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">accountAddressXEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'account-address-x'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">accountBalanceEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'account-balance'</span><span class="p">)</span><span class="w"></span>

<span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onUpdateAccountData</span><span class="p">((</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">accountAddressClassicEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="p">.</span><span class="nx">classicAddress</span><span class="w"></span>
<span class="w">    </span><span class="nx">accountAddressXEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="p">.</span><span class="nx">xAddress</span><span class="w"></span>
<span class="w">    </span><span class="nx">accountBalanceEl</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="p">.</span><span class="nx">xrpBalance</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>The parts at the beginning and end are totally new, but the section in the middle is <em>almost</em> the same as before. The difference is that the names of a few fields have changed, since we're now passing them from <code>prepareLedgerData(...)</code>. For example <code>ledger.ledger_time</code> is now <code>ledger.ledgerCloseTime</code> instead.</p>
<p>Now you need an XRPL account address to monitor. If you already have one or know where to find an example, you can now run the application by executing:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-30" id="codeblock-30button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-30"><span class="go">npm run start</span>
</code></pre></div>
<p>If you need a Testnet address, <a href="xrp-testnet-faucet.html">you can get one from the faucet</a>. Then you can paste that address into the <a href="tx-sender.html">Transaction Sender</a> to send XRP transactions that your app can see.</p>
<p>On, startup, the application should display a simple dialog prompting the user for an XRPL account address. After entering the address the application should display some basic information about that account and about the ledger.</p>
<p>To run the reference application found in <code>content/_code-samples/build-a-desktop-wallet/desktop-js</code> for this step, run:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-31" id="codeblock-31button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-31"><span class="go">npm run account</span>
</code></pre></div>
<h3 id="4-show-accounts-transactions">4. Show Account's Transactions<a aria-hidden="true" class="hover_anchor" href="#4-show-accounts-transactions"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong>
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/3_helpers.js" target="_blank"><code>library/3_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/4_helpers.js" target="_blank"><code>library/4_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/4_tx-history.js" target="_blank"><code>4-tx-history/index.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/4_tx-preload.js" target="_blank"><code>4-tx-history/view/preload.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/4_tx-renderer.js" target="_blank"><code>4-tx-history/view/renderer.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/4_tx-history.html" target="_blank"><code>4-tx-history/view/index.html</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>At this point, our wallet shows the account's balance getting updated, but doesn't give us any clue about how this state came about, namely the actual transactions that caused the updates. So, our next step is to display the account's up to date transaction history using subscriptions once again:</p>
<p><img alt="Screenshot: Step 4, show transaction history" src="img/javascript-wallet-4.png"/></p>
<ol>
<li>In the <code>library</code> folder, add a new file <code>4_helpers.js</code>. Then add the following helper function to that file:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-32" id="codeblock-32button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-32"><span class="kd">const</span><span class="w"> </span><span class="nx">xrpl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"xrpl"</span><span class="p">);</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">prepareTxData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">transactions</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">transactions</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">transaction</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">tx_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"-"</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">transaction</span><span class="p">.</span><span class="nx">meta</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">delivered_amount</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">tx_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getDisplayableAmount</span><span class="p">(</span><span class="nx">transaction</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">delivered_amount</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">confirmed</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">date</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="kr">from</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">Account</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">Destination</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s2">"-"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="nx">tx_value</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nx">hash</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">hash</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">getDisplayableAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">rawAmount</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">rawAmount</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'unavailable'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Special case for pre-2014 partial payments.</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">rawAmount</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">rawAmount</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'string'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// It's an XRP amount in drops. Convert to decimal.</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">xrpl</span><span class="p">.</span><span class="nx">dropsToXrp</span><span class="p">(</span><span class="nx">rawAmount</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' XRP'</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//It's a token (IOU) amount.</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">rawAmount</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">rawAmount</span><span class="p">.</span><span class="nx">currency</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">prepareTxData</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol start="2">
<li>Now, in <code>index.js</code>, require the new helper function at the bottom of the import section like so:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-33" id="codeblock-33button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-33"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="p">,</span><span class="w"> </span><span class="nx">prepareLedgerData</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'./library/3_helpers'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">prepareTxData</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'./library/4_helpers'</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<ol start="3">
<li>In <code>index.js</code>, update the listener function subscribed to the <code>transaction</code> to update the transaction table as new transactions come in:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-34" id="codeblock-34button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-34"><span class="c1">// Wait for transaction on subscribed account and re-request account data</span><span class="w"></span>
<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"transaction"</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">transaction</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Reference: https://xrpl.org/account_info.html</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountInfoRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"account_info"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"account"</span><span class="o">:</span><span class="w"> </span><span class="nx">address</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"ledger_index"</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">ledger_index</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountInfoResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">accountInfoRequest</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="p">(</span><span class="nx">accountInfoResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">account_data</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-account-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">accountData</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Step 4 code additions - start</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">transactions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareTxData</span><span class="p">([{</span><span class="nx">tx</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">transaction</span><span class="p">}])</span><span class="w"></span>
<span class="w">  </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-transaction-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">transactions</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Step 4 code additions - end</span><span class="w"></span>

<span class="p">})</span><span class="w"></span>
</code></pre></div>
<ol start="4">
<li>Still in <code>index.js</code>, add a new section after the initial account request to populate the transactions table when the application starts:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-35" id="codeblock-35button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-35"><span class="c1">// Initial Account Request -&gt; Get account details on startup</span><span class="w"></span>
<span class="c1">// Reference: https://xrpl.org/account_info.html</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">accountInfoResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"account_info"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"account"</span><span class="o">:</span><span class="w"> </span><span class="nx">address</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"ledger_index"</span><span class="o">:</span><span class="w"> </span><span class="s2">"current"</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">accountData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="p">(</span><span class="nx">accountInfoResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">account_data</span><span class="p">)</span><span class="w"></span>
<span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-account-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">accountData</span><span class="p">)</span><span class="w"></span>

<span class="c1">// Step 4 code additions - start</span><span class="w"></span>

<span class="c1">// Initial Transaction Request -&gt; List account transactions on startup</span><span class="w"></span>
<span class="c1">// Reference: https://xrpl.org/account_tx.html</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">txResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"account_tx"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"account"</span><span class="o">:</span><span class="w"> </span><span class="nx">address</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">transactions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareTxData</span><span class="p">(</span><span class="nx">txResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">transactions</span><span class="p">)</span><span class="w"></span>
<span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-transaction-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">transactions</span><span class="p">)</span><span class="w"></span>

<span class="c1">// Step 4 code additions - end</span><span class="w"></span>
</code></pre></div>
<ol start="5">
<li>In <code>view/preload.js</code>, add the following code at the bottom of <code>exposeInMainWorld()</code>:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-36" id="codeblock-36button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-36"><span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">'electronAPI'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">onUpdateLedgerData</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update-ledger-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nx">onEnterAccountAddress</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">address</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'address-entered'</span><span class="p">,</span><span class="w"> </span><span class="nx">address</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nx">onUpdateAccountData</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update-account-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Step 4 code additions - start</span><span class="w"></span>
<span class="w">  </span><span class="nx">onUpdateTransactionData</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update-transaction-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Step 4 code additions - end</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<ol start="6">
<li>Modify <code>view/template.html</code> by adding a new fieldset below the ones that are already there:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-37" id="codeblock-37button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-37">        ...
        Close Time: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-close-time"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Step 4 code additions - start --&gt;</span>
    <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>Transactions:<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">"tx-table"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Confirmed<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>From<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>To<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Value Delivered<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Hash<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Step 4 code additions - end --&gt;</span>

    <span class="p">&lt;</span><span class="nt">dialog</span> <span class="na">id</span><span class="o">=</span><span class="s">"account-address-dialog"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"dialog"</span><span class="p">&gt;</span>
</code></pre></div>
<p>The table here will be filled dynamically with the account's transactions.</p>
<ol start="7">
<li>Add the following code at the bottom of <code>view/renderer.js</code>:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-38" id="codeblock-38button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-38"><span class="kd">const</span><span class="w"> </span><span class="nx">txTableBodyEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'tx-table'</span><span class="p">).</span><span class="nx">tBodies</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"></span>
<span class="nb">window</span><span class="p">.</span><span class="nx">testEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">txTableBodyEl</span><span class="w"></span>

<span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onUpdateTransactionData</span><span class="p">((</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">transactions</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">transaction</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">transactions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">txTableBodyEl</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="w"> </span><span class="s1">'beforeend'</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"&lt;tr&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"></span>
<span class="w">            </span><span class="s2">"&lt;td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">confirmed</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"&lt;/td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"></span>
<span class="w">            </span><span class="s2">"&lt;td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"&lt;/td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"></span>
<span class="w">            </span><span class="s2">"&lt;td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="kr">from</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"&lt;/td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"></span>
<span class="w">            </span><span class="s2">"&lt;td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">to</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"&lt;/td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"></span>
<span class="w">            </span><span class="s2">"&lt;td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"&lt;/td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"></span>
<span class="w">            </span><span class="s2">"&lt;td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">hash</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"&lt;/td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"></span>
<span class="w">            </span><span class="s2">"&lt;/tr&gt;"</span><span class="w"></span>
<span class="w">        </span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>If you have come this far - congrats. Run the application by executing:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-39" id="codeblock-39button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-39"><span class="go">npm run start</span>
</code></pre></div>
<p>Our application should by now display all the stuff from the last step plus an additional list of transactions associated with the given account.</p>
<p>To run the reference application found in <code>content/_code-samples/build-a-desktop-wallet/desktop-js</code> for this step, run:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-40" id="codeblock-40button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-40"><span class="go">npm run tx-history</span>
</code></pre></div>
<h3 id="5-saving-the-private-keys-with-a-password">5. Saving the Private Keys with a Password<a aria-hidden="true" class="hover_anchor" href="#5-saving-the-private-keys-with-a-password"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong>
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/3_helpers.js" target="_blank"><code>library/3_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/4_helpers.js" target="_blank"><code>library/4_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/5_helpers.js" target="_blank"><code>library/5_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/5_password.js" target="_blank"><code>5-password/index.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/5_tx-preload.js" target="_blank"><code>5-password/view/preload.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/5_password.html" target="_blank"><code>5-password/view/template.html</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/5_tx-renderer.js" target="_blank"><code>5-password/view/renderer.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>After finishing this step the application should look like this:</p>
<p><img alt="Screenshot: Step 5, use salted password" src="img/javascript-wallet-5.png"/></p>
<p>By now we always query the user for an account address at application startup. We more or less have a monitoring tool for accounts that queries publicly available data. Because we want to have real wallet functionality including sending XRP, we will have to deal with private keys and seeds.</p>
<p>In this step we will query the user for a seed and a password they can use to access it later. In order to protect the password, we'll add a <a class="external-link" href="https://en.wikipedia.org/wiki/Salt_(cryptography)" target="_blank">salt <i aria-hidden="true" class="fa fa-external-link"></i></a> to the password.</p>
<ol>
<li>In the <code>library</code> folder, add a new file <code>5_helpers.js</code> with the following content:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-41" id="codeblock-41button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-41"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">prepareAccountData</span><span class="p">,</span><span class="w"> </span><span class="nx">prepareLedgerData</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"./3_helpers"</span><span class="p">);</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">prepareTxData</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"./4_helpers"</span><span class="p">);</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">crypto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"crypto"</span><span class="p">);</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"fs"</span><span class="p">);</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"path"</span><span class="p">);</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">fernet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"fernet"</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Fetches some initial data to be displayed on application startup</span>
<span class="cm"> *</span>
<span class="cm"> * @param client</span>
<span class="cm"> * @param wallet</span>
<span class="cm"> * @param appWindow</span>
<span class="cm"> * @returns {Promise&lt;void&gt;}</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">initialize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">,</span><span class="w"> </span><span class="nx">appWindow</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/account_info.html</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountInfoResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">        </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"account_info"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"account"</span><span class="o">:</span><span class="w"> </span><span class="nx">wallet</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"ledger_index"</span><span class="o">:</span><span class="w"> </span><span class="s2">"current"</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="p">(</span><span class="nx">accountInfoResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">account_data</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-account-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">accountData</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/account_tx.html</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">txResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">        </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"account_tx"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"account"</span><span class="o">:</span><span class="w"> </span><span class="nx">wallet</span><span class="p">.</span><span class="nx">address</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">transactions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareTxData</span><span class="p">(</span><span class="nx">txResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">transactions</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-transaction-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">transactions</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Handles the subscriptions to ledger events and the internal routing of the responses</span>
<span class="cm"> *</span>
<span class="cm"> * @param client</span>
<span class="cm"> * @param wallet</span>
<span class="cm"> * @param appWindow</span>
<span class="cm"> * @returns {Promise&lt;void&gt;}</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">subscribe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">,</span><span class="w"> </span><span class="nx">appWindow</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/subscribe.html</span><span class="w"></span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span><span class="w"></span>
<span class="w">        </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"streams"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ledger"</span><span class="p">],</span><span class="w"></span>
<span class="w">        </span><span class="s2">"accounts"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">address</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/subscribe.html#ledger-stream</span><span class="w"></span>
<span class="w">    </span><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"ledgerClosed"</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">rawLedgerData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">ledger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareLedgerData</span><span class="p">(</span><span class="nx">rawLedgerData</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-ledger-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">ledger</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Wait for transaction on subscribed account and re-request account data</span><span class="w"></span>
<span class="w">    </span><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"transaction"</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">transaction</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Reference: https://xrpl.org/account_info.html</span><span class="w"></span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountInfoRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"account_info"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">"account"</span><span class="o">:</span><span class="w"> </span><span class="nx">wallet</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">"ledger_index"</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">ledger_index</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountInfoResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">accountInfoRequest</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareAccountData</span><span class="p">(</span><span class="nx">accountInfoResponse</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">account_data</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-account-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">accountData</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">transactions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prepareTxData</span><span class="p">([{</span><span class="nx">tx</span><span class="o">:</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">transaction</span><span class="p">}])</span><span class="w"></span>
<span class="w">        </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-transaction-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">transactions</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Saves the wallet seed using proper cryptographic functions</span>
<span class="cm"> *</span>
<span class="cm"> * @param WALLET_DIR</span>
<span class="cm"> * @param seed</span>
<span class="cm"> * @param password</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">saveSaltedSeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">WALLET_DIR</span><span class="p">,</span><span class="w"> </span><span class="nx">seed</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">salt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">crypto</span><span class="p">.</span><span class="nx">randomBytes</span><span class="p">(</span><span class="mf">20</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="p">,</span><span class="w"> </span><span class="s1">'salt.txt'</span><span class="p">),</span><span class="w"> </span><span class="nx">salt</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Hashing salted password using Password-Based Key Derivation Function 2</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">derivedKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">crypto</span><span class="p">.</span><span class="nx">pbkdf2Sync</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span><span class="w"> </span><span class="nx">salt</span><span class="p">,</span><span class="w"> </span><span class="mf">1000</span><span class="p">,</span><span class="w"> </span><span class="mf">32</span><span class="p">,</span><span class="w"> </span><span class="s1">'sha256'</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Generate a Fernet secret we can use for symmetric encryption</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">fernet</span><span class="p">.</span><span class="nx">Secret</span><span class="p">(</span><span class="nx">derivedKey</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Generate encryption token with secret, time and initialization vector</span><span class="w"></span>
<span class="w">    </span><span class="c1">// In a real-world use case we would have current time and a random IV,</span><span class="w"></span>
<span class="w">    </span><span class="c1">// but for demo purposes being deterministic is just fine</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">fernet</span><span class="p">.</span><span class="nx">Token</span><span class="p">({</span><span class="w"></span>
<span class="w">        </span><span class="nx">secret</span><span class="o">:</span><span class="w"> </span><span class="nx">secret</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">time</span><span class="o">:</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="mf">1</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="nx">iv</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">12</span><span class="p">,</span><span class="w"> </span><span class="mf">13</span><span class="p">,</span><span class="w"> </span><span class="mf">14</span><span class="p">,</span><span class="w"> </span><span class="mf">15</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">token</span><span class="p">.</span><span class="nx">encode</span><span class="p">(</span><span class="nx">seed</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="p">,</span><span class="w"> </span><span class="s1">'seed.txt'</span><span class="p">),</span><span class="w"> </span><span class="nx">privateKey</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Loads the plaintext value of the encrypted seed</span>
<span class="cm"> *</span>
<span class="cm"> * @param WALLET_DIR</span>
<span class="cm"> * @param password</span>
<span class="cm"> * @returns {*}</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">loadSaltedSeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">WALLET_DIR</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">salt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="p">,</span><span class="w"> </span><span class="s1">'salt.txt'</span><span class="p">)).</span><span class="nx">toString</span><span class="p">()</span><span class="w"></span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">encodedSeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="p">,</span><span class="w"> </span><span class="s1">'seed.txt'</span><span class="p">)).</span><span class="nx">toString</span><span class="p">()</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Hashing salted password using Password-Based Key Derivation Function 2</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">derivedKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">crypto</span><span class="p">.</span><span class="nx">pbkdf2Sync</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span><span class="w"> </span><span class="nx">salt</span><span class="p">,</span><span class="w"> </span><span class="mf">1000</span><span class="p">,</span><span class="w"> </span><span class="mf">32</span><span class="p">,</span><span class="w"> </span><span class="s1">'sha256'</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Generate a Fernet secret we can use for symmetric encryption</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">fernet</span><span class="p">.</span><span class="nx">Secret</span><span class="p">(</span><span class="nx">derivedKey</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Generate decryption token</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">fernet</span><span class="p">.</span><span class="nx">Token</span><span class="p">({</span><span class="w"></span>
<span class="w">        </span><span class="nx">secret</span><span class="o">:</span><span class="w"> </span><span class="nx">secret</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">encodedSeed</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">ttl</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">token</span><span class="p">.</span><span class="nx">decode</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">initialize</span><span class="p">,</span><span class="w"> </span><span class="nx">subscribe</span><span class="p">,</span><span class="w"> </span><span class="nx">saveSaltedSeed</span><span class="p">,</span><span class="w"> </span><span class="nx">loadSaltedSeed</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol start="2">
<li>Modify the import section at the top of <code>index.js</code> to look like this:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-42" id="codeblock-42button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-42"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">app</span><span class="p">,</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcMain</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'electron'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xrpl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"xrpl"</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">initialize</span><span class="p">,</span><span class="w"> </span><span class="nx">subscribe</span><span class="p">,</span><span class="w"> </span><span class="nx">saveSaltedSeed</span><span class="p">,</span><span class="w"> </span><span class="nx">loadSaltedSeed</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'./library/5_helpers'</span><span class="p">)</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">TESTNET_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"wss://s.altnet.rippletest.net:51233"</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Wallet'</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">createWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>Note that we have reduced the imports to one line since the new helper file imports and re-exports the other helper functions.</p>
<p>We also added a new constant containing the directory name where we are going to store our encrypted seed.</p>
<ol start="3">
<li>In <code>index.js</code> replace the existing <code>main</code> function with the following one:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-43" id="codeblock-43button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-43"><span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">appWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createWindow</span><span class="p">()</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Create Wallet directory in case it does not exist yet</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">fs</span><span class="p">.</span><span class="nx">existsSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">mkdirSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="p">));</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'seed-entered'</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">providedSeed</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">providedSeed</span><span class="w"></span>
<span class="w">    </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'open-password-dialog'</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>

<span class="w">  </span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'password-entered'</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">fs</span><span class="p">.</span><span class="nx">existsSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">'seed.txt'</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nx">saveSaltedSeed</span><span class="p">(</span><span class="s1">'../'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="p">,</span><span class="w"> </span><span class="nx">seed</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">loadSaltedSeed</span><span class="p">(</span><span class="s1">'../'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'open-password-dialog'</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">xrpl</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">.</span><span class="nx">fromSeed</span><span class="p">(</span><span class="nx">seed</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">xrpl</span><span class="p">.</span><span class="nx">Client</span><span class="p">(</span><span class="nx">TESTNET_URL</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">()</span><span class="w"></span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">,</span><span class="w"> </span><span class="nx">appWindow</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">initialize</span><span class="p">(</span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">,</span><span class="w"> </span><span class="nx">appWindow</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>

<span class="w">  </span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'request-seed-change'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">rmSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">'seed.txt'</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">rmSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">'salt.txt'</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'open-seed-dialog'</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>

<span class="w">  </span><span class="c1">// We have to wait for the application frontend to be ready, otherwise</span><span class="w"></span>
<span class="w">  </span><span class="c1">// we might run into a race condition and the open-dialog events</span><span class="w"></span>
<span class="w">  </span><span class="c1">// get triggered before the callbacks are attached</span><span class="w"></span>
<span class="w">  </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">'ready-to-show'</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// If there is no seed present yet, ask for it, otherwise query for the password</span><span class="w"></span>
<span class="w">    </span><span class="c1">// for the seed that has been saved</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">fs</span><span class="p">.</span><span class="nx">existsSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_DIR</span><span class="p">,</span><span class="w"> </span><span class="s1">'seed.txt'</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'open-seed-dialog'</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'open-password-dialog'</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Since we are now making this a full-fledged wallet, instead of asking the user for an address we will now be prompting the user for a seed and password to encrypt the seed. If there is already a seed, the user will only be asked for their password.</p>
<ol start="3">
<li>Then modify the <code>view/preload.js</code> file (Note that the <code>onEnterAccountAddress</code> function is no longer needed):</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-44" id="codeblock-44button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-44"><span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">'electronAPI'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Step 5 code additions - start</span><span class="w"></span>
<span class="w">  </span><span class="nx">onOpenSeedDialog</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'open-seed-dialog'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nx">onEnterSeed</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">seed</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'seed-entered'</span><span class="p">,</span><span class="w"> </span><span class="nx">seed</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nx">onOpenPasswordDialog</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'open-password-dialog'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nx">onEnterPassword</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">password</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'password-entered'</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nx">requestSeedChange</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'request-seed-change'</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Step 5 code additions - end</span><span class="w"></span>

<span class="w">  </span><span class="nx">onUpdateLedgerData</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update-ledger-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
</code></pre></div>
<ol start="4">
<li>Then, in <code>view/template.html</code>, replace the existing HTML dialog element for the account with the new ones for seed and password:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-45" id="codeblock-45button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-45">    <span class="p">&lt;</span><span class="nt">dialog</span> <span class="na">id</span><span class="o">=</span><span class="s">"seed-dialog"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"dialog"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"seed-input"</span><span class="p">&gt;</span>Enter seed:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"seed-input"</span> <span class="na">name</span><span class="o">=</span><span class="s">"seed-input"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Confirm<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dialog</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">dialog</span> <span class="na">id</span><span class="o">=</span><span class="s">"password-dialog"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"dialog"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"password-input"</span><span class="p">&gt;</span>Enter password (min-length 5):<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"password-input"</span> <span class="na">name</span><span class="o">=</span><span class="s">"password-input"</span> <span class="p">/&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"invalid-password"</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span><span class="p">&gt;</span>Change Seed<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Submit<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dialog</span><span class="p">&gt;</span>
</code></pre></div>
<ol start="6">
<li>In <code>view/renderer.js</code>, replace the <code>openAccountAddressDialog</code> part at the top:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-46" id="codeblock-46button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-46"><span class="c1">// Remove the following section in Step 5</span><span class="w"></span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'DOMContentLoaded'</span><span class="p">,</span><span class="w"> </span><span class="nx">openAccountAddressDialog</span><span class="p">);</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">openAccountAddressDialog</span><span class="p">(){</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountAddressDialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'account-address-dialog'</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountAddressInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accountAddressDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'input'</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">submitButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accountAddressDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'button[type="submit"]'</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="nx">submitButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accountAddressInput</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onEnterAccountAddress</span><span class="p">(</span><span class="nx">address</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="nx">accountAddressDialog</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">});</span><span class="w"></span>

<span class="w">    </span><span class="nx">accountAddressDialog</span><span class="p">.</span><span class="nx">showModal</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>With this code:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-47" id="codeblock-47button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-47"><span class="kd">const</span><span class="w"> </span><span class="nx">seedDialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'seed-dialog'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">seedInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">seedDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'input'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">seedSubmitButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">seedDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'button[type="submit"]'</span><span class="p">)</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">seedSubmitFn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">seedInput</span><span class="p">.</span><span class="nx">value</span><span class="w"></span>
<span class="w">  </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onEnterSeed</span><span class="p">(</span><span class="nx">seed</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="nx">seedDialog</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onOpenSeedDialog</span><span class="p">((</span><span class="nx">_event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">seedSubmitButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="nx">seedSubmitFn</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">once</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">});</span><span class="w"></span>

<span class="w">  </span><span class="nx">seedDialog</span><span class="p">.</span><span class="nx">showModal</span><span class="p">()</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">passwordDialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'password-dialog'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">passwordInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">passwordDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'input'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">passwordError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">passwordDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'span.invalid-password'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">passwordSubmitButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">passwordDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'button[type="submit"]'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">changeSeedButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">passwordDialog</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'button[type="button"]'</span><span class="p">)</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">handlePasswordSubmitFn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">passwordInput</span><span class="p">.</span><span class="nx">value</span><span class="w"></span>
<span class="w">  </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onEnterPassword</span><span class="p">(</span><span class="nx">password</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="nx">passwordDialog</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">handleChangeSeedFn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">passwordDialog</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span><span class="w"></span>
<span class="w">  </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">requestSeedChange</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onOpenPasswordDialog</span><span class="p">((</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">showInvalidPassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">showInvalidPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">passwordError</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'INVALID PASSWORD'</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nx">passwordSubmitButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="nx">handlePasswordSubmitFn</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">once</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">});</span><span class="w"></span>
<span class="w">  </span><span class="nx">changeSeedButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="nx">handleChangeSeedFn</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">once</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">});</span><span class="w"></span>
<span class="w">  </span><span class="nx">passwordDialog</span><span class="p">.</span><span class="nx">showModal</span><span class="p">()</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</code></pre></div>
<p>Start up the application:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-48" id="codeblock-48button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-48"><span class="go">npm run start</span>
</code></pre></div>
<p>On first run, It should first prompt you for an account seed and then for a password.</p>
<p>You can generate a test account's seed via the <a class="external-link" href="https://xrpl.org/xrp-testnet-faucet.html" target="_blank">testnet faucet here <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>After you have created a wallet this way, you should close the application and start it up a second time: On second run it should prompt you for the password, and you should see the same result as in the last step.</p>
<p>To run the reference application found in <code>content/_code-samples/build-a-desktop-wallet/desktop-js</code> for this step, run:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-49" id="codeblock-49button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-49"><span class="go">npm run password</span>
</code></pre></div>
<h3 id="6-styling">6. Styling<a aria-hidden="true" class="hover_anchor" href="#6-styling"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong>
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/3_helpers.js" target="_blank"><code>library/3_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/4_helpers.js" target="_blank"><code>library/4_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/5_helpers.js" target="_blank"><code>library/5_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/6_styling.js" target="_blank"><code>6-styling/index.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/6_tx-preload.js" target="_blank"><code>6-styling/view/preload.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/6_styling.html" target="_blank"><code>6-styling/view/template.html</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/6_tx-renderer.js" target="_blank"><code>6-styling/view/renderer.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/bootstrap/bootstrap.bundle.min.js" target="_blank"><code>bootstrap/bootstrap.bundle.min.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/bootstrap/bootstrap.bundle.min.css" target="_blank"><code>bootstrap/bootstrap.min.css</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/bootstrap/custom.css" target="_blank"><code>bootstrap/custom.css</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/bootstrap/XRPLedger_DevPortal-white.svg" target="_blank"><code>bootstrap/XRPLedger_DevPortal-white.svg</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>After finishing this step the application should look like this:</p>
<p><img alt="Screenshot: Step 6, style application with css" src="img/javascript-wallet-6.png"/></p>
<ol>
<li>
<p>In the project root, create a new folder <code>bootstrap</code> and add the following files into that directory:
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/bootstrap/bootstrap.bundle.min.js" target="_blank"><code>bootstrap.bundle.min.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/bootstrap/bootstrap.bundle.min.css" target="_blank"><code>bootstrap.min.css</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/bootstrap/custom.css" target="_blank"><code>custom.css</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/bootstrap/XRPLedger_DevPortal-white.svg" target="_blank"><code>XRPLedger_DevPortal-white.svg</code> <i aria-hidden="true" class="fa fa-external-link"></i></a></p>
</li>
<li>
<p>Change the content of <code>view/template.html</code> to be the following code:</p>
</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-50" id="codeblock-50button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-50"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"UTF-8"</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">"viewport"</span> <span class="na">content</span><span class="o">=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>XRPL Wallet Tutorial (JavaScript / Electron)<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="o">=</span><span class="s">"../bootstrap/bootstrap.min.css"</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="o">=</span><span class="s">"../bootstrap/custom.css"</span><span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">main</span> <span class="na">class</span><span class="o">=</span><span class="s">"bg-light"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"sidebar d-flex flex-column flex-shrink-0 p-3 text-white bg-dark"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"/"</span> <span class="na">class</span><span class="o">=</span><span class="s">"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">class</span><span class="o">=</span><span class="s">"logo"</span> <span class="na">height</span><span class="o">=</span><span class="s">"40"</span><span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">hr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"nav nav-pills flex-column mb-auto"</span> <span class="na">role</span><span class="o">=</span><span class="s">"tablist"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"nav-item"</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">"nav-link active"</span> <span class="na">id</span><span class="o">=</span><span class="s">"dashboard-tab"</span> <span class="na">data-bs-toggle</span><span class="o">=</span><span class="s">"tab"</span> <span class="na">data-bs-target</span><span class="o">=</span><span class="s">"#dashboard"</span>
                  <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">role</span><span class="o">=</span><span class="s">"tab"</span> <span class="na">aria-controls</span><span class="o">=</span><span class="s">"dashboard"</span> <span class="na">aria-selected</span><span class="o">=</span><span class="s">"true"</span><span class="p">&gt;</span>
            Dashboard
          <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">"nav-link"</span> <span class="na">data-bs-toggle</span><span class="o">=</span><span class="s">"tab"</span> <span class="na">id</span><span class="o">=</span><span class="s">"transactions-tab"</span> <span class="na">data-bs-target</span><span class="o">=</span><span class="s">"#transactions"</span>
                  <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">role</span><span class="o">=</span><span class="s">"tab"</span> <span class="na">aria-controls</span><span class="o">=</span><span class="s">"transactions"</span> <span class="na">aria-selected</span><span class="o">=</span><span class="s">"false"</span><span class="p">&gt;</span>
            Transactions
          <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"divider"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"main-content tab-content d-flex flex-column flex-shrink-0 p-3"</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"header border-bottom"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>
          Build a XRPL Wallet
          <span class="p">&lt;</span><span class="nt">small</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-muted"</span><span class="p">&gt;</span>- Part 6/8<span class="p">&lt;/</span><span class="nt">small</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"tab-pane fade show active"</span> <span class="na">id</span><span class="o">=</span><span class="s">"dashboard"</span> <span class="na">role</span><span class="o">=</span><span class="s">"tabpanel"</span> <span class="na">aria-labelledby</span><span class="o">=</span><span class="s">"dashboard-tab"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Account:<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"list-group"</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"list-group-item"</span><span class="p">&gt;</span>Classic Address: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"account-address-classic"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"list-group-item"</span><span class="p">&gt;</span>X-Address: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"account-address-x"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"list-group-item"</span><span class="p">&gt;</span>XRP Balance: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"account-balance"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"spacer"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>
          Ledger
          <span class="p">&lt;</span><span class="nt">small</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-muted"</span><span class="p">&gt;</span>(Latest validated ledger)<span class="p">&lt;/</span><span class="nt">small</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"list-group"</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"list-group-item"</span><span class="p">&gt;</span>Ledger Index: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-index"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"list-group-item"</span><span class="p">&gt;</span>Ledger Hash: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-hash"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"list-group-item"</span><span class="p">&gt;</span>Close Time: <span class="p">&lt;</span><span class="nt">strong</span> <span class="na">id</span><span class="o">=</span><span class="s">"ledger-close-time"</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"tab-pane fade"</span> <span class="na">id</span><span class="o">=</span><span class="s">"transactions"</span> <span class="na">role</span><span class="o">=</span><span class="s">"tabpanel"</span> <span class="na">aria-labelledby</span><span class="o">=</span><span class="s">"transactions-tab"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Transactions:<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">"tx-table"</span> <span class="na">class</span><span class="o">=</span><span class="s">"table"</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Confirmed<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>From<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>To<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Value Delivered<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Hash<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">dialog</span> <span class="na">id</span><span class="o">=</span><span class="s">"seed-dialog"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"dialog"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"seed-input"</span><span class="p">&gt;</span>Enter seed:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"seed-input"</span> <span class="na">name</span><span class="o">=</span><span class="s">"seed-input"</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Confirm<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">dialog</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">dialog</span> <span class="na">id</span><span class="o">=</span><span class="s">"password-dialog"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"dialog"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"password-input"</span><span class="p">&gt;</span>Enter password (min-length: 5):<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"password-input"</span> <span class="na">name</span><span class="o">=</span><span class="s">"password-input"</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span><span class="p">&gt;</span>Change Seed<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Confirm<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">dialog</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"../bootstrap/bootstrap.bundle.min.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"renderer.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<p>Here we basically added the <a class="external-link" href="https://getbootstrap.com/" target="_blank">Boostrap Framework <i aria-hidden="true" class="fa fa-external-link"></i></a> and a little custom styling to our application. We'll leave it at that for this Step - to get the application running at this stage of development, run the following command:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-51" id="codeblock-51button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-51"><span class="go">npm run start</span>
</code></pre></div>
<p>This time the application should display a dashboard like layout with the XRP logo and a navigation ono the left side, and a content area comprising most of the screen. You should be able to switch from the dashboard to the transactions list and back.</p>
<p>To run the reference application found in <code>content/_code-samples/build-a-desktop-wallet/desktop-js</code> for this step, run:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-52" id="codeblock-52button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-52"><span class="go">npm run styling</span>
</code></pre></div>
<h3 id="7-send-xrp">7. Send XRP<a aria-hidden="true" class="hover_anchor" href="#7-send-xrp"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong>
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/3_helpers.js" target="_blank"><code>library/3_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/4_helpers.js" target="_blank"><code>library/4_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/5_helpers.js" target="_blank"><code>library/5_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/6_helpers.js" target="_blank"><code>library/6_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/7_helpers.js" target="_blank"><code>library/7_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/7_send-xrp.js" target="_blank"><code>7-send-xrp/index.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/7_preload.js" target="_blank"><code>7-send-xrp/view/preload.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/7_renderer.js" target="_blank"><code>7-send-xrp/view/renderer.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/7_send-xrp.html" target="_blank"><code>7-send-xrp/view/template.html</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>Up until now we have enabled our app to query and display data from the XRPL. Now it's time to actively participate in the ledger by enabling our application to send transactions. For now, we can stick to sending direct XRP payments because there are more complexities involved in sending issued tokens. After finishing this step the application should look like this:</p>
<p><img alt="Screenshot: Step 7, send xrp dialog" src="img/javascript-wallet-7.png"/></p>
<ol>
<li>Create the file <code>library/7_helpers.js</code> and add the following contents:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-53" id="codeblock-53button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-53"><span class="kd">const</span><span class="w"> </span><span class="nx">xrpl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"xrpl"</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Prepares, signs and submits a payment transaction</span>
<span class="cm"> *</span>
<span class="cm"> * @param paymentData</span>
<span class="cm"> * @param client</span>
<span class="cm"> * @param wallet</span>
<span class="cm"> * @returns {Promise&lt;*&gt;}</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">sendXrp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">paymentData</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/submit.html#request-format-1</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">paymentTx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="s2">"TransactionType"</span><span class="o">:</span><span class="w"> </span><span class="s2">"Payment"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"Account"</span><span class="o">:</span><span class="w"> </span><span class="nx">wallet</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"Amount"</span><span class="o">:</span><span class="w"> </span><span class="nx">xrpl</span><span class="p">.</span><span class="nx">xrpToDrops</span><span class="p">(</span><span class="nx">paymentData</span><span class="p">.</span><span class="nx">amount</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="s2">"Destination"</span><span class="o">:</span><span class="w"> </span><span class="nx">paymentData</span><span class="p">.</span><span class="nx">destinationAddress</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"DestinationTag"</span><span class="o">:</span><span class="w"> </span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">paymentData</span><span class="p">.</span><span class="nx">destinationTag</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">preparedTx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">autofill</span><span class="p">(</span><span class="nx">paymentTx</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">signedTx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">wallet</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">preparedTx</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">submitAndWait</span><span class="p">(</span><span class="nx">signedTx</span><span class="p">.</span><span class="nx">tx_blob</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sendXrp</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>(There was no <code>6-helpers.js</code>, so don't worry!)
2. Add the new function to the import section in <code>index.js</code>:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-54" id="codeblock-54button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-54"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">initialize</span><span class="p">,</span><span class="w"> </span><span class="nx">subscribe</span><span class="p">,</span><span class="w"> </span><span class="nx">saveSaltedSeed</span><span class="p">,</span><span class="w"> </span><span class="nx">loadSaltedSeed</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'./library/5_helpers'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sendXrp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'./library/7_helpers'</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<ol start="3">
<li>Still in <code>index.js</code>, add an event listener handling the <code>send-xrp-event</code> from the frontend dialog:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-55" id="codeblock-55button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-55"><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="nx">initialize</span><span class="p">(</span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">,</span><span class="w"> </span><span class="nx">appWindow</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Step 7 code additions - start</span><span class="w"></span>
<span class="w">        </span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'send-xrp-action'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">paymentData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">sendXrp</span><span class="p">(</span><span class="nx">paymentData</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'send-xrp-transaction-finish'</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"></span>
<span class="w">          </span><span class="p">})</span><span class="w"></span>
<span class="w">        </span><span class="p">})</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Step 7 code additions - start</span><span class="w"></span>
</code></pre></div>
<ol start="4">
<li>Modify <code>view/preload.js</code> by adding two new functions:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-56" id="codeblock-56button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-56"><span class="w">    </span><span class="nx">onClickSendXrp</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">paymentData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'send-xrp-action'</span><span class="p">,</span><span class="w"> </span><span class="nx">paymentData</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nx">onSendXrpTransactionFinish</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'send-xrp-transaction-finish'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol start="5">
<li>In <code>view/template.html</code>, add a button to toggle the modal dialog housing the "Send XRP" logic:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-57" id="codeblock-57button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-57">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"header border-bottom"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>
            Build a XRPL Wallet
            <span class="p">&lt;</span><span class="nt">small</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-muted"</span><span class="p">&gt;</span>- Part 7/8<span class="p">&lt;/</span><span class="nt">small</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
        <span class="cm">&lt;!-- Step 7 code additions - start --&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-primary"</span> <span class="na">id</span><span class="o">=</span><span class="s">"send-xrp-modal-button"</span><span class="p">&gt;</span>
            Send XRP
        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="cm">&lt;!-- Step 7 code additions - end --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<ol start="6">
<li>In the same file, at the end of the <code>&lt;main&gt;</code> section, add said modal dialog:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-58" id="codeblock-58button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-58">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal fade"</span> <span class="na">id</span><span class="o">=</span><span class="s">"send-xrp-modal"</span> <span class="na">tabindex</span><span class="o">=</span><span class="s">"-1"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-dialog"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-content"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-header"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-title fs-5"</span> <span class="na">id</span><span class="o">=</span><span class="s">"send-xrp-modal-label"</span><span class="p">&gt;</span>Send XRP<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn-close"</span> <span class="na">data-bs-dismiss</span><span class="o">=</span><span class="s">"modal"</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">"Close"</span><span class="p">&gt;&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-body"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group mb-3"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">class</span><span class="o">=</span><span class="s">"form-control"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"r9jEyy3nrB8D7uRc5w2k3tizKQ1q8cpeHU"</span> <span class="na">id</span><span class="o">=</span><span class="s">"input-destination-address"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group-text"</span><span class="p">&gt;</span>To (Address)<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group mb-3"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">class</span><span class="o">=</span><span class="s">"form-control"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"12345"</span> <span class="na">id</span><span class="o">=</span><span class="s">"input-destination-tag"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group-text"</span><span class="p">&gt;</span>Destination Tag<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group mb-3"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">class</span><span class="o">=</span><span class="s">"form-control"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"100"</span> <span class="na">id</span><span class="o">=</span><span class="s">"input-xrp-amount"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group-text"</span><span class="p">&gt;</span>Amount of XRP<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-footer"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-secondary"</span> <span class="na">data-bs-dismiss</span><span class="o">=</span><span class="s">"modal"</span><span class="p">&gt;</span>Cancel<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-primary"</span> <span class="na">id</span><span class="o">=</span><span class="s">"send-xrp-submit-button"</span><span class="p">&gt;</span>Send<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<ol start="7">
<li>Add the following code to the bottom of <code>view/renderer.js</code>:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-59" id="codeblock-59button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-59"><span class="kd">const</span><span class="w"> </span><span class="nx">modalButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'send-xrp-modal-button'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">modalDialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">bootstrap</span><span class="p">.</span><span class="nx">Modal</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'send-xrp-modal'</span><span class="p">))</span><span class="w"></span>
<span class="nx">modalButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">modalDialog</span><span class="p">.</span><span class="nx">show</span><span class="p">()</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">destinationAddressEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'input-destination-address'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">destinationTagEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'input-destination-tag'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">amountEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'input-xrp-amount'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">sendXrpButtonEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'send-xrp-submit-button'</span><span class="p">)</span><span class="w"></span>

<span class="nx">sendXrpButtonEl</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">modalDialog</span><span class="p">.</span><span class="nx">hide</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">destinationAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">destinationAddressEl</span><span class="p">.</span><span class="nx">value</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">destinationTag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">destinationTagEl</span><span class="p">.</span><span class="nx">value</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">amountEl</span><span class="p">.</span><span class="nx">value</span><span class="w"></span>

<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onClickSendXrp</span><span class="p">({</span><span class="nx">destinationAddress</span><span class="p">,</span><span class="w"> </span><span class="nx">destinationTag</span><span class="p">,</span><span class="w"> </span><span class="nx">amount</span><span class="p">})</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onSendXrpTransactionFinish</span><span class="p">((</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">'Result: '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">TransactionResult</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">destinationAddressEl</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">''</span><span class="w"></span>
<span class="w">    </span><span class="nx">destinationTagEl</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">''</span><span class="w"></span>
<span class="w">    </span><span class="nx">amountEl</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">''</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>Now, Run the following command:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-60" id="codeblock-60button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-60"><span class="go">npm run start</span>
</code></pre></div>
<p>The application should now display a "Send XRP" button in the top right corner, which should open a Modal dialog on clicking. You can use this Dialog to send XRP tokens from this account to another, and the balance update as well as the transaction should be reflected in the app.</p>
<p>If you need an account address to send the XRP to, <a class="external-link" href="https://learn.xrpl.org/course/code-with-the-xrpl/lesson/create-accounts-and-send-xrp/" target="_blank">you can create an account on the testnet <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>To run the reference application found in <code>content/_code-samples/build-a-desktop-wallet/desktop-js</code> for this step, run:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-61" id="codeblock-61button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-61"><span class="go">npm run send-xrp</span>
</code></pre></div>
<h3 id="8-domain-verification-and-polish">8. Domain Verification and Polish<a aria-hidden="true" class="hover_anchor" href="#8-domain-verification-and-polish"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong>
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/3_helpers.js" target="_blank"><code>library/3_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/4_helpers.js" target="_blank"><code>library/4_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/5_helpers.js" target="_blank"><code>library/5_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/6_helpers.js" target="_blank"><code>library/6_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/7_helpers.js" target="_blank"><code>library/7_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/library/8_helpers.js" target="_blank"><code>library/8_helpers.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/8_domain-verification.js" target="_blank"><code>8-domain-verification/index.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/8_preload.js" target="_blank"><code>8-domain-verification/view/8_prelaod.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/8_domain-verification.html" target="_blank"><code>8-domain-verification/view/8_domain-verification.html</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>,
<a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/js/view/8_renderer.js" target="_blank"><code>8-domain-verification/view/8_renderer.js</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>One of the biggest shortcomings of the wallet app from the previous step is that it doesn't provide a lot of protections or feedback for users to save them from human error and scams. These sorts of protections are extra important when dealing with the cryptocurrency space because decentralized systems like the XRP Ledger don't have an admin or support team one can ask to cancel or refund a payment if you made a mistake such as sending it to the wrong address.</p>
<p>This step shows how to add some checks on destination addresses to warn the user before sending XRP.</p>
<p>One type of check we could make is to verify the domain name associated with an XRP Ledger address; this is called <a href="xrp-ledger-toml.html#account-verification">account domain verification</a>. When an account's domain is verified, we can could show it like this:</p>
<p><img alt="Screenshot: Step 8, use domain verification" src="img/javascript-wallet-8.png"/></p>
<ol>
<li>In the <code>library</code> folder, add a new file <code>8_helpers.js</code>. Then add the following contents to that file:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-62" id="codeblock-62button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-62"><span class="kd">const</span><span class="w"> </span><span class="nx">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'node-fetch'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">toml</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'toml'</span><span class="p">);</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">convertHexToString</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"xrpl/dist/npm/utils/stringConversion"</span><span class="p">);</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">lsfDisallowXRP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00080000</span><span class="p">;</span><span class="w"></span>

<span class="cm">/*  Example lookups</span>

<span class="cm">    |------------------------------------|---------------|-----------|</span>
<span class="cm">    | Address                            | Domain        | Verified  |</span>
<span class="cm">    |------------------------------------|---------------|-----------|</span>
<span class="cm">    | rsA2LpzuawewSBQXkiju3YQTMzW13pAAdW | mduo13.com    | YES       |</span>
<span class="cm">    | rf1BiGeXwwQoi8Z2ueFYTEXSwuJYfV2Jpn | xrpl.org      | NO        |</span>
<span class="cm">    | rPT1Sjq2YGrBMTttX4GZHjKu9dyfzbpAYe | n/a           | NO        |</span>
<span class="cm">    |------------------------------------|---------------|-----------|</span>
<span class="cm"> */</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Check a potential destination address's details, and pass them back to the "Send XRP" dialog:</span>
<span class="cm"> * - Is the account funded? If not, payments below the reserve base will fail</span>
<span class="cm"> * - Do they have DisallowXRP enabled? If so, the user should be warned they don't want XRP, but can click through.</span>
<span class="cm"> * - Do they have a verified Domain? If so, we want to show the user the associated domain info.</span>
<span class="cm"> *</span>
<span class="cm"> * @param accountData</span>
<span class="cm"> * @returns {Promise&lt;{domain: string, verified: boolean}|{domain: string, verified: boolean}&gt;}</span>
<span class="cm"> */</span><span class="w"></span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">checkDestination</span><span class="p">(</span><span class="nx">accountData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">accountStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="s2">"funded"</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"disallow_xrp"</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"domain_verified"</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"domain_str"</span><span class="o">:</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="c1">// the decoded domain, regardless of verification</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nx">accountStatus</span><span class="p">[</span><span class="s2">"disallow_xrp"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!!</span><span class="p">(</span><span class="nx">accountData</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nx">lsfDisallowXRP</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">verifyAccountDomain</span><span class="p">(</span><span class="nx">accountData</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Verify an account using a xrp-ledger.toml file.</span>
<span class="cm"> * https://xrpl.org/xrp-ledger-toml.html#xrp-ledgertoml-file</span>
<span class="cm"> *</span>
<span class="cm"> * @param accountData</span>
<span class="cm"> * @returns {Promise&lt;{domain: string, verified: boolean}&gt;}</span>
<span class="cm"> */</span><span class="w"></span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">verifyAccountDomain</span><span class="p">(</span><span class="nx">accountData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">domainHex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accountData</span><span class="p">[</span><span class="s2">"Domain"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">domainHex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">domain</span><span class="o">:</span><span class="s2">""</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nx">verified</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">verified</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">convertHexToString</span><span class="p">(</span><span class="nx">domainHex</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">tomlUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`https://</span><span class="si">${</span><span class="nx">domain</span><span class="si">}</span><span class="sb">/.well-known/xrp-ledger.toml`</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">tomlResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">tomlUrl</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">tomlResponse</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">domain</span><span class="o">:</span><span class="w"> </span><span class="nx">domain</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nx">verified</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">tomlData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tomlResponse</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">parsedToml</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">toml</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">tomlData</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">tomlAccounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parsedToml</span><span class="p">[</span><span class="s2">"ACCOUNTS"</span><span class="p">]</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">tomlAccount</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">tomlAccounts</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">tomlAccount</span><span class="p">[</span><span class="s2">"address"</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">accountData</span><span class="p">[</span><span class="s2">"Account"</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">verified</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">domain</span><span class="o">:</span><span class="w"> </span><span class="nx">domain</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">verified</span><span class="o">:</span><span class="w"> </span><span class="nx">verified</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Verifies if a given address has validated status</span>
<span class="cm"> *</span>
<span class="cm"> * @param accountAddress</span>
<span class="cm"> * @param client</span>
<span class="cm"> * @returns {Promise&lt;{domain: string, verified: boolean}&gt;}</span>
<span class="cm"> */</span><span class="w"></span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">verify</span><span class="p">(</span><span class="nx">accountAddress</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Reference: https://xrpl.org/account_info.html</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="s2">"command"</span><span class="o">:</span><span class="w"> </span><span class="s2">"account_info"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"account"</span><span class="o">:</span><span class="w"> </span><span class="nx">accountAddress</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">"ledger_index"</span><span class="o">:</span><span class="w"> </span><span class="s2">"validated"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">checkDestination</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">account_data</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">domain</span><span class="o">:</span><span class="w"> </span><span class="s1">'domain'</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nx">verified</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">verify</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The code in <code>8_helpers.js</code> looks up the account on the ledger by sending an <a href="account_info.html"><code>account_info</code></a> request.</p>
<p>If the account does exist, the code checks for the <a href="accountroot.html#accountroot-flags"><code>lsfDisallowXRP</code> flag</a>.</p>
<ol start="2">
<li>Import the new helper function in <code>index.js</code>:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-63" id="codeblock-63button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-63"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">initialize</span><span class="p">,</span><span class="w"> </span><span class="nx">subscribe</span><span class="p">,</span><span class="w"> </span><span class="nx">saveSaltedSeed</span><span class="p">,</span><span class="w"> </span><span class="nx">loadSaltedSeed</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'./library/5_helpers'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sendXrp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'./library/7_helpers'</span><span class="p">)</span><span class="w"></span>
<span class="c1">// Step 8 code additions - start</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">verify</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'./library/8_helpers'</span><span class="p">)</span><span class="w"></span>
<span class="c1">// Step 8 code additions - end</span><span class="w"></span>
</code></pre></div>
<ol start="3">
<li>After the callback function <code>ipcMain.on('send-xrp-action', callback)</code> add the following event handler:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-64" id="codeblock-64button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-64"><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'send-xrp-action'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">paymentData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">sendXrp</span><span class="p">(</span><span class="nx">paymentData</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'send-xrp-transaction-finish'</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="c1">// Step 8 code additions - start</span><span class="w"></span>
<span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'destination-account-change'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">destinationAccount</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">verify</span><span class="p">(</span><span class="nx">destinationAccount</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">appWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'update-domain-verification-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="c1">// Step 8 code additions - end</span><span class="w"></span>
</code></pre></div>
<ol start="3">
<li>Modify <code>view/preload.js</code> and add the following two functions to <code>'electronAPI'</code>:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-65" id="codeblock-65button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-65"><span class="nx">onDestinationAccountChange</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'destination-account-change'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="p">},</span><span class="w"></span>
<span class="nx">onUpdateDomainVerificationData</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update-domain-verification-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Finally, the code decodes the account's <code>Domain</code> field, if present, and performs domain verification using the method imported above.</p>
<ol start="4">
<li>Update the view logic - in <code>view/template.html</code> add the following lines just before the <code>&lt;input&gt;</code> element with <code>id="input-destination-address</code>:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-66" id="codeblock-66button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-66"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group mb-3"</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Step 8 code additions - start --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"accountVerificationIndicator"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Verification status:<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Step 8 code additions - end --&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">class</span><span class="o">=</span><span class="s">"form-control"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"r9jEyy3nrB8D7uRc5w2k3tizKQ1q8cpeHU"</span> <span class="na">id</span><span class="o">=</span><span class="s">"input-destination-address"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group-text"</span><span class="p">&gt;</span>To (Address)<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<ol start="5">
<li>Lastly, modify the renderer as described below:</li>
</ol>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-67" id="codeblock-67button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-67"><span class="nx">modalButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">modalDialog</span><span class="p">.</span><span class="nx">show</span><span class="p">()</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="c1">// Step 8 code additions - start</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">accountVerificationEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.accountVerificationIndicator span'</span><span class="p">)</span><span class="w"></span>
<span class="c1">// Step 8 code additions - end</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">destinationAddressEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'input-destination-address'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">destinationTagEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'input-destination-tag'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">amountEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'input-xrp-amount'</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">sendXrpButtonEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'send-xrp-submit-button'</span><span class="p">)</span><span class="w"></span>

<span class="c1">// Step 8 code additions - start</span><span class="w"></span>
<span class="nx">destinationAddressEl</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'input'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onDestinationAccountChange</span><span class="p">(</span><span class="nx">destinationAddressEl</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onUpdateDomainVerificationData</span><span class="p">((</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">accountVerificationEl</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`Domain: </span><span class="si">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">domain</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'n/a'</span><span class="si">}</span><span class="sb"> Verified: </span><span class="si">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">verified</span><span class="si">}</span><span class="sb">`</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="c1">// Step 8 code additions - end</span><span class="w"></span>

<span class="nx">sendXrpButtonEl</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">modalDialog</span><span class="p">.</span><span class="nx">hide</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">destinationAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">destinationAddressEl</span><span class="p">.</span><span class="nx">value</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">destinationTag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">destinationTagEl</span><span class="p">.</span><span class="nx">value</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">amountEl</span><span class="p">.</span><span class="nx">value</span><span class="w"></span>

<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onClickSendXrp</span><span class="p">({</span><span class="nx">destinationAddress</span><span class="p">,</span><span class="w"> </span><span class="nx">destinationTag</span><span class="p">,</span><span class="w"> </span><span class="nx">amount</span><span class="p">})</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>Run the following command:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-68" id="codeblock-68button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-68"><span class="go">npm run start</span>
</code></pre></div>
<p>Test your wallet app the same way you did in the previous steps. It should display a hint about the receiving account when opening up the "Send XRP" dialog and entering the address. To test domain verification, try entering the following addresses in the "To" box of the Send XRP dialog:</p>
<table class="table-responsive">
<thead>
<tr>
<th style="text-align: left;">Address</th>
<th style="text-align: left;">Domain</th>
<th style="text-align: left;">Verified?</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>rsA2LpzuawewSBQXkiju3YQTMzW13pAAdW</code></td>
<td style="text-align: left;"><code>mduo13.com</code></td>
<td style="text-align: left;">✅ Yes</td>
</tr>
<tr>
<td style="text-align: left;"><code>rf1BiGeXwwQoi8Z2ueFYTEXSwuJYfV2Jpn</code></td>
<td style="text-align: left;"><code>xrpl.org</code></td>
<td style="text-align: left;">❌ No</td>
</tr>
<tr>
<td style="text-align: left;"><code>rPT1Sjq2YGrBMTttX4GZHjKu9dyfzbpAYe</code></td>
<td style="text-align: left;">(Not set)</td>
<td style="text-align: left;">❌ No</td>
</tr>
</tbody>
</table>
<p>To run the reference application, run:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-69" id="codeblock-69button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-69"><span class="go">npm run domain-verification</span>
</code></pre></div>
<h2 id="summary">Summary<a aria-hidden="true" class="hover_anchor" href="#summary"><i class="fa fa-link"></i></a></h2>
<p>Congratulations, you now have created your own wallet application! In completing this tutorial, you've not only learned how to interact with the XRP Ledger, but also which challenges this provokes when building a user facing application. So let's do a recap of what you have accomplished:</p>
<p><img alt="Desktop wallet screenshot" src="img/javascript-wallet-preview.png"/></p>
<ol start="0">
<li>First you set up the project and created a basic electron application.</li>
<li>In Step 1 you did your first ledger query and had the application display the latest closed ledger index, using Electron's inter-process-communication.</li>
<li>You expanded on that in Step 2, where you established a permanent subscription to the XRPL and had the application display ledger updates in real time.</li>
<li>In Step 3 you had the application monitor a specific account, prompting the user for an account address and having data flow bi-directionally from <code>ipcRender</code> to <code>ipcMain</code> and back.</li>
<li>You then added a dynamic list of the account's transaction to the application.</li>
<li>In Step 5 you implemented a password-protected seed vault, so that secret information can remain protected when not in use.</li>
<li>Then you gave the application a facelift by adding bootstrap and restructuring the template.</li>
<li>In Step 7 you added wallet functionalities to what was so far a monitoring application by adding a dialog and the corresponding backend functionality to transfer XRP.</li>
<li>Finally, you stepped into some finer details of XRPL development by implementing the domain verification check.</li>
</ol>
    </div>
  </article>
<!-- Feedback Widget -->
<script src="assets/vendor/feedback-widget.js"></script>
<div id="feedback-content"></div>
<script>
  // Options
  const options = {
    analyticsConfig: [
      // { name: 'ga', id: 'UA-45576805-2' },
      { name: 'gtm', id: 'GTM-KCQZ3L8' },
    ],
    analyticsName: 'Feedback Widget Tracker',
    theme: 'xrpl',
    currentPath: window.location.pathname,
    parentElement: '#feedback-content',
  };

  // Init WidgetClass
  const r = new WidgetClass(options);
</script>      </main>
      <!-- Left sidebar last so it's at the end for mobile -->
      <aside class="left-sidebar col-md-5 col-lg-3 order-md-1" role="complementary">


<nav class="nav flex-column dactyl-tree-nav">
  <div class="nav-item nav-parent">
    <a class="nav-link" href="docs.html">Documentation</a>
  </div>
    
    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_2" aria-expanded="false" aria-controls="tree_nav_group_2"></a>

        <a class="nav-link" href="introduction.html">Introduction</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="what-is-the-xrp-ledger.html">What is the XRP Ledger?</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="what-is-xrp.html">What is XRP?</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="crypto-wallets.html">Crypto Wallets</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="txn-and-requests.html">Transactions and Requests</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="software-ecosystem.html">Software Ecosystem</a>
  </div>

    </nav>

  </div>

    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3" aria-expanded="false" aria-controls="tree_nav_group_3"></a>

        <a class="nav-link" href="use-cases.html">Use Cases</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3_1" aria-expanded="false" aria-controls="tree_nav_group_3_1"></a>

        <a class="nav-link" href="payments-uc.html">Payments</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer-to-peer-payments-uc.html">Peer-to-Peer Payments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="restricting-deposits-uc.html">Restricting Deposits</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrow-uc.html">Smart Contracts</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3_2" aria-expanded="false" aria-controls="tree_nav_group_3_2"></a>

        <a class="nav-link" href="tokenization.html">Tokenization</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="stablecoin-issuer.html">Stablecoin Issuer</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3_2_2" aria-expanded="false" aria-controls="tree_nav_group_3_2_2"></a>

        <a class="nav-link" href="nft-mkt-overview.html">NFT Marketplace Overview</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken-marketplace.html">NFT Marketplace</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="authorized-minter.html">Authorized Minter</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="digital-artist.html">Digital Artist</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3_3" aria-expanded="false" aria-controls="tree_nav_group_3_3"></a>

        <a class="nav-link" href="defi-uc.html">Decentralized Finance</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="algorithmic-trading.html">Algorithmic Trading</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="list-xrp-as-an-exchange.html">List XRP as an Exchange</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4" aria-expanded="false" aria-controls="tree_nav_group_4"></a>

        <a class="nav-link" href="concepts.html">Concepts</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_1" aria-expanded="false" aria-controls="tree_nav_group_4_1"></a>

        <a class="nav-link" href="networks-and-servers.html">Networks and Servers</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rippled-server-modes.html">rippled Server Modes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="clustering.html">Clustering</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-history.html">Ledger History</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer-protocol.html">Peer Protocol</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-censorship-detection.html">Transaction Censorship Detection</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="parallel-networks.html">Parallel Networks</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="amendments.html">Amendments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="the-clio-server.html">The Clio Server</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_2" aria-expanded="false" aria-controls="tree_nav_group_4_2"></a>

        <a class="nav-link" href="consensus.html">Consensus Protocol</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus-structure.html">Consensus Structure</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus-principles-and-rules.html">Consensus Principles and Rules</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus-protections.html">Consensus Protections Against Attacks and Failure Modes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="invariant-checking.html">Invariant Checking</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fee-voting.html">Fee Voting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="negative-unl.html">Negative UNL</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus-research.html">Consensus Research</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_3" aria-expanded="false" aria-controls="tree_nav_group_4_3"></a>

        <a class="nav-link" href="ledgers.html">Ledgers</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-structure.html">Ledger Structure</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="open-closed-validated-ledgers.html">Open, Closed, and Validated Ledgers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-close-times.html">Ledger Close Times</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_4" aria-expanded="false" aria-controls="tree_nav_group_4_4"></a>

        <a class="nav-link" href="transactions.html">Transactions</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fees.html">Fees (Disambiguation)</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="reliable-transaction-submission.html">Reliable Transaction Submission</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="secure-signing.html">Secure Signing</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="source-and-destination-tags.html">Source and Destination Tags</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-cost.html">Transaction Cost</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-queue.html">Transaction Queue</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_4_7" aria-expanded="false" aria-controls="tree_nav_group_4_4_7"></a>

        <a class="nav-link" href="finality-of-results.html">Finality of Results</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_4_7">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="look-up-transaction-results.html">Look Up Transaction Results</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-malleability.html">Transaction Malleability</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="canceling-a-transaction.html">Canceling a Transaction</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_5" aria-expanded="false" aria-controls="tree_nav_group_4_5"></a>

        <a class="nav-link" href="payment-types.html">Payment Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="direct-xrp-payments.html">Direct XRP Payments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cross-currency-payments.html">Cross-Currency Payments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="checks.html">Checks</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrow.html">Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="partial-payments.html">Partial Payments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="payment-channels.html">Payment Channels</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_6" aria-expanded="false" aria-controls="tree_nav_group_4_6"></a>

        <a class="nav-link" href="tokens.html">Tokens</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_6">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_6_1" aria-expanded="false" aria-controls="tree_nav_group_4_6_1"></a>

        <a class="nav-link" href="non-fungible-tokens.html">Non-Fungible Tokens</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_6_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-storage.html">NFT Payload Storage</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="non-fungible-token-transfers.html">Trading NFTokens on the XRP Ledger</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-reserve-requirements.html">NFT Reserve Requirements</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken-batch-minting.html">Batch minting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken-authorized-minting.html">Authorizing Another Account to Mint Your NFTs</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken-auctions.html">Running an NFT Auction</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-collections.html">Minting NFTs into Collections</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-fixed-supply.html">Guaranteeing a Fixed Supply of NFTs</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-apis.html">NFT APIs</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="trust-lines-and-issuing.html">Trust Lines and Issuing</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="authorized-trust-lines.html">Authorized Trust Lines</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="clawing-back-tokens.html">Clawing Back Tokens <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_6_5" aria-expanded="false" aria-controls="tree_nav_group_4_6_5"></a>

        <a class="nav-link" href="freezes.html">Freezing Tokens</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_6_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="common-misconceptions-about-freezes.html">Common Misunderstandings about Freezes</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rippling.html">Rippling</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transfer-fees.html">Transfer Fees</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paths.html">Paths</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="demurrage.html">Demurrage <span class="status removed" title="This page describes a legacy feature that has been removed."><i class="fa fa-trash-o"></i></span></a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_6_10" aria-expanded="false" aria-controls="tree_nav_group_4_6_10"></a>

        <a class="nav-link" href="decentralized-exchange.html">Decentralized Exchange</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_6_10">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offers.html">Offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="autobridging.html">Auto-Bridging</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ticksize.html">Tick Size</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="automated-market-makers.html">Automated Market Makers <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_7" aria-expanded="false" aria-controls="tree_nav_group_4_7"></a>

        <a class="nav-link" href="accounts.html">Accounts</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_7">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="multi-signing.html">Multi-Signing</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tickets.html">Tickets</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account-types.html">Account Types</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="deleting-accounts.html">Deleting Accounts</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="reserves.html">Reserves</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="addresses.html">Addresses</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cryptographic-keys.html">Cryptographic Keys</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="depositauth.html">Deposit Authorization</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

    
  <div class="nav-item active-parent">

      <a class="nav-toggler " role="button" data-toggle="collapse" href="#tree_nav_group_5" aria-expanded="true" aria-controls="tree_nav_group_5"></a>

        <a class="nav-link" href="tutorials.html">Tutorials</a>

    <nav class="nav flex-column show " id="tree_nav_group_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="public-servers.html">Public Servers</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_2" aria-expanded="false" aria-controls="tree_nav_group_5_2"></a>

        <a class="nav-link" href="python.html">Python</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get-started-using-python.html">Get Started Using Python</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_2_2" aria-expanded="false" aria-controls="tree_nav_group_5_2_2"></a>

        <a class="nav-link" href="modular-tutorials-in-python.html">Modular Tutorials in Python</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_2_2">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_2_2_1" aria-expanded="false" aria-controls="tree_nav_group_5_2_2_1"></a>

        <a class="nav-link" href="send-payments-using-python.html">Send Payments Using Python</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_2_2_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-create-accounts-send-xrp.html">Create Accounts and Send XRP Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-create-trustline-send-currency.html">Create Trust Line and Send Currency Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-create-time-based-escrows.html">Create Time-based Escrows Using Python</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_2_2_2" aria-expanded="false" aria-controls="tree_nav_group_5_2_2_2"></a>

        <a class="nav-link" href="nfts-using-python.html">NFTs Using Python</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_2_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-mint-and-burn-nfts.html">Mint and Burn NFTs Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-transfer-nfts.html">Transfer NFTs Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-broker-sale.html">Broker an NFT Sale Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-authorize-minter.html">Assign an Authorized Minter Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-batch-minting.html">Batch Mint NFTs</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="build-a-desktop-wallet-in-python.html">Build a Desktop Wallet in Python</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item active-parent">

      <a class="nav-toggler " role="button" data-toggle="collapse" href="#tree_nav_group_5_3" aria-expanded="true" aria-controls="tree_nav_group_5_3"></a>

        <a class="nav-link" href="javascript.html">JavaScript</a>

    <nav class="nav flex-column show " id="tree_nav_group_5_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get-started-using-javascript.html">Get Started Using JavaScript</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_3_2" aria-expanded="false" aria-controls="tree_nav_group_5_3_2"></a>

        <a class="nav-link" href="modular-tutorials-in-javascript.html">Modular Tutorials in JavaScript</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_3_2">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_3_2_1" aria-expanded="false" aria-controls="tree_nav_group_5_3_2_1"></a>

        <a class="nav-link" href="send-payments-using-javascript.html">Send Payments Using JavaScript</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_3_2_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-accounts-send-xrp-using-javascript.html">Create Accounts and Send XRP Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-trustline-send-currency-using-javascript.html">Create Trust Line and Send Currency Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-time-based-escrows-using-javascript.html">Create Time-based Escrows Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-conditional-escrows-using-javascript.html">Create Conditional Escrows Using JavaScript</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_3_2_2" aria-expanded="false" aria-controls="tree_nav_group_5_3_2_2"></a>

        <a class="nav-link" href="nfts-using-javascript.html">NFTs Using JavaScript</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_3_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="mint-and-burn-nfts-using-javascript.html">Mint and Burn NFTs Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transfer-nfts-using-javascript.html">Transfer NFTs Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="broker-an-nft-sale-using-javascript.html">Broker an NFT Sale Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="assign-an-authorized-minter-using-javascript.html">Assign an Authorized Minter Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="batch-mint-nfts-using-javascript.html">Batch Mint NFTs Using JavaScript</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="build-a-browser-wallet-in-javascript.html">Build a Browser Wallet in JavaScript</a>
  </div>

      
  <div class="nav-item active">
    <a class="nav-link nav-leaf" href="build-a-desktop-wallet-in-javascript.html">Build a Desktop Wallet in JavaScript</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_4" aria-expanded="false" aria-controls="tree_nav_group_5_4"></a>

        <a class="nav-link" href="java.html">Java</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get-started-using-java.html">Get Started Using Java</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_5" aria-expanded="false" aria-controls="tree_nav_group_5_5"></a>

        <a class="nav-link" href="http-websocket-apis-tutorials.html">HTTP / Websocket APIs</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get-started-using-http-websocket-apis.html">Get Started Using HTTP / WebSocket APIs</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="monitor-incoming-payments-with-websocket.html">Monitor Incoming Payments with WebSocket</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6" aria-expanded="false" aria-controls="tree_nav_group_5_6"></a>

        <a class="nav-link" href="tasks.html">Tasks</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_1" aria-expanded="false" aria-controls="tree_nav_group_5_6_1"></a>

        <a class="nav-link" href="manage-account-settings.html">Manage Account Settings</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="assign-a-regular-key-pair.html">Assign a Regular Key Pair</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="change-or-remove-a-regular-key-pair.html">Change or Remove a Regular Key Pair</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="disable-master-key-pair.html">Disable Master Key Pair</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="set-up-multi-signing.html">Set Up Multi-Signing</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-a-multi-signed-transaction.html">Send a Multi-Signed Transaction</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="require-destination-tags.html">Require Destination Tags</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offline-account-setup.html">Offline Account Setup Tutorial</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="use-tickets.html">Use Tickets</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-xrp.html">Send XRP</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_3" aria-expanded="false" aria-controls="tree_nav_group_5_6_3"></a>

        <a class="nav-link" href="use-specialized-payment-types.html">Use Specialized Payment Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_3_1" aria-expanded="false" aria-controls="tree_nav_group_5_6_3_1"></a>

        <a class="nav-link" href="use-escrows.html">Use Escrows</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-a-time-held-escrow.html">Send a Time-Held Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-a-conditionally-held-escrow.html">Send a Conditionally-Held Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cancel-an-expired-escrow.html">Cancel an Expired Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="look-up-escrows.html">Look up Escrows</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="use-an-escrow-as-a-smart-contract.html">Use an Escrow as a Smart Contract</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_3_2" aria-expanded="false" aria-controls="tree_nav_group_5_6_3_2"></a>

        <a class="nav-link" href="use-payment-channels.html">Use Payment Channels</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="open-a-payment-channel-to-enable-an-inter-exchange-network.html">Open a Payment Channel to Enable an Inter-Exchange Network</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_3_3" aria-expanded="false" aria-controls="tree_nav_group_5_6_3_3"></a>

        <a class="nav-link" href="use-checks.html">Use Checks</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_3_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-a-check.html">Send a Check</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cash-a-check-for-an-exact-amount.html">Cash a Check for an Exact Amount</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cash-a-check-for-a-flexible-amount.html">Cash a Check for a Flexible Amount</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cancel-a-check.html">Cancel a Check</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="look-up-checks-by-sender.html">Look Up Checks by Sender</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="look-up-checks-by-recipient.html">Look Up Checks by Recipient</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_4" aria-expanded="false" aria-controls="tree_nav_group_5_6_4"></a>

        <a class="nav-link" href="use-tokens.html">Use Tokens</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="issue-a-fungible-token.html">Issue a Fungible Token</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="trade-in-the-decentralized-exchange.html">Trade in the Decentralized Exchange</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enable-no-freeze.html">Enable No Freeze</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enact-global-freeze.html">Enact Global Freeze</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="freeze-a-trust-line.html">Freeze a Trust Line</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-an-automated-market-maker.html">Create an Automated Market Maker <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

    </nav>

  </div>

    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6" aria-expanded="false" aria-controls="tree_nav_group_6"></a>

        <a class="nav-link" href="references.html">References</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1" aria-expanded="false" aria-controls="tree_nav_group_6_1"></a>

        <a class="nav-link" href="protocol-reference.html">XRP Ledger Protocol Reference</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_1" aria-expanded="false" aria-controls="tree_nav_group_6_1_1"></a>

        <a class="nav-link" href="basic-data-types.html">Basic Data Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="base58-encodings.html">base58 Encodings</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="currency-formats.html">Currency Formats</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken.html">NFToken</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_2" aria-expanded="false" aria-controls="tree_nav_group_6_1_2"></a>

        <a class="nav-link" href="ledger-data-formats.html">Ledger Data Formats</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-header.html">Ledger Header</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_2_2" aria-expanded="false" aria-controls="tree_nav_group_6_1_2_2"></a>

        <a class="nav-link" href="ledger-entry-types.html">Ledger Entry Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="accountroot.html">AccountRoot</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="amendments-object.html">Amendments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="amm.html">AMM <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="check.html">Check</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="depositpreauth-object.html">DepositPreauth</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="directorynode.html">DirectoryNode</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrow-object.html">Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="feesettings.html">FeeSettings</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledgerhashes.html">LedgerHashes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="negativeunl.html">NegativeUNL</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenoffer.html">NFTokenOffer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenpage.html">NFTokenPage</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offer.html">Offer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paychannel.html">PayChannel</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ripplestate.html">RippleState</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="signerlist.html">SignerList</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ticket.html">Ticket</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_3" aria-expanded="false" aria-controls="tree_nav_group_6_1_3"></a>

        <a class="nav-link" href="transaction-formats.html">Transaction Reference</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-common-fields.html">Transaction Common Fields</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_3_2" aria-expanded="false" aria-controls="tree_nav_group_6_1_3_2"></a>

        <a class="nav-link" href="transaction-types.html">Transaction Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="accountset.html">AccountSet</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="accountdelete.html">AccountDelete</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammbid.html">AMMBid <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammcreate.html">AMMCreate <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammdelete.html">AMMDelete <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammdeposit.html">AMMDeposit <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammvote.html">AMMVote <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammwithdraw.html">AMMWithdraw <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="checkcancel.html">CheckCancel</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="checkcash.html">CheckCash</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="checkcreate.html">CheckCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="clawback.html">Clawback <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="depositpreauth.html">DepositPreauth</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrowcancel.html">EscrowCancel</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrowcreate.html">EscrowCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrowfinish.html">EscrowFinish</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenacceptoffer.html">NFTokenAcceptOffer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenburn.html">NFTokenBurn</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokencanceloffer.html">NFTokenCancelOffer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokencreateoffer.html">NFTokenCreateOffer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenmint.html">NFTokenMint</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offercancel.html">OfferCancel</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offercreate.html">OfferCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="payment.html">Payment</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paymentchannelclaim.html">PaymentChannelClaim</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paymentchannelcreate.html">PaymentChannelCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paymentchannelfund.html">PaymentChannelFund</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="setregularkey.html">SetRegularKey</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="signerlistset.html">SignerListSet</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ticketcreate.html">TicketCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="trustset.html">TrustSet</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_3_3" aria-expanded="false" aria-controls="tree_nav_group_6_1_3_3"></a>

        <a class="nav-link" href="pseudo-transaction-types.html">Pseudo-Transactions</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_3_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enableamendment.html">EnableAmendment</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="setfee.html">SetFee</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="unlmodify.html">UNLModify</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_3_4" aria-expanded="false" aria-controls="tree_nav_group_6_1_3_4"></a>

        <a class="nav-link" href="transaction-results.html">Transaction Results</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_3_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tec-codes.html">tec Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tef-codes.html">tef Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tel-codes.html">tel Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tem-codes.html">tem Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ter-codes.html">ter Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tes-success.html">tes Success</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-metadata.html">Transaction Metadata</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="serialization.html">Serialization Format</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_2" aria-expanded="false" aria-controls="tree_nav_group_6_2"></a>

        <a class="nav-link" href="client-libraries.html">Client Libraries</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_2">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_2_1" aria-expanded="false" aria-controls="tree_nav_group_6_2_1"></a>

        <a class="nav-link external-link" target="_blank" href="https://js.xrpl.org/">JavaScript / TypeScript Client Library <i aria-hidden="true" class="fa fa-external-link"></i></a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_2_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="xrpljs2-migration-guide.html">Migration Guide for ripple-lib 1.x to xrpl.js 2.x</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf external-link" target="_blank" href="https://xrpl-py.readthedocs.io/">Python Client Library <i aria-hidden="true" class="fa fa-external-link"></i></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf external-link" target="_blank" href="https://javadoc.io/doc/org.xrpl/">Java Client Library <i aria-hidden="true" class="fa fa-external-link"></i></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf external-link" target="_blank" href="https://www.rubydoc.info/gems/xrbp">Ruby Client Library <i aria-hidden="true" class="fa fa-external-link"></i></a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3" aria-expanded="false" aria-controls="tree_nav_group_6_3"></a>

        <a class="nav-link" href="http-websocket-apis.html">HTTP / WebSocket APIs</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_1" aria-expanded="false" aria-controls="tree_nav_group_6_3_1"></a>

        <a class="nav-link" href="api-conventions.html">API Conventions</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="request-formatting.html">Request Formatting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="response-formatting.html">Response Formatting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="error-formatting.html">Error Formatting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="markers-and-pagination.html">Markers and Pagination</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rate-limiting.html">Rate Limiting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rippled-server-states.html">rippled Server States</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ctid.html">Compact Transaction Identifier</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2" aria-expanded="false" aria-controls="tree_nav_group_6_3_2"></a>

        <a class="nav-link" href="public-api-methods.html">Public API Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_1" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_1"></a>

        <a class="nav-link" href="account-methods.html">Account Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_channels.html">account_channels</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_currencies.html">account_currencies</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_info.html">account_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_lines.html">account_lines</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_nfts.html">account_nfts</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_objects.html">account_objects</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_offers.html">account_offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_tx.html">account_tx</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="gateway_balances.html">gateway_balances</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="noripple_check.html">noripple_check</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_2" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_2"></a>

        <a class="nav-link" href="ledger-methods.html">Ledger Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger.html">ledger</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_closed.html">ledger_closed</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_current.html">ledger_current</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_data.html">ledger_data</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_entry.html">ledger_entry</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_3" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_3"></a>

        <a class="nav-link" href="transaction-methods.html">Transaction Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="submit.html">submit</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="submit_multisigned.html">submit_multisigned</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction_entry.html">transaction_entry</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tx.html">tx</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tx_history.html">tx_history</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_4" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_4"></a>

        <a class="nav-link" href="path-and-order-book-methods.html">Path and Order Book Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="amm_info.html">amm_info <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="book_offers.html">book_offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="deposit_authorized.html">deposit_authorized</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft_buy_offers.html">nft_buy_offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft_sell_offers.html">nft_sell_offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="path_find.html">path_find</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ripple_path_find.html">ripple_path_find</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_5" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_5"></a>

        <a class="nav-link" href="payment-channel-methods.html">Payment Channel Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="channel_authorize.html">channel_authorize</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="channel_verify.html">channel_verify</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_6" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_6"></a>

        <a class="nav-link" href="subscription-methods.html">Subscription Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_6">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="subscribe.html">subscribe</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="unsubscribe.html">unsubscribe</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_7" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_7"></a>

        <a class="nav-link" href="server-info-methods.html">Server Info Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_7">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fee.html">fee</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="manifest.html">manifest</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server_info.html">server_info (rippled)</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server_state.html">server_state</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_8" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_8"></a>

        <a class="nav-link" href="clio-methods.html">Clio Server</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_8">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server_info-clio.html">server_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-clio.html">ledger</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft_history.html">nft_history</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft_info.html">nft_info</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_9" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_9"></a>

        <a class="nav-link" href="utility-methods.html">Utility Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_9">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="json.html">json</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ping.html">ping</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="random.html">random</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3" aria-expanded="false" aria-controls="tree_nav_group_6_3_3"></a>

        <a class="nav-link" href="admin-api-methods.html">Admin API Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_1" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_1"></a>

        <a class="nav-link" href="key-generation-methods.html">Key Generation Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validation_create.html">validation_create</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="wallet_propose.html">wallet_propose</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_2" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_2"></a>

        <a class="nav-link" href="logging-and-data-management-methods.html">Logging and Data Management Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="can_delete.html">can_delete</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="crawl_shards.html">crawl_shards</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="download_shard.html">download_shard</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_cleaner.html">ledger_cleaner</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_request.html">ledger_request</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="log_level.html">log_level</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="logrotate.html">logrotate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="node_to_shard.html">node_to_shard</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_3" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_3"></a>

        <a class="nav-link" href="server-control-methods.html">Server Control Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_accept.html">ledger_accept</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="stop.html">stop</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validation_seed.html">validation_seed <span class="status removed" title="This page describes a legacy feature that has been removed."><i class="fa fa-trash-o"></i></span></a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_4" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_4"></a>

        <a class="nav-link" href="signing-methods.html">Signing Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="sign.html">sign</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="sign_for.html">sign_for</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_5" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_5"></a>

        <a class="nav-link" href="peer-management-methods.html">Peer Management Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="connect.html">connect</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer_reservations_add.html">peer_reservations_add</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer_reservations_del.html">peer_reservations_del</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer_reservations_list.html">peer_reservations_list</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peers.html">peers</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_6" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_6"></a>

        <a class="nav-link" href="status-and-debugging-methods.html">Status and Debugging Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_6">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus_info.html">consensus_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="feature.html">feature</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fetch_info.html">fetch_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get_counts.html">get_counts</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="print.html">print</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validator_info.html">validator_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validator_list_sites.html">validator_list_sites</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validators.html">validators</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_4" aria-expanded="false" aria-controls="tree_nav_group_6_3_4"></a>

        <a class="nav-link" href="peer-port-methods.html">Peer Port Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="health-check.html">Health Check</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer-crawler.html">Peer Crawler</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validator-list.html">Validator List Method</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
      
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="xrp-ledger-toml.html">xrp-ledger.toml File</a>
  </div>

    </nav>

  </div>

    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7" aria-expanded="false" aria-controls="tree_nav_group_7"></a>

        <a class="nav-link" href="infrastructure.html">Infrastructure</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="commandline-usage.html">Commandline Usage</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_2" aria-expanded="false" aria-controls="tree_nav_group_7_2"></a>

        <a class="nav-link" href="install-rippled.html">Install rippled</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="system-requirements.html">System Requirements</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="install-rippled-on-centos-rhel-with-yum.html">Install on CentOS/Red Hat with yum</a>
  </div>

      
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="install-rippled-on-ubuntu.html">Install on Ubuntu or Debian Linux</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="update-rippled-automatically-on-linux.html">Update Automatically on Linux</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="update-rippled-manually-on-centos-rhel.html">Update Manually on CentOS/Red Hat</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="update-rippled-manually-on-ubuntu.html">Update Manually on Ubuntu or Debian</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="build-on-linux-mac-windows.html">Build rippled on Linux, Mac, or Windows</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="build-run-rippled-in-reporting-mode.html">Build and Run rippled in Reporting Mode</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="capacity-planning.html">Capacity Planning</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rippled-1-3-migration-instructions.html">rippled v1.3.x Migration Instructions <span class="status removed" title="This page describes a legacy feature that has been removed."><i class="fa fa-trash-o"></i></span></a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_3" aria-expanded="false" aria-controls="tree_nav_group_7_3"></a>

        <a class="nav-link" href="configure-rippled.html">Configure rippled</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_3_1" aria-expanded="false" aria-controls="tree_nav_group_7_3_1"></a>

        <a class="nav-link" href="server-modes.html">Server Modes</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="run-rippled-as-a-validator.html">Run rippled as a Validator</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="run-rippled-as-a-stock-server.html">Run rippled as a Stock Server</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_3_2" aria-expanded="false" aria-controls="tree_nav_group_7_3_2"></a>

        <a class="nav-link" href="data-retention.html">Data Retention</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-full-history.html">Configure Full History</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="online-deletion.html">Online Deletion</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-online-deletion.html">Configure Online Deletion</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-advisory-deletion.html">Configure Advisory Deletion</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="history-sharding.html">History Sharding</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-history-sharding.html">Configure History Sharding</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-amendment-voting.html">Configure Amendment Voting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="test-amendments.html">Test Amendments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-statsd.html">Configure StatsD</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="connect-your-rippled-to-the-xrp-test-net.html">Connect Your rippled to a Parallel Network</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-grpc.html">Configure gRPC</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enable-public-signing.html">Enable Public Signing</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_4" aria-expanded="false" aria-controls="tree_nav_group_7_4"></a>

        <a class="nav-link" href="configure-peering.html">Peering</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cluster-rippled-servers.html">Cluster rippled Servers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-a-private-server.html">Configure a Private Server</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-the-peer-crawler.html">Configure the Peer Crawler</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enable-link-compression.html">Enable Link Compression</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="forward-ports-for-peering.html">Forward Ports for Peering</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="manually-connect-to-a-specific-peer.html">Manually Connect to a Specific Peer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="set-max-number-of-peers.html">Set Maximum Number of Peers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="use-a-peer-reservation.html">Use a Peer Reservation</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_5" aria-expanded="false" aria-controls="tree_nav_group_7_5"></a>

        <a class="nav-link" href="use-stand-alone-mode.html">Testing and Auditing</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="start-a-new-genesis-ledger-in-stand-alone-mode.html">Start a New Genesis Ledger in Stand-Alone Mode</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="load-a-saved-ledger-in-stand-alone-mode.html">Load a Saved Ledger in Stand-Alone Mode</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="advance-the-ledger-in-stand-alone-mode.html">Advance the Ledger in Stand-Alone Mode</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_6" aria-expanded="false" aria-controls="tree_nav_group_7_6"></a>

        <a class="nav-link" href="troubleshoot-the-rippled-server.html">Troubleshooting</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_6">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="diagnosing-problems.html">Diagnosing Problems with rippled</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="health-check-interventions.html">Health Check Interventions</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="understanding-log-messages.html">Understanding Log Messages</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server-doesnt-sync.html">rippled Server Doesn't Sync</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server-is-amendment-blocked.html">rippled Server is Amendment Blocked</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server-wont-start.html">rippled Server Won't Start</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fix-sqlite-tx-db-page-size-issue.html">Fix SQLite Transaction Database Page Size Issue <span class="status removed" title="This page describes a legacy feature that has been removed."><i class="fa fa-trash-o"></i></span></a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="install-clio-on-ubuntu.html">Install Clio on Ubuntu Linux</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="private-network-with-docker.html">Run a Private Network with Docker</a>
  </div>

    </nav>

  </div>

</nav>      </aside>
    </div><!--/.row (main layout)-->
  </div>

<footer class="xrpl-footer" role="contentinfo">
  <section class="container-fluid">
    <div class="row">
        <div class="col-lg">
          <h5>About</h5>
          <ul class="nav footer-nav flex-column">
            <li class="nav-item"><a href="xrp-ledger-overview.html" class="nav-link">XRPL Overview</a></li>
            <li class="nav-item"><a href="uses.html" class="nav-link">Use Cases & Featured Projects</a></li>
            <li class="nav-item"><a href="history.html" class="nav-link">History</a></li>
            <li class="nav-item"><a href="xrp-overview.html" class="nav-link">XRP Overview</a></li>
            <li class="nav-item"><a href="impact.html" class="nav-link">Impact</a></li>
            <li class="nav-item"><a href="https://foundation.xrpl.org/" class="nav-link external-link">XRPL Foundation</a></li>
            <li class="nav-item"><a href="faq.html" class="nav-link">FAQ</a></li>
            <li class="nav-item"><a href="privacy-policy.html" class="nav-link">Privacy Policy</a></li>
          </ul>
        </div><!--/.col -->

        <div class="col-lg">
          <h5>Docs</h5>
          <ul class="nav footer-nav flex-column">
            <li class="nav-item"><a href="docs.html" class="nav-link">Documentation</a></li>
            <li class="nav-item"><a href="introduction.html" class="nav-link">Introduction</a></li>
            <li class="nav-item"><a href="use-cases.html" class="nav-link">Use Cases</a></li>
            <li class="nav-item"><a href="concepts.html" class="nav-link">Concepts</a></li>
            <li class="nav-item"><a href="tutorials.html" class="nav-link">Tutorials</a></li>
            <li class="nav-item"><a href="references.html" class="nav-link">References</a></li>
            <li class="nav-item"><a href="infrastructure.html" class="nav-link">Infrastructure</a></li>
          </ul>
        </div><!--/.col -->

        <div class="col-lg">
          <h5>Resources</h5>
          <ul class="nav footer-nav flex-column">
            <li class="nav-item"><a href="resources.html" class="nav-link">Resources</a></li>
            <li class="nav-item"><a href="code-samples.html" class="nav-link">Code Samples</a></li>
            <li class="nav-item"><a href="dev-tools.html" class="nav-link">Dev Tools</a></li>
            <li class="nav-item"><a href="https://learn.xrpl.org/" class="nav-link external-link">XRPL Learning Portal</a></li>
            <li class="nav-item"><a href="https://livenet.xrpl.org/" class="nav-link external-link">Ledger Explorer</a></li>
            <li class="nav-item"><a href="known-amendments.html" class="nav-link">Known Amendments</a></li>
            <li class="nav-item"><a href="contribute-code.html" class="nav-link">Contribute Code</a></li>
            <li class="nav-item"><a href="contribute-documentation.html" class="nav-link">Contribute Documentation</a></li>
          </ul>
        </div><!--/.col -->

        <div class="col-lg">
          <h5>Community</h5>
          <ul class="nav footer-nav flex-column">
            <li class="nav-item"><a href="contribute.html" class="nav-link">Contribute to the XRPL Community</a></li>
            <li class="nav-item"><a href="events.html" class="nav-link">Events</a></li>
            <li class="nav-item"><a href="ambassadors.html" class="nav-link">Ambassadors</a></li>
            <li class="nav-item"><a href="developer-funding.html" class="nav-link">Developer Funding</a></li>
            <li class="nav-item"><a href="https://jobs.xrpl.org/" class="nav-link external-link">XRPL Jobs</a></li>
            <li class="nav-item"><a href="https://xrpl.org/blog/" class="nav-link external-link">Dev Blog</a></li>
            <li class="nav-item"><a href="https://xrplgrants.org/" class="nav-link external-link">XRPL Grants</a></li>
            <li class="nav-item"><a href="https://github.com/XRPLF" class="nav-link external-link">GitHub</a></li>
            <li class="nav-item"><a href="https://github.com/XRPLF/xrpl-dev-portal/raw/master/content/XRPL_Logo_Kit.zip" class="nav-link external-link">XRPL Brand Kit</a></li>
            <li class="nav-item"><a href="report-a-scam.html" class="nav-link">Report a Scam</a></li>
          </ul>
        </div><!--/.col -->

  </section>

  <section class="container-fluid mt-20 absolute-bottom-footer">

    <div class="d-lg-flex row">
      <a href="/" class="footer-brand"><img src="assets/img/XRPLedger_DevPortal-white.svg" class="logo"  height="24" alt="XRPL.org" /></a>
      <span class="flex-grow-1">&nbsp;</span>
      <div class="copyright-license">&copy; 2023 XRP Ledger. <a href="https://raw.githubusercontent.com/XRPLF/xrpl-dev-portal/master/LICENSE">Open Source.</a>
      </div>
    </div><!-- /.absolute_bottom_footer -->

  </section>
</footer>

<!-- Jump to top button -->
<a href="#main_content_wrapper" class="jump-to-top btn btn-primary" role="button" title="Jump to top of page"><i class="fa fa-arrow-up"></i></a>
<script type="text/javascript" src="assets/js/jump-to-top.js"></script>

  <!-- Non-blocking resources -->
  <!-- Bootstrap JS -->
  <script src="assets/vendor/bootstrap.min.js"></script>
  <!-- fontawesome icons -->
  <link rel="stylesheet" href="assets/vendor/fontawesome/css/font-awesome.min.css" />


  <!-- XRPL AI -->
  <script id="xrplai-options">
    var TARGET_XRPL_DEV_PORTAL_BRANCH = 'main';
    var PROMPT_MODE = 'prompt';
    var RUNTIME_LOCATION = 'ripplex';
    var DEV_XRPLAI_RIPPLEX_IO_PROJECT_KEY = 'sk_test_i4WeLrhPtulIx1wHkcb15XouWrGiY9bf';
    var DEV_XRPLAI_RIPPLEX_API_BASE_URL = 'https://api.xrplai.dev.ripplex.io';
    var LOCALHOST_API_BASE_URL = 'http://api.localhost:3000';
    var CHAT_ENDPOINT = '/v1/chat';
    var PROMPT_ENDPOINT = '/v1/chat';
    var FEEDBACK_ENDPOINT = '/v1/feedback';
    var BASE_URL = RUNTIME_LOCATION === 'ripplex'
      ? DEV_XRPLAI_RIPPLEX_API_BASE_URL
      : LOCALHOST_API_BASE_URL;
    var CHAT_API_URL = `${BASE_URL}${CHAT_ENDPOINT}`;
    var PROMPT_API_URL = `${BASE_URL}${PROMPT_ENDPOINT}`;
    var FEEDBACK_API_URL = `${BASE_URL}${FEEDBACK_ENDPOINT}`;

    /** @type {import('@xrpl/ai-react').MarkpromptOptions} */
    window.markprompt = {
      // NOTE: This is the development key, DO NOT USE THIS IN PRODCTION
      projectKey: DEV_XRPLAI_RIPPLEX_IO_PROJECT_KEY,
      options: {
        chat: {
          enabled: PROMPT_MODE === 'chat',
          apiUrl: CHAT_API_URL,
        },
        feedback: {
          enabled: true,
          apiUrl: FEEDBACK_API_URL,
          heading: "Do you want to leave additional feedback?",
          extended: {
            enabled: true,
            extendedButtonText: "Submit",
          }
        },
        prompt: {
          examples: {
            enabled: true,
          },
          tabPosition: 'left',
          position: 'bottom',
          apiUrl: PROMPT_API_URL,
          showSubmitButton: true,
          systemPrompt: `
You are a very enthusiastic company representative who loves to help people! Given the following sections from the documentation (preceded by a section id), answer the question using only that information, outputted in Markdown format. If you are unsure and the answer is not explicitly written in the documentation, say "".

Context sections:
---


Question: ""

Answer (including related code snippets if available and markdown links to relevant things):
              `.trim(),
        },
        references: {
          display: 'end',
          getHref: (reference) => {
            const { file } = reference;
            if (file && file.path) {
              // /\/content\/[^_][^/]*\.md/.test(file.path)
              if (file.path.includes('content/') && !file.path.includes('content/_') && file.path.endsWith('.md')) {
                // Remove the extension if it's a regular content page that lives on xrpl.org
                // return file.path.replace(/\.[^.]+$/, '');
                // Change extension to html and remove content/ from the URL
                if (file.path.endsWith('ja.md')) {
                  // Japanese lives at /ja/<filename>.html
                  return `ja/${file.path.replace(/content\//, '').replace(/\.ja\.md$/, '.html')}`
                }
                return file.path.replace(/content\//, '').replace(/\.md$/, '.html')
              } else {
                // Otherwise link to a file on the github repo such as .js or README.md
                return `https://github.com/XRPLF/xrpl-dev-portal/blob/master/${file.path}`;
              }
            } else {
              // Handle the case where file or file.path is missing
              return '';
            }
          },
          getLabel: (reference) => {
            return reference.meta?.leadHeading?.value || reference.file?.title;
          },
        },
        showBranding: false,
        trigger: {
          customElement: true,
          customElementId: "topsearchboxcontainer",
        },
        search: {
          enabled: true,
          provider: {
            name: 'algolia',
            apiKey: '3431349deec23b0bc3dcd3424beb9a6e',
            appId: 'R39QY3MZC7',
            indexName: 'xrpl',
          },
        },
        support: {
          disclaimer: {
            displayedBeforeAnswer: false,
          }
        },
      },
    };
  </script>
  <script type="module" src="assets/js/xrplai.js"></script>


</body>

</html>
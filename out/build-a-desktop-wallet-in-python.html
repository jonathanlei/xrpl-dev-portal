<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Build a Desktop Wallet in Python - XRPL.org</title>
  <meta name="viewport" content="width=device-width">
  <meta property="og:title" content="Build a Desktop Wallet in Python | XRPL.org">
  <meta property="og:url"
    content="https://xrpl.org/build-a-desktop-wallet-in-python.html" />
  <meta property="og:description"
    content="Build a graphical desktop wallet for the XRPL in Python." />
  <meta name="description"
    content="Build a graphical desktop wallet for the XRPL in Python." />
  <meta property="og:image"
    content="https://xrpl.org/assets/img/xrpl-fb-li-card.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:image"
    content="https://xrpl.org/assets/img/xrpl-twitter-card.png" />
  <meta name="robots" content="index, follow" />
  <meta name="docsearch:language" content="en" />
  <link rel="alternate" href="https://xrpl.org/build-a-desktop-wallet-in-python.html" hreflang="en" />
  <link rel="alternate" href="https://xrpl.org/ja/build-a-desktop-wallet-in-python.html" hreflang="ja" />
  <link rel="alternate" href="https://xrpl.org/build-a-desktop-wallet-in-python.html" hreflang="x-default" /><!-- Default: US english -->


  <!-- favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicons/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicons/favicon-32x32.png">
  <link rel="manifest" href="assets/favicons/site.webmanifest">
  <link rel="shortcut icon" href="favicon.ico">
  <meta name="msapplication-TileColor" content="#25A768">
  <meta name="msapplication-config" content="assets/favicons/browserconfig.xml">
  <meta name="theme-color" content="#25A768">
  <!-- The page supports both dark and light color schemes, and the page author prefers dark. -->
  <meta name="color-scheme" content="dark light">

  <!-- jQuery -->
  <script src="assets/vendor/jquery-3.7.1.min.js"></script>

  <!-- Google Tag Manager -->
    <script type="application/javascript">
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      "event": "page_info",
      "page_type": "Document",
      "page_group": "Docs",
      "page_funnel": "Tutorials",
      "page_labels": []
    })
    </script>
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-KCQZ3L8');</script>


  <!-- Stylesheet -->
  <link rel="stylesheet" href="assets/css/xrplai.css" />
  <link href="assets/css/devportal2022-v25.css" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />

  <script src="https://cmp.osano.com/AzyjT6TIZMlgyLyy8/f11f7772-8ed5-4b73-bd17-c0814edcc440/osano.js"></script>


  <!-- Theme switch -->
  <script src="assets/js/theme-switch.js"></script>



    <!-- expandable code samples -->
    <script src="assets/js/expandcode.js"></script>
    <!-- multi-code selection tabs -->
    <script src="assets/js/multicodetab.js"></script>
    <!-- copy code button -->
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script>
    <script>
        $(document).ready(function() {
            $(".multicode").minitabs();
            make_code_expandable();
            new ClipboardJS('.clipboard-btn');
        });
    </script>


</head>

<body class="xrp-ledger-dev-portal sidebar-primary lang-en " data-spy="scroll"
  data-target=".page-toc" data-offset="0" id="xrp-ledger-dev-portal">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KCQZ3L8" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

<nav class="top-nav navbar navbar-expand-lg navbar-dark fixed-top">
  <a href="/" class="navbar-brand"><img class="logo"  height="40" alt="XRPL.org" /></a>
  <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#top-main-nav" aria-controls="navbarHolder" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"><div></div></span>
  </button>
  <div class="collapse navbar-collapse justify-content-between" id="top-main-nav">
    <ul class="nav navbar-nav" id="topnav-pages">

            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="xrp-ledger-overview.html" id="topnav_xrp-ledger-overviewhtml" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>About</span></a>
        <div class="dropdown-menu" aria-labelledby="topnav_xrp-ledger-overviewhtml" id="topnav_dd_xrp-ledger-overviewhtml">
          <div class="navcol col-for-xrp-ledger">
            <h5 class="dropdown-item">XRP Ledger</h5>
            <a class="dropdown-item " href="xrp-ledger-overview.html">XRPL Overview</a>
            <a class="dropdown-item" href="uses.html">Use Cases & Featured Projects</a>
            <a class="dropdown-item" href="history.html">History</a>
          </div><!--./col-->
          <div class="navcol col-for-xrp">
            <h5 class="dropdown-item">XRP</h5>
            <a class="dropdown-item" href="xrp-overview.html">XRP Overview</a>
          </div><!--./col-->
          <div class="navcol col-for-sustainability">
            <h5 class="dropdown-item">Sustainability</h5>
            <a class="dropdown-item" href="impact.html">Impact</a>
          </div><!--./col-->
          <div class="navcol col-for-about">
            <h5 class="dropdown-item">About</h5>
            <a class="dropdown-item external-link" href="https://foundation.xrpl.org/" target="_blank">XRPL Foundation</a>
            <a class="dropdown-item" href="faq.html">FAQ</a>
            <a class="dropdown-item" href="privacy-policy.html">Privacy Policy</a>
          </div><!--./col-->
        </div><!--/.dropdown-menu-->
      </li>

            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="docs.html" id="topnav_docshtml" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Docs</span></a>
        <div class="dropdown-menu" aria-labelledby="topnav_docshtml" id="topnav_dd_docshtml">
          <a class="dropdown-item dropdown-hero" id="dropdown-hero-for-documentation" href="docs.html">
            <img id="top-nav-hero-docs" alt="Documentation icon" />
            <div class="dropdown-hero-text">
              <h4>Documentation</h4>
              <p>Dive into XRP Ledger technology and start integrating.</p>
            </div>
          </a>
          <div class="navcol col-for-article-types">
            <h5 class="dropdown-item">Article Types</h5>
            <a class="dropdown-item" href="introduction.html">Introduction</a>
            <a class="dropdown-item" href="use-cases.html">Use Cases</a>
            <a class="dropdown-item" href="concepts.html">Concepts</a>
            <a class="dropdown-item" href="tutorials.html">Tutorials</a>
            <a class="dropdown-item" href="references.html">References</a>
            <a class="dropdown-item" href="infrastructure.html">Infrastructure</a>
          </div><!--./col-->
          <div class="navcol col-for-get-started">
            <h5 class="dropdown-item">Get Started</h5>
            <a class="dropdown-item" href="get-started-using-python.html">Python</a>
            <a class="dropdown-item" href="get-started-using-javascript.html">JavaScript</a>
            <a class="dropdown-item" href="get-started-using-java.html">Java</a>
            <a class="dropdown-item" href="get-started-using-http-websocket-apis.html">HTTP / WebSocket</a>
          </div><!--./col-->
          <div class="navcol col-for-popular-pages">
            <h5 class="dropdown-item">Popular Pages</h5>
            <a class="dropdown-item" href="send-xrp.html">Send XRP</a>
            <a class="dropdown-item" href="reserves.html">Reserves</a>
            <a class="dropdown-item" href="xrp-testnet-faucet.html">XRP Faucets</a>
            <a class="dropdown-item" href="run-rippled-as-a-validator.html">Join UNL</a>
            <a class="dropdown-item" href="build-run-rippled-in-reporting-mode.html">Build and Run rippled in Reporting Mode</a>
            <a class="dropdown-item" href="public-api-methods.html">API Methods</a>
          </div><!--./col-->
        </div><!--/.dropdown-menu-->
      </li>

            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="resources.html" id="topnav_resourceshtml" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Resources</span></a>
        <div class="dropdown-menu" aria-labelledby="topnav_resourceshtml" id="topnav_dd_resourceshtml">
          <div class="navcol col-for-development">
            <h5 class="dropdown-item">Development</h5>
            <a class="dropdown-item" href="code-samples.html">Code Samples</a>
            <a class="dropdown-item" href="dev-tools.html">Dev Tools</a>
            <a class="dropdown-item external-link" href="https://learn.xrpl.org/" target="_blank">XRPL Learning Portal</a>
          </div><!--./col-->
          <div class="navcol col-for-current-status">
            <h5 class="dropdown-item">Current Status</h5>
            <a class="dropdown-item external-link" href="https://livenet.xrpl.org/" target="_blank">Ledger Explorer</a>
            <a class="dropdown-item" href="known-amendments.html">Known Amendments</a>
          </div><!--./col-->
          <div class="navcol col-for-join-in">
            <h5 class="dropdown-item">Join In</h5>
            <a class="dropdown-item" href="contribute-code.html">Contribute Code</a>
            <a class="dropdown-item" href="contribute-documentation.html">Contribute Documentation</a>
          </div><!--./col-->
        </div><!--/.dropdown-menu-->
      </li>

            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="contribute.html" id="topnav_contributehtml" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Community</span></a>
        <div class="dropdown-menu" aria-labelledby="topnav_contributehtml" id="topnav_dd_contributehtml">
          <a class="dropdown-item dropdown-hero" id="dropdown-hero-for-contribute-to-the-xrpl-community" href="contribute.html">
            <img id="top-nav-hero-contribute" alt="Contribute to the XRPL Community icon" />
            <div class="dropdown-hero-text">
              <h4>Contribute to the XRPL Community</h4>
              <p>Join the conversation</p>
            </div>
          </a>
          <div class="navcol col-for-ungrouped">
            <a class="dropdown-item" href="events.html">Events</a>
            <a class="dropdown-item" href="ambassadors.html">Ambassadors</a>
            <a class="dropdown-item" href="developer-funding.html">Developer Funding</a>
            <a class="dropdown-item external-link" href="https://jobs.xrpl.org/" target="_blank">XRPL Jobs</a>
            <a class="dropdown-item external-link" href="https://xrpl.org/blog/" target="_blank">Dev Blog</a>
            <a class="dropdown-item external-link" href="https://xrplgrants.org/" target="_blank">XRPL Grants</a>
            <a class="dropdown-item external-link" href="https://github.com/XRPLF" target="_blank">GitHub</a>
            <a class="dropdown-item external-link" href="https://github.com/XRPLF/xrpl-dev-portal/raw/master/content/XRPL_Logo_Kit.zip" target="_blank">XRPL Brand Kit</a>
            <a class="dropdown-item" href="report-a-scam.html">Report a Scam</a>
          </div><!--./col-->
        </div><!--/.dropdown-menu-->
      </li>

    </ul><!-- /.navbar-nav -->

    <div class="nav-item search" id="topnav-search">
      <form class="navbar-form navbar-right" role="search">
        <div class="form-inline">
          <div class="input-group" id="topsearchboxcontainer">
            <label class="input-group-prepend" for="topsearchbox"><i class="fa fa-search input-group-text"></i><span class="sr-only">Search</span></label>
            <input id="topsearchbox" name="q" type="text" class="form-control searchinput" placeholder="Start search">
          </div><!--/.input-group-->
        </div>
      </form>
    </div><!--/#topnav-search-->

    <div class="nav-item" id="topnav-language">
      <div class="dropdown">
        <a class="nav-link dropdown-toggle with-caret" id="language_selector_header_btn" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          English
          <span class="chevron"><span></span><span></span></span>
        </a>
        <div class="dropdown-menu smaller-dropdown" aria-labelledby="language_selector_header_btn">
          <hr />
          <a class="dropdown-item" href="/ja/build-a-desktop-wallet-in-python.html">
            日本語
          </a>
          <hr />
        </div><!--/.dropdown-menu-->
      </div><!--/.dropdown-->
    </div><!--/.language-selector-->

    <div class="nav-item" id="topnav-theme">
      <form class="form-inline">
        <div class="custom-control custom-theme-toggle form-inline-item" title="" data-toggle="tooltip" data-placement="left" data-original-title="Toggle Dark Mode">
          <input type="checkbox" class="custom-control-input" id="css-toggle-btn">
          <label class="custom-control-label" for="css-toggle-btn"><span class="d-lg-none">Light/Dark Theme</span></label>
        </div>
      </form>
    </div><!--/#topnav-theme-->
  </div><!--/#top-main-nav-->
</nav>
  <div class="container-fluid" role="document" id="main_content_wrapper">
    <div class="row">
      <!-- Right sidebar first so it's at the beginning for mobile layouts -->
      <aside class="right-sidebar col-lg-3 order-lg-4" role="complementary">
  <a class="with-caret expander collapsed d-lg-none" id="toc-expander" role="button" data-toggle="collapse" data-target="#page-toc-wrapper" aria-expanded="false">
    Page Toolbar
    <span class="chevron"><span></span><span></span></span>
  </a>
  <div id="page-toc-wrapper" class="collapse d-lg-block">
<div class="github-edit-wrap">
    <a href="https://github.com/XRPLF/xrpl-dev-portal/edit/master/content/tutorials/build-apps/build-a-desktop-wallet-in-python.md" target="_blank" class="btn btn-primary github-edit">Edit page</a>
</div><!-- /.github-edit -->    <div class="toc-header">
      <h4>In this document</h4>
    </div>
    <ul class="page-toc nav flex-column" role="directory">
        <li class="nav-item level-1"><a class="nav-link" href="#build-a-desktop-wallet-in-python">Build a Desktop Wallet in Python</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#prerequisites">Prerequisites</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#source-code">Source Code</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#goals">Goals</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#steps">Steps</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#install-dependencies">Install Dependencies</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#1-hello-world">1. Hello World</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#2-show-ledger-updates">2. Show Ledger Updates</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#3-display-an-account">3. Display an Account</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#4-show-accounts-transactions">4. Show Account's Transactions</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#5-send-xrp">5. Send XRP</a></li>
        <li class="nav-item level-3"><a class="nav-link" href="#6-domain-verification-and-polish">6. Domain Verification and Polish</a></li>
        <li class="nav-item level-2"><a class="nav-link" href="#next-steps">Next Steps</a></li>
      </ul>
  </div>
      </aside>

      <!-- main column -->
      <main class="main col-md-7 col-lg-6 order-md-3 " role="main" id="main_content_body">
<nav class="breadcrumbs-wrap" aria-label="breadcrumb">
  <ul class="breadcrumb">
    




    <li class="active breadcrumb-item"><a href="index.html">Home</a></li>
    <li class="active breadcrumb-item"><a href="docs.html">Documentation</a></li>
    <li class="active breadcrumb-item"><a href="tutorials.html">Tutorials</a></li>
    <li class="active breadcrumb-item"><a href="python.html">Python</a></li>
    <li class="active breadcrumb-item">Build a Desktop Wallet in Python</li>
  </ul>
</nav><!--/.breadcrumbs-wrap-->  <article>
    <div class="content">
        <h1 id="build-a-desktop-wallet-in-python">Build a Desktop Wallet in Python<a aria-hidden="true" class="hover_anchor" href="#build-a-desktop-wallet-in-python"><i class="fa fa-link"></i></a></h1>
<!-- STYLE_OVERRIDE: wallet -->
<p>This tutorial demonstrates how to build a desktop wallet for the XRP Ledger using the Python programming language and various libraries. This application can be used as a starting point for building a more complete and powerful application, as a reference point for building comparable apps, or as a learning experience to better understand how to integrate XRP Ledger functionality into a larger project.</p>
<h2 id="prerequisites">Prerequisites<a aria-hidden="true" class="hover_anchor" href="#prerequisites"><i class="fa fa-link"></i></a></h2>
<p>To complete this tutorial, you should meet the following guidelines:</p>
<ul>
<li>You have Python 3.7 or higher installed.</li>
<li>You are somewhat familiar with object-oriented programming in Python and have completed the <a href="get-started-using-python.html">Get Started Using Python tutorial</a>.</li>
<li>You have some understanding of what the XRP Ledger can do and of cryptocurrency in general. You don't need to be an expert.</li>
</ul>
<h2 id="source-code">Source Code<a aria-hidden="true" class="hover_anchor" href="#source-code"><i class="fa fa-link"></i></a></h2>
<p>You can find the complete source code for all of this tutorial's examples in the <a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/py/" target="_blank">code samples section of this website's repository <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<h2 id="goals">Goals<a aria-hidden="true" class="hover_anchor" href="#goals"><i class="fa fa-link"></i></a></h2>
<p>At the end of this tutorial, you should have a Python application that looks something like this:</p>
<p><img alt="Desktop wallet screenshot" src="img/python-wallet-preview.png"/></p>
<p>The exact look and feel of the user interface depend on your computer's operating system. This application is capable of the following:</p>
<ul>
<li>Shows updates to the XRP Ledger in real-time.</li>
<li>Can view any XRP Ledger account's activity "read-only" including showing how much XRP was delivered by each transaction.</li>
<li>Shows how much XRP is set aside for the account's <a href="reserves.html">reserve requirement</a>.</li>
<li>Can send <a href="direct-xrp-payments.html">direct XRP payments</a>, and provides feedback about the intended destination address, including:<ul>
<li>Whether the intended destination already exists in the XRP Ledger, or the payment would have to fund its creation.</li>
<li>If the address doesn't want to receive XRP (<strong>Disallow XRP</strong> flag enabled).</li>
<li>If the address has a <a href="xrp-ledger-toml.html#account-verification">verified domain name</a> associated with it.</li>
</ul>
</li>
</ul>
<p>The application in this tutorial <em>doesn't</em> have the ability to send or trade <a href="issued-currencies.html">tokens</a> or use other <a href="payment-types.html">payment types</a> like Escrow or Payment Channels. However, it provides a foundation that you can implement those and other features on top of.</p>
<p>Other topics mentioned in this tutorial include graphical user interface (GUI) programming, threading, and asynchronous (async) code in Python.</p>
<h2 id="steps">Steps<a aria-hidden="true" class="hover_anchor" href="#steps"><i class="fa fa-link"></i></a></h2>
<h3 id="install-dependencies">Install Dependencies<a aria-hidden="true" class="hover_anchor" href="#install-dependencies"><i class="fa fa-link"></i></a></h3>
<p>This tutorial depends on various programming libraries. Before you get started coding, you should install all of them as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-0" id="codeblock-0button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-0">pip3 install --upgrade xrpl-py wxPython requests toml
</code></pre></div>
<p>(On some systems, the command may be <code>pip</code> or you may need to use <code>sudo pip3</code> instead.)</p>
<p>This installs and upgrades the following Python libraries:</p>
<ul>
<li><a class="external-link" href="https://xrpl-py.readthedocs.io/" target="_blank">xrpl-py <i aria-hidden="true" class="fa fa-external-link"></i></a>, a client library for the XRP Ledger. This tutorial requires <strong>version 1.3.0 or higher</strong>.</li>
<li><a class="external-link" href="https://wxpython.org/" target="_blank">wxPython <i aria-hidden="true" class="fa fa-external-link"></i></a>, a cross-platform graphical toolkit.</li>
<li><a class="external-link" href="https://requests.readthedocs.io/" target="_blank">Requests <i aria-hidden="true" class="fa fa-external-link"></i></a>, a library for making HTTP requests.</li>
<li><a class="external-link" href="https://github.com/uiri/toml" target="_blank">toml <i aria-hidden="true" class="fa fa-external-link"></i></a>, a library for parsing TOML-formatted files.</li>
</ul>
<p>The <code>requests</code> and <code>toml</code> libraries are only needed for the <a href="#6-domain-verification-and-polish">domain verification in step 6</a>, but you can install them now while you're installing other dependencies.</p>
<h4 id="notes-for-windows-users">Notes for Windows Users<a aria-hidden="true" class="hover_anchor" href="#notes-for-windows-users"><i class="fa fa-link"></i></a></h4>
<p>On Windows, you can build apps using either Windows natively or by using the Windows Subsystem for Linux (WSL). <!-- SPELLING_IGNORE: wsl --></p>
<p>On native Windows, the GUI uses native Windows controls and should run without any dependencies beyond those mentioned above.</p>
<p>On WSL, you may need to install <code>libnotify-dev</code> as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-1" id="codeblock-1button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-1">apt-get install libnotify-dev
</code></pre></div>
<p>If you have trouble installing wxPython on WSL, you can also try installing it this way:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-2" id="codeblock-2button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-2">python -m pip install -U -f https://extras.wxpython.org/wxPython4/extras/linux/gtk3/ubuntu-18.04 wxPython
</code></pre></div>
<h3 id="1-hello-world">1. Hello World<a aria-hidden="true" class="hover_anchor" href="#1-hello-world"><i class="fa fa-link"></i></a></h3>
<p>The first step is to build an app that combines the "hello world" equivalents for the XRP Ledger and wxPython programming. The code is as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-3" id="codeblock-3button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-3"><span class="c1"># "Build a Wallet" tutorial, step 1: slightly more than "Hello World"</span>
<span class="c1"># This step demonstrates a simple GUI and XRPL connectivity.</span>
<span class="c1"># License: MIT. https://github.com/XRPLF/xrpl-dev-portal/blob/master/LICENSE</span>

<span class="kn">import</span> <span class="nn">xrpl</span>
<span class="kn">import</span> <span class="nn">wx</span>

<span class="k">class</span> <span class="nc">TWaXLFrame</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Tutorial Wallet for the XRP Ledger (TWaXL)</span>
<span class="sd">    user interface, main frame.</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"TWaXL"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">400</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">JsonRpcClient</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="n">main_panel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ledger_info</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="n">main_panel</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_validated_ledger</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_validated_ledger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">requests</span><span class="o">.</span><span class="n">Ledger</span><span class="p">(</span>
                <span class="n">ledger_index</span><span class="o">=</span><span class="s2">"validated"</span>
            <span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">"Failed to get validated ledger from server. (</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">)"</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">is_successful</span><span class="p">():</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">"Latest validated ledger: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s1">'ledger_index'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Connected to the server, but the request failed. This can</span>
            <span class="c1"># happen if, for example, the server isn't synced to the network</span>
            <span class="c1"># so it doesn't have the latest validated ledger.</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">"Server returned an error: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s1">'error_message'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">JSON_RPC_URL</span> <span class="o">=</span> <span class="s2">"https://s.altnet.rippletest.net:51234/"</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">App</span><span class="p">()</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">TWaXLFrame</span><span class="p">(</span><span class="n">JSON_RPC_URL</span><span class="p">)</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">()</span>
</code></pre></div>
<p>When you run this script, it displays a single window that (hopefully) shows the latest validated ledger index on the XRP Ledger Testnet. It looks like this:</p>
<p><img alt="Screenshot: Step 1, hello world equivalent" src="img/python-wallet-1.png"/></p>
<p>Under the hood, the code makes a JSON-RPC client, connects to a public Testnet server, and uses the <a href="ledger.html">ledger method</a> to get this information. Meanwhile, it creates a <a class="external-link" href="https://docs.wxpython.org/wx.Frame.html" target="_blank"><code>wx.Frame</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> subclass as the base of the user interface. This class makes a window the user can see, with a <a class="external-link" href="https://docs.wxpython.org/wx.StaticText.html" target="_blank"><code>wx.StaticText</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> widget to display text to the user, and a <a class="external-link" href="https://docs.wxpython.org/wx.Panel.html" target="_blank"><code>wx.Panel</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> to hold that widget.</p>
<h3 id="2-show-ledger-updates">2. Show Ledger Updates<a aria-hidden="true" class="hover_anchor" href="#2-show-ledger-updates"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong> <a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/py/2_threaded.py" target="_blank"><code>2_threaded.py</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</p>
<p>You may have noticed that the app in step 1 only shows the latest validated ledger at the time you opened it: the text displayed never changes unless you close the app and reopen it. The actual XRP Ledger is constantly making forward progress, so a more useful app would show it, something like this:</p>
<p><img alt="Animation: Step 2, showing ledger updates" src="img/python-wallet-2.gif"/></p>
<p>If you want to continually watch the ledger for updates (for example, waiting to see when new transactions have been confirmed), then you need to change the architecture of your app slightly. For reasons specific to Python, it's best to use two <em>threads</em>: a "GUI" thread to handle user input and display, and a "worker" thread for XRP Ledger network connectivity. The operating system can switch quickly between the two threads at any time, so the user interface can remain responsive while the background thread waits on information from the network that may take a while to arrive.</p>
<p>The main challenge with threads is that you have to be careful not to access data from one thread that another thread may be in the middle of changing. A straightforward way to do this is to design your program so that each thread has variables it "owns" and doesn't write to the other thread's variables. In this program, each thread is its own class, so each thread should only write to its own class attributes (anything starting with <code>self.</code>). When the threads need to communicate, they use specific, "thread-safe" methods of communication, namely:</p>
<ul>
<li>For GUI to worker thread, use <a class="external-link" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.run_coroutine_threadsafe" target="_blank"><code>asyncio.run_coroutine_threadsafe()</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</li>
<li>For worker to GUI communications, use <a class="external-link" href="https://docs.wxpython.org/wx.functions.html#wx.CallAfter" target="_blank"><code>wx.CallAfter()</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</li>
</ul>
<p>To make full use of the XRP Ledger's ability to push messages to the client, use <a class="external-link" href="https://xrpl-py.readthedocs.io/en/stable/source/xrpl.asyncio.clients.html#xrpl.asyncio.clients.AsyncWebsocketClient" target="_blank">xrpl-py's <code>AsyncWebsocketClient</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> instead of <code>JsonRpcClient</code>. This lets you "subscribe" to updates using asynchronous code, while also performing other request/response actions in response to various events such as user input.</p>
<p class="devportal-callout note"><strong>Note:</strong> While you can, technically, use the synchronous (that is, non-async) WebSocket client, it gets significantly more complicated to manage these things while also handling input from the GUI. Even if writing async code is unfamiliar to you, it can be worth it to reduce the overall complexity of the code you have to write later.</p>
<p>Add these imports to the top of the file:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-4" id="codeblock-4button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-4"><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>
</code></pre></div>
<p>Then, the code for the monitor thread is as follows (put this in the same file as the rest of the app):</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-5" id="codeblock-5button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-5"><span class="k">class</span> <span class="nc">XRPLMonitorThread</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A worker thread to watch for new ledger events and pass the info back to</span>
<span class="sd">    the main frame to be shown in the UI. Using a thread lets us maintain the</span>
<span class="sd">    responsiveness of the UI while doing work in the background.</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">gui</span><span class="p">):</span>
        <span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># Note: For thread safety, this thread should treat self.gui as</span>
        <span class="c1"># read-only; to modify the GUI, use wx.CallAfter(...)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span> <span class="o">=</span> <span class="n">gui</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
        <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">set_debug</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        This thread runs a never-ending event-loop that monitors messages coming</span>
<span class="sd">        from the XRPL, sending them to the GUI thread when necessary, and also</span>
<span class="sd">        handles making requests to the XRPL when the GUI prompts them.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">watch_xrpl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        This is the task that opens the connection to the XRPL, then handles</span>
<span class="sd">        incoming subscription messages by dispatching them to the appropriate</span>
<span class="sd">        part of the GUI.</span>
<span class="sd">        """</span>

        <span class="k">async</span> <span class="k">with</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">AsyncWebsocketClient</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_connected</span><span class="p">()</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
                <span class="n">mtype</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"type"</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">mtype</span> <span class="o">==</span> <span class="s2">"ledgerClosed"</span><span class="p">:</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">update_ledger</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set up initial subscriptions and populate the GUI with data from the</span>
<span class="sd">        ledger on startup. Requires that self.client be connected first.</span>
<span class="sd">        """</span>
        <span class="c1"># Set up a subscriptions for new ledgers</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">requests</span><span class="o">.</span><span class="n">Subscribe</span><span class="p">(</span>
            <span class="n">streams</span><span class="o">=</span><span class="p">[</span><span class="s2">"ledger"</span><span class="p">]</span>
        <span class="p">))</span>
        <span class="c1"># The immediate response contains details for the last validated ledger.</span>
        <span class="c1"># We can use this to fill in that area of the GUI without waiting for a</span>
        <span class="c1"># new ledger to close.</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">update_ledger</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>
<p>This code defines a <code>Thread</code> subclass for the worker. When the thread starts, it sets up an event loop, which waits for async tasks to be created and run. The code uses <a class="external-link" href="https://docs.python.org/3/library/asyncio-dev.html#asyncio-debug-mode" target="_blank"><code>asyncio</code>'s Debug Mode <i aria-hidden="true" class="fa fa-external-link"></i></a> so that the console shows any errors that occur in async tasks.</p>
<p>The <code>watch_xrpl()</code> function is an example of a such a task (which the GUI thread starts when it's ready): it connects to the XRP Ledger, then calls the <a href="subscribe.html">subscribe method</a> to be notified whenever a new ledger is validated. It uses the immediate response <em>and</em> all later subscription stream messages to trigger updates of the GUI.</p>
<p class="devportal-callout tip"><strong>Tip:</strong> Define worker jobs like this using <code>async def</code> instead of <code>def</code> so that you can use the <code>await</code> keyword in them; you need to use <code>await</code> to get the response to the <a class="external-link" href="https://xrpl-py.readthedocs.io/en/stable/source/xrpl.asyncio.clients.html#xrpl.asyncio.clients.AsyncWebsocketClient.request" target="_blank"><code>AsyncWebsocketClient.request()</code> method <i aria-hidden="true" class="fa fa-external-link"></i></a>. Normally, you would also need to use <code>await</code> or something similar to get the response from any function you define with <code>async def</code>; but, in this app, the <code>run_bg_job()</code> helper takes care of that in a different way.</p>
<p>Update the code for the main thread and GUI frame to look like this:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-6" id="codeblock-6button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-6"><span class="k">class</span> <span class="nc">TWaXLFrame</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Tutorial Wallet for the XRP Ledger (TWaXL)</span>
<span class="sd">    user interface, main frame.</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"TWaXL"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">400</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">build_ui</span><span class="p">()</span>

        <span class="c1"># Start background thread for updates from the ledger ------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span> <span class="o">=</span> <span class="n">XRPLMonitorThread</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_bg_job</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">watch_xrpl</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">build_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Called during __init__ to set up all the GUI components.</span>
<span class="sd">        """</span>
        <span class="n">main_panel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ledger_info</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="n">main_panel</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Not connected"</span><span class="p">)</span>

        <span class="n">main_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">main_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ledger_info</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">main_panel</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">main_sizer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_bg_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Schedules a job to run asynchronously in the XRPL worker thread.</span>
<span class="sd">        The job should be a Future (for example, from calling an async function)</span>
<span class="sd">        """</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run_coroutine_threadsafe</span><span class="p">(</span><span class="n">job</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_ledger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Process a ledger subscription message to update the UI with</span>
<span class="sd">        information about the latest validated ledger.</span>
<span class="sd">        """</span>
        <span class="n">close_time_iso</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">ripple_time_to_datetime</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">"ledger_time"</span><span class="p">])</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ledger_info</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Latest validated ledger:</span><span class="se">\n</span><span class="s2">"</span>
                         <span class="sa">f</span><span class="s2">"Ledger Index: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="s1">'ledger_index'</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">"</span>
                         <span class="sa">f</span><span class="s2">"Ledger Hash: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="s1">'ledger_hash'</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">"</span>
                         <span class="sa">f</span><span class="s2">"Close time: </span><span class="si">{</span><span class="n">close_time_iso</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>
<p>The part that builds the GUI has been moved to a separate method, <code>build_ui(self)</code>. This helps to divide the code into chunks that are easier to understand, because the <code>__init__()</code> constructor has other work to do now, too: it starts the worker thread, and gives it its first job. The GUI setup also now uses a <a class="external-link" href="https://docs.wxpython.org/sizers_overview.html" target="_blank">sizer <i aria-hidden="true" class="fa fa-external-link"></i></a> to control placement of the text within the frame.</p>
<p class="devportal-callout tip"><strong>Tip:</strong> In this tutorial, all the GUI code is written by hand, but you may find it easier to create powerful GUIs using a "builder" tool such as <a class="external-link" href="http://wxglade.sourceforge.net/" target="_blank">wxGlade <i aria-hidden="true" class="fa fa-external-link"></i></a>. Separating the GUI code from the constructor may make it easier to switch to this type of approach later. <!-- SPELLING_IGNORE: wxGlade --></p>
<p>There's a new helper method, <code>run_bg_job()</code>, which runs an asynchronous function (defined with <code>async def</code>) in the worker thread. Use this method any time you want the worker thread to interact with the XRP Ledger network.</p>
<p>Instead of a <code>get_validated_ledger()</code> method, the GUI class now has an <code>update_ledger()</code> method, which takes an object in the format of a <a href="subscribe.html#ledger-stream">ledger stream message</a> and displays some of that information to the user. The worker thread calls this method using <code>wx.CallAfter()</code> whenever it gets a <code>ledgerClosed</code> event from the ledger.</p>
<p>Finally, change the code to start the app (at the end of the file) slightly:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-7" id="codeblock-7button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-7"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">WS_URL</span> <span class="o">=</span> <span class="s2">"wss://s.altnet.rippletest.net:51233"</span> <span class="c1"># Testnet</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">App</span><span class="p">()</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">TWaXLFrame</span><span class="p">(</span><span class="n">WS_URL</span><span class="p">)</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">()</span>
</code></pre></div>
<p>Since the app uses a WebSocket client instead of the JSON-RPC client now, the code has to use a WebSocket URL to connect.</p>
<p class="devportal-callout tip"><strong>Tip:</strong> If you <a href="networks-and-servers.html#reasons-to-run-your-own-server">run your own <code>rippled</code> server</a> you can connect to it using <code>ws://localhost:6006</code> as the URL. You can also use the WebSocket URLs of <a href="public-servers.html">public servers</a> to connect to the Mainnet or other test networks.</p>
<h4 id="troubleshooting-ssl-certificate-errors">Troubleshooting SSL Certificate Errors<a aria-hidden="true" class="hover_anchor" href="#troubleshooting-ssl-certificate-errors"><i class="fa fa-link"></i></a></h4>
<p>If you get an error like this, you may need to make sure your operating system's certificate authority store is updated:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-8" id="codeblock-8button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-8">[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate
</code></pre></div>
<p>On macOS, run the <a class="external-link" href="https://stackoverflow.com/questions/52805115/certificate-verify-failed-unable-to-get-local-issuer-certificate" target="_blank"><code>Install Certificates.command</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> for your Python version.</p>
<p>On Windows, open Edge or Chrome and browse to <a class="external-link" href="https://s1.ripple.com" target="_blank">https://s1.ripple.com <i aria-hidden="true" class="fa fa-external-link"></i></a>, then close the page. This should be enough to update your system's certificates. (It doesn't work if you use Firefox or Safari, because those browser's don't use Windows' certificate validation APIs.) <!-- SPELLING_IGNORE: s1 --></p>
<h3 id="3-display-an-account">3. Display an Account<a aria-hidden="true" class="hover_anchor" href="#3-display-an-account"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong> <a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/py/3_account.py" target="_blank"><code>3_account.py</code> <i aria-hidden="true" class="fa fa-external-link"></i></a></p>
<p>Now that you have a working, ongoing connection to the XRP Ledger, it's time to start adding some "wallet" functionality that lets you manage an individual account. For this step, you should prompt the user to input their address or master seed, then use that to display information about their account including how much XRP is set aside for the <a href="reserves.html">reserve requirement</a>.</p>
<p>The prompt is in a pop-up dialog like this:</p>
<p><img alt="Screenshot: step 3, account input prompt" src="img/python-wallet-3-enter.png"/></p>
<p>After the user inputs the prompt, the updated GUI looks like this:</p>
<p><img alt="Screenshot, step 3, showing account details" src="img/python-wallet-3-main.png"/></p>
<p>When you do math on XRP amounts, you should use the <code>Decimal</code> class so that you don't get rounding errors. Add this to the top of the file, with the other imports:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-9" id="codeblock-9button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-9"><span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
</code></pre></div>
<p>In the <code>XRPLMonitorThread</code> class, rename and update the <code>watch_xrpl()</code> method as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-10" id="codeblock-10button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-10">    <span class="k">async</span> <span class="k">def</span> <span class="nf">watch_xrpl_account</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">wallet</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        This is the task that opens the connection to the XRPL, then handles</span>
<span class="sd">        incoming subscription messages by dispatching them to the appropriate</span>
<span class="sd">        part of the GUI.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">account</span> <span class="o">=</span> <span class="n">address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wallet</span> <span class="o">=</span> <span class="n">wallet</span>

        <span class="k">async</span> <span class="k">with</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">AsyncWebsocketClient</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_connected</span><span class="p">()</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
                <span class="n">mtype</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"type"</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">mtype</span> <span class="o">==</span> <span class="s2">"ledgerClosed"</span><span class="p">:</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">update_ledger</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">mtype</span> <span class="o">==</span> <span class="s2">"transaction"</span><span class="p">:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">requests</span><span class="o">.</span><span class="n">AccountInfo</span><span class="p">(</span>
                        <span class="n">account</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="p">,</span>
                        <span class="n">ledger_index</span><span class="o">=</span><span class="n">message</span><span class="p">[</span><span class="s2">"ledger_index"</span><span class="p">]</span>
                    <span class="p">))</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">update_account</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s2">"account_data"</span><span class="p">])</span>
</code></pre></div>
<p>The newly renamed <code>watch_xrpl_account()</code> method now takes an address and optional wallet and saves them for later. (The GUI thread provides these based on user input.) This method also adds a new case for <a href="subscribe.html#transaction-streams">transaction stream messages</a>. When it sees a new transaction, the worker does not yet do anything with the transaction itself, but it uses that as a trigger to get the account's latest XRP balance and other info using the <a href="account_info.html">account_info method</a>. When <em>that</em> response arrives, the worker passes the account data to the GUI for display.</p>
<p>Still in the <code>XRPLMonitorThread</code> class, update the <code>on_connected()</code> method as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-11" id="codeblock-11button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-11">    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set up initial subscriptions and populate the GUI with data from the</span>
<span class="sd">        ledger on startup. Requires that self.client be connected first.</span>
<span class="sd">        """</span>
        <span class="c1"># Set up 2 subscriptions: all new ledgers, and any new transactions that</span>
        <span class="c1"># affect the chosen account.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">requests</span><span class="o">.</span><span class="n">Subscribe</span><span class="p">(</span>
            <span class="n">streams</span><span class="o">=</span><span class="p">[</span><span class="s2">"ledger"</span><span class="p">],</span>
            <span class="n">accounts</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="p">]</span>
        <span class="p">))</span>
        <span class="c1"># The immediate response contains details for the last validated ledger.</span>
        <span class="c1"># We can use this to fill in that area of the GUI without waiting for a</span>
        <span class="c1"># new ledger to close.</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">update_ledger</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>

        <span class="c1"># Get starting values for account info.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">requests</span><span class="o">.</span><span class="n">AccountInfo</span><span class="p">(</span>
            <span class="n">account</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="p">,</span>
            <span class="n">ledger_index</span><span class="o">=</span><span class="s2">"validated"</span>
        <span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">is_successful</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Got error from server:"</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
            <span class="c1"># This most often happens if the account in question doesn't exist</span>
            <span class="c1"># on the network we're connected to. Better handling would be to use</span>
            <span class="c1"># wx.CallAfter to display an error dialog in the GUI and possibly</span>
            <span class="c1"># let the user try inputting a different account.</span>
            <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">update_account</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s2">"account_data"</span><span class="p">])</span>
</code></pre></div>
<p>The <code>on_connected()</code> method now subscribes to transactions for the provided account (and the ledger stream too). Furthermore, it now calls <a href="account_info.html">account_info</a> on startup, and passes the response to the GUI for display.</p>
<p>The new GUI has a lot more fields that need to be laid out in two dimensions. The following subclass of <a class="external-link" href="https://docs.wxpython.org/wx.GridBagSizer.html" target="_blank"><code>wx.GridBagSizer</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> provides a quick way to do so, setting the appropriate padding and sizing values for a two-dimensional list of widgets. Add this code to the same file:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-12" id="codeblock-12button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-12"><span class="k">class</span> <span class="nc">AutoGridBagSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">GridBagSizer</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Helper class for adding a bunch of items uniformly to a GridBagSizer.</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">GridBagSizer</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vgap</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">hgap</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>

    <span class="k">def</span> <span class="nf">BulkAdd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctrls</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Given a two-dimensional iterable `ctrls`, add all the items in a grid</span>
<span class="sd">        top-to-bottom, left-to-right, with each inner iterable being a row. Set</span>
<span class="sd">        the total number of columns based on the longest iterable.</span>
<span class="sd">        """</span>
        <span class="n">flags</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">RESERVE_SPACE_EVEN_IF_HIDDEN</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ALIGN_CENTER_VERTICAL</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ctrls</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">ctrl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">ctrl</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">flag</span><span class="o">=</span><span class="n">flags</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
<p>Update the <code>TWaXLFrame</code>'s constructor as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-13" id="codeblock-13button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-13">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">test_network</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"TWaXL"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">400</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">test_network</span> <span class="o">=</span> <span class="n">test_network</span>
        <span class="c1"># The ledger's current reserve settings. To be filled in later.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reserve_base</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reserve_inc</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">build_ui</span><span class="p">()</span>

        <span class="c1"># Pop up to ask user for their account ---------------------------------</span>
        <span class="n">address</span><span class="p">,</span> <span class="n">wallet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prompt_for_account</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">classic_address</span> <span class="o">=</span> <span class="n">address</span>

        <span class="c1"># Start background thread for updates from the ledger ------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span> <span class="o">=</span> <span class="n">XRPLMonitorThread</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_bg_job</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">watch_xrpl_account</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">wallet</span><span class="p">))</span>
</code></pre></div>
<p>Now the constructor takes a boolean to indicate whether it's connecting to a test network. (If you provide a Mainnet URL, you should also pass <code>False</code>.) It uses this to encode and decode X-addresses and warn if they're intended for a different network. It also calls a new method, <code>prompt_for_account()</code> to get an address and wallet, and passes those to the renamed <code>watch_xrpl_account()</code> background job.</p>
<p>Update the <code>build_ui()</code> method definition as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-14" id="codeblock-14button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-14">    <span class="k">def</span> <span class="nf">build_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Called during __init__ to set up all the GUI components.</span>
<span class="sd">        """</span>
        <span class="n">main_panel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBox</span><span class="p">(</span><span class="n">main_panel</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Account Info"</span><span class="p">)</span>

        <span class="n">lbl_address</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Classic Address:"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">st_classic_address</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"TBD"</span><span class="p">)</span>
        <span class="n">lbl_xaddress</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"X-Address:"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">st_x_address</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"TBD"</span><span class="p">)</span>
        <span class="n">lbl_xrp_bal</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"XRP Balance:"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">st_xrp_balance</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"TBD"</span><span class="p">)</span>
        <span class="n">lbl_reserve</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"XRP Reserved:"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">st_reserve</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"TBD"</span><span class="p">)</span>

        <span class="n">aia_sizer</span> <span class="o">=</span> <span class="n">AutoGridBagSizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">)</span>
        <span class="n">aia_sizer</span><span class="o">.</span><span class="n">BulkAdd</span><span class="p">(</span> <span class="p">((</span><span class="n">lbl_address</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">st_classic_address</span><span class="p">),</span>
                           <span class="p">(</span><span class="n">lbl_xaddress</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">st_x_address</span><span class="p">),</span>
                           <span class="p">(</span><span class="n">lbl_xrp_bal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">st_xrp_balance</span><span class="p">),</span>
                           <span class="p">(</span><span class="n">lbl_reserve</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">st_reserve</span><span class="p">))</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ledger_info</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="n">main_panel</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Not connected"</span><span class="p">)</span>

        <span class="n">main_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">main_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">main_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ledger_info</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">main_panel</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">main_sizer</span><span class="p">)</span>
</code></pre></div>
<p>This adds a <a class="external-link" href="https://docs.wxpython.org/wx.StaticBox.html" target="_blank"><code>wx.StaticBox</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> with several new widgets, then uses the <code>AutoGridBagSizer</code> (defined above) to lay them out in 2×4 grid within the box. These new widgets are all static text to display <a href="accountroot.html">details of the account</a>, though some of them start with placeholder text. (Since they require data from the ledger, you have to wait for the worker thread to send that data back.)</p>
<p class="devportal-callout caution"><strong>Caution:</strong> You may notice that even though the constructor for this class sees the <code>wallet</code> variable, it does not save it as a property of the object. This is because the wallet mostly needs to be managed by the worker thread, not the GUI thread, and updating it in both places might not be thread-safe.</p>
<p>Add a new <code>prompt_for_account()</code> method to the <code>TWaXLFrame</code> class:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-15" id="codeblock-15button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-15">    <span class="k">def</span> <span class="nf">prompt_for_account</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Prompt the user for an account to use, in a base58-encoded format:</span>
<span class="sd">        - master key seed: Grants read-write access.</span>
<span class="sd">          (assumes the master key pair is not disabled)</span>
<span class="sd">        - classic address. Grants read-only access.</span>
<span class="sd">        - X-address. Grants read-only access.</span>

<span class="sd">        Exits with error code 1 if the user cancels the dialog, if the input</span>
<span class="sd">        doesn't match any of the formats, or if the user inputs an X-address</span>
<span class="sd">        intended for use on a different network type (test/non-test).</span>

<span class="sd">        Populates the classic address and X-address labels in the UI.</span>

<span class="sd">        Returns (classic_address, wallet) where wallet is None in read-only mode</span>
<span class="sd">        """</span>
        <span class="n">account_dialog</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextEntryDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                <span class="s2">"Please enter an account address (for read-only)"</span>
                <span class="s2">" or your secret (for read-write access)"</span><span class="p">,</span>
                <span class="n">caption</span><span class="o">=</span><span class="s2">"Enter account"</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="s2">"rPT1Sjq2YGrBMTttX4GZHjKu9dyfzbpAYe"</span><span class="p">)</span>
        <span class="n">account_dialog</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_TEXT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toggle_dialog_style</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">account_dialog</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">!=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="c1"># If the user presses Cancel on the account entry, exit the app.</span>
            <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">account_dialog</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">account_dialog</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

        <span class="n">classic_address</span> <span class="o">=</span> <span class="s2">""</span>
        <span class="n">wallet</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">x_address</span> <span class="o">=</span> <span class="s2">""</span>

        <span class="k">if</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">is_valid_xaddress</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">x_address</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">classic_address</span><span class="p">,</span> <span class="n">dest_tag</span><span class="p">,</span> <span class="n">test_network</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">xaddress_to_classic_address</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">test_network</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_network</span><span class="p">:</span>
                <span class="n">on_net</span> <span class="o">=</span> <span class="s2">"a test network"</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_network</span> <span class="k">else</span> <span class="s2">"Mainnet"</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"X-address </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2"> is meant for a different network type"</span>
                      <span class="sa">f</span><span class="s2">"than this client is connected to."</span>
                      <span class="sa">f</span><span class="s2">"(Client is on: </span><span class="si">{</span><span class="n">on_net</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
                <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">is_valid_classic_address</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">classic_address</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">x_address</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">classic_address_to_xaddress</span><span class="p">(</span>
                    <span class="n">value</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_test_network</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">test_network</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Check if it's a valid seed</span>
                <span class="n">seed_bytes</span><span class="p">,</span> <span class="n">alg</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">decode_seed</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">wallet</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">wallet</span><span class="o">.</span><span class="n">Wallet</span><span class="o">.</span><span class="n">from_seed</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
                <span class="n">x_address</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="n">get_xaddress</span><span class="p">(</span><span class="n">is_test</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">test_network</span><span class="p">)</span>
                <span class="n">classic_address</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="n">address</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Update the UI with the address values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">st_classic_address</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="n">classic_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">st_x_address</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="n">x_address</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">classic_address</span><span class="p">,</span> <span class="n">wallet</span>
</code></pre></div>
<p>The constructor calls this method to prompt the user for their <a href="addresses.html">address</a> or <a href="cryptographic-keys.html#seed">master seed</a>, then processes the user input to decode whatever value the user put in, and use it accordingly. With wxPython, you usually follow this pattern with dialog boxes:</p>
<ol>
<li>Create a new instance of a dialog class, such as a <a class="external-link" href="https://docs.wxpython.org/wx.TextEntryDialog.html" target="_blank"><code>wx.TextEntryDialog</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>.</li>
<li>Use <code>showModal()</code> to display it to the user and get a return code based on which button the user clicked.</li>
<li>If the user clicked OK, get a value the user input. This example gets the text the user entered in the box.</li>
<li>Destroy the dialog instance. If you forget to do this, the application can leak memory whenever the user opens a new dialog.</li>
</ol>
<p>From there, the <code>prompt_for_account()</code> code branches based on whether the input is a classic address, X-address, seed, or not a valid value at all. Assuming the value decodes successfully, it updates the <code>wx.StaticText</code> widgets with both the classic and X-address equivalents of the address and returns them. (As noted above, the constructor passes these values to the worker thread.)</p>
<p class="devportal-callout tip"><strong>Tip:</strong> This code exits if the user inputs an invalid value, but you could rewrite it to prompt again or display a different message to the user.</p>
<p>This code also binds an <em>event handler</em>, which is a method that is called whenever a certain type of thing happens to a particular part of the GUI, usually based on the user's actions. In this case, the trigger is <code>wx.EVT_TEXT</code> on the dialog, which triggers immediately when the user types or pastes anything into the dialog's text box.</p>
<p>Add the following method to <code>TWaXLFrame</code> class to define the handler:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-16" id="codeblock-16button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-16">    <span class="k">def</span> <span class="nf">toggle_dialog_style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Automatically switches to a password-style dialog if it looks like the</span>
<span class="sd">        user is entering a secret key, and display ***** instead of s12345...</span>
<span class="sd">        """</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventObject</span><span class="p">()</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"s"</span><span class="p">:</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">SetWindowStyle</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_PASSWORD</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">SetWindowStyle</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_LEFT</span><span class="p">)</span>
</code></pre></div>
<p>Event handlers generally take one positional argument, a <a class="external-link" href="https://docs.wxpython.org/wx.Event.html" target="_blank"><code>wx.Event</code> object <i aria-hidden="true" class="fa fa-external-link"></i></a> which describes the exact event that occurred. In this case, the handler uses this object to find out what value the user input. If the input looks like a master seed (it starts with the letter "s"), the handler switches the dialog to a "password" style that masks the user input, so people viewing the user's screen won't see the secret. And, if the user erases it and switches back to inputting an address, the handler toggles the style back.</p>
<p>Add the following lines <strong>at the end of</strong> the <code>update_ledger()</code> method:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-17" id="codeblock-17button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-17">        <span class="c1"># Save reserve settings so we can calculate account reserve</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reserve_base</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">drops_to_xrp</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">"reserve_base"</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reserve_inc</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">drops_to_xrp</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">"reserve_inc"</span><span class="p">]))</span>
</code></pre></div>
<p>This saves the ledger's current reserves settings, so that you can use them to calculate the account's total amount of XRP reserved. Add the following method to the <code>TWaXLFrame</code> class, to do exactly that:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-18" id="codeblock-18button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-18">    <span class="k">def</span> <span class="nf">calculate_reserve_xrp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner_count</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Calculates how much XRP the user needs to reserve based on the account's</span>
<span class="sd">        OwnerCount and the reserve values in the latest ledger.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reserve_base</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">reserve_inc</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">oc_decimal</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">owner_count</span><span class="p">)</span>
        <span class="n">reserve_xrp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reserve_base</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reserve_inc</span> <span class="o">*</span> <span class="n">oc_decimal</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">reserve_xrp</span>
</code></pre></div>
<p>Add an <code>update_account()</code> method to the <code>TWaXLFrame</code> class:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-19" id="codeblock-19button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-19">    <span class="k">def</span> <span class="nf">update_account</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">acct</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Update the account info UI based on an account_info response.</span>
<span class="sd">        """</span>
        <span class="n">xrp_balance</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">drops_to_xrp</span><span class="p">(</span><span class="n">acct</span><span class="p">[</span><span class="s2">"Balance"</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">st_xrp_balance</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="n">xrp_balance</span><span class="p">)</span>

        <span class="c1"># Display account reserve.</span>
        <span class="n">reserve_xrp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_reserve_xrp</span><span class="p">(</span><span class="n">acct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"OwnerCount"</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">reserve_xrp</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">st_reserve</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">reserve_xrp</span><span class="p">))</span>
</code></pre></div>
<p>The worker thread calls this method to pass account details to the GUI for display.</p>
<p>Lastly, towards the end of the file, in the <code>if __name__ == "__main__":</code> block, update the line that instantiates the <code>TWaXLFrame</code> class to pass the new <code>test_net</code> parameter:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-20" id="codeblock-20button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-20">    <span class="n">frame</span> <span class="o">=</span> <span class="n">TWaXLFrame</span><span class="p">(</span><span class="n">WS_URL</span><span class="p">,</span> <span class="n">test_network</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<p>(If you change the code to connect to a Mainnet server URL, also change this value to <code>False</code>.)</p>
<p>To test your wallet app with your own test account, first go to the <a href="xrp-testnet-faucet.html">Testnet Faucet</a> and <strong>Get Testnet credentials</strong>. Save the address and secret key somewhere, and try your wallet app with either one. Then, to see balance changes, go to the <a href="tx-sender.html">Transaction Sender</a> and paste your address into the <strong>Destination Address</strong> field. Click <strong>Initialize</strong> and try out some of the transaction types there, and see if the balance displayed by your wallet app updates as you expect.</p>
<h3 id="4-show-accounts-transactions">4. Show Account's Transactions<a aria-hidden="true" class="hover_anchor" href="#4-show-accounts-transactions"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong> <a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/py/4_tx_history.py" target="_blank"><code>4_tx_history.py</code> <i aria-hidden="true" class="fa fa-external-link"></i></a></p>
<p>At this point, your wallet shows the account's balance getting updated, but doesn't show you anything about the actual transactions that caused the updates. So, the next step is to display the account's transaction history (and keep it updated).</p>
<p>The new transaction history displays in a new tab, like this:</p>
<p><img alt="Screenshot: transaction history tab" src="img/python-wallet-4-main.png"/></p>
<p>Additionally, the app can produce desktop notifications (sometimes called "toasts"), which might look like this depending on your operating system:</p>
<p><img alt="Screenshot: notification message" src="img/python-wallet-4-notif.png"/></p>
<p>First, add the following imports to get GUI classes for the table view and notifications:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-21" id="codeblock-21button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-21"><span class="kn">import</span> <span class="nn">wx.dataview</span>
<span class="kn">import</span> <span class="nn">wx.adv</span>
</code></pre></div>
<p>Next, update the <code>watch_xrpl_account()</code> method of the worker class to pass transaction details to the GUI when you receive a transaction subscription message. This requires only one line:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-22" id="codeblock-22button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-22"><span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">add_tx_from_sub</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre></div>
<p>The complete method should look like this:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-23" id="codeblock-23button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-23">    <span class="k">async</span> <span class="k">def</span> <span class="nf">watch_xrpl_account</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">wallet</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        This is the task that opens the connection to the XRPL, then handles</span>
<span class="sd">        incoming subscription messages by dispatching them to the appropriate</span>
<span class="sd">        part of the GUI.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">account</span> <span class="o">=</span> <span class="n">address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wallet</span> <span class="o">=</span> <span class="n">wallet</span>

        <span class="k">async</span> <span class="k">with</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">AsyncWebsocketClient</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_connected</span><span class="p">()</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
                <span class="n">mtype</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"type"</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">mtype</span> <span class="o">==</span> <span class="s2">"ledgerClosed"</span><span class="p">:</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">update_ledger</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">mtype</span> <span class="o">==</span> <span class="s2">"transaction"</span><span class="p">:</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">add_tx_from_sub</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">requests</span><span class="o">.</span><span class="n">AccountInfo</span><span class="p">(</span>
                        <span class="n">account</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="p">,</span>
                        <span class="n">ledger_index</span><span class="o">=</span><span class="n">message</span><span class="p">[</span><span class="s2">"ledger_index"</span><span class="p">]</span>
                    <span class="p">))</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">update_account</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s2">"account_data"</span><span class="p">])</span>
</code></pre></div>
<p>Have the worker use the <a href="account_tx.html">account_tx method</a> to look up the account's transaction history and pass it to the GUI. This method gets a list of transactions that affected an account, including transactions from, to, or passing through the account in question, starting with the most recent by default. Add new code <strong>to the end of</strong> the <code>XRPLMonitorThread</code>'s <code>on_connected()</code> method, as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-24" id="codeblock-24button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-24">        <span class="c1"># Get the first page of the account's transaction history. Depending on</span>
        <span class="c1"># the server we're connected to, the account's full history may not be</span>
        <span class="c1"># available.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">requests</span><span class="o">.</span><span class="n">AccountTx</span><span class="p">(</span>
            <span class="n">account</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">account</span>
        <span class="p">))</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">update_account_tx</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>
<p class="devportal-callout note"><strong>Note:</strong> You may have to <a href="markers-and-pagination.html">paginate</a> across multiple <a href="account_tx.html">account_tx</a> requests and responses if you want the <em>complete</em> list of transactions that affected an account since its creation. This example does not show pagination, so the app only displays the most recent transactions to affect the account.</p>
<p>Now, edit the <code>build_ui()</code> method of the <code>TWaXLFrame</code> class. <strong>Update the beginning of the method</strong> to add a new <a class="external-link" href="https://docs.wxpython.org/wx.Notebook.html" target="_blank"><code>wx.Notebook</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>, which makes a "tabs" interface, and make the <code>main_panel</code> into the first tab, as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-25" id="codeblock-25button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-25">    <span class="k">def</span> <span class="nf">build_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Called during __init__ to set up all the GUI components.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Notebook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">BK_DEFAULT</span><span class="p">)</span>
        <span class="c1"># Tab 1: "Summary" pane ------------------------------------------------</span>
        <span class="n">main_panel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="n">main_panel</span><span class="p">,</span> <span class="s2">"Summary"</span><span class="p">)</span>
</code></pre></div>
<p>Additionally, add a new tab for the transaction history to the <strong>end of the</strong> <code>build_ui()</code> method, as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-26" id="codeblock-26button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-26">        <span class="c1"># Tab 2: "Transaction History" pane ------------------------------------</span>
        <span class="n">objs_panel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="n">objs_panel</span><span class="p">,</span> <span class="s2">"Transaction History"</span><span class="p">)</span>
        <span class="n">objs_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">dataview</span><span class="o">.</span><span class="n">DataViewListCtrl</span><span class="p">(</span><span class="n">objs_panel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">AppendTextColumn</span><span class="p">(</span><span class="s2">"Confirmed"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">AppendTextColumn</span><span class="p">(</span><span class="s2">"Type"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">AppendTextColumn</span><span class="p">(</span><span class="s2">"From"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">AppendTextColumn</span><span class="p">(</span><span class="s2">"To"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">AppendTextColumn</span><span class="p">(</span><span class="s2">"Value Delivered"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">AppendTextColumn</span><span class="p">(</span><span class="s2">"Identifying Hash"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">AppendTextColumn</span><span class="p">(</span><span class="s2">"Raw JSON"</span><span class="p">)</span>
        <span class="n">objs_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">)</span>

        <span class="n">objs_panel</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">objs_sizer</span><span class="p">)</span>
</code></pre></div>
<p>This adds a second tab containing a <a class="external-link" href="https://docs.wxpython.org/wx.dataview.DataViewListCtrl.html" target="_blank"><code>wx.dataview.DataViewListCtrl</code> <i aria-hidden="true" class="fa fa-external-link"></i></a>, which is capable of displaying a bunch of info as a table. It sets up the table columns to show some relevant details of the account's transactions.</p>
<p>Add the following helper method to the <code>TWaXLFrame</code> class:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-27" id="codeblock-27button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-27">    <span class="k">def</span> <span class="nf">displayable_amount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Convert an arbitrary amount value from the XRPL to a string to be</span>
<span class="sd">        displayed to the user:</span>
<span class="sd">        - Convert drops of XRP to 6-decimal XRP (e.g. '12.345000 XRP')</span>
<span class="sd">        - For issued tokens, show amount, currency code, and issuer. For</span>
<span class="sd">          example, 100 USD issued by address r12345... is returned as</span>
<span class="sd">          '100 USD.r12345...'</span>

<span class="sd">        Leaves non-standard (hex) currency codes as-is.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="s2">"unavailable"</span><span class="p">:</span>
            <span class="c1"># Special case for pre-2014 partial payments.</span>
            <span class="k">return</span> <span class="n">a</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="c1"># It's an XRP amount in drops. Convert to decimal.</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">xrpl</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">drops_to_xrp</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="si">}</span><span class="s2"> XRP"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># It's a token amount.</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">a</span><span class="p">[</span><span class="s1">'value'</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">a</span><span class="p">[</span><span class="s1">'currency'</span><span class="p">]</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">a</span><span class="p">[</span><span class="s1">'issuer'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
</code></pre></div>
<p>This method takes a <a href="basic-data-types.html#specifying-currency-amounts">currency amount</a> and converts it into a string for display to a human. Since it's used with the <a href="transaction-metadata.html#delivered_amount"><code>delivered_amount</code> field</a> in particular, it also handles the special case for pre-2014 partial payments where the delivered amount is unavailable.</p>
<p>After that, add another helper method to the <code>TWaXLFrame</code> class:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-28" id="codeblock-28button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-28">    <span class="k">def</span> <span class="nf">add_tx_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">prepend</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add one row to the account transaction history control. Helper function</span>
<span class="sd">        called by other methods.</span>
<span class="sd">        """</span>
        <span class="n">conf_dt</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">ripple_time_to_datetime</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s2">"tx"</span><span class="p">][</span><span class="s2">"date"</span><span class="p">])</span>
        <span class="c1"># Convert datetime to locale-default representation &amp; time zone</span>
        <span class="n">confirmation_time</span> <span class="o">=</span> <span class="n">conf_dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%c</span><span class="s2">"</span><span class="p">)</span>

        <span class="n">tx_hash</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="s2">"tx"</span><span class="p">][</span><span class="s2">"hash"</span><span class="p">]</span>
        <span class="n">tx_type</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="s2">"tx"</span><span class="p">][</span><span class="s2">"TransactionType"</span><span class="p">]</span>
        <span class="n">from_acct</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="s2">"tx"</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"Account"</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">""</span>
        <span class="k">if</span> <span class="n">from_acct</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">classic_address</span><span class="p">:</span>
            <span class="n">from_acct</span> <span class="o">=</span> <span class="s2">"(Me)"</span>
        <span class="n">to_acct</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="s2">"tx"</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"Destination"</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">""</span>
        <span class="k">if</span> <span class="n">to_acct</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">classic_address</span><span class="p">:</span>
            <span class="n">to_acct</span> <span class="o">=</span> <span class="s2">"(Me)"</span>

        <span class="n">delivered_amt</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="s2">"meta"</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"delivered_amount"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">delivered_amt</span><span class="p">:</span>
            <span class="n">delivered_amt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">displayable_amount</span><span class="p">(</span><span class="n">delivered_amt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">delivered_amt</span> <span class="o">=</span> <span class="s2">""</span>

        <span class="n">cols</span> <span class="o">=</span> <span class="p">(</span><span class="n">confirmation_time</span><span class="p">,</span> <span class="n">tx_type</span><span class="p">,</span> <span class="n">from_acct</span><span class="p">,</span> <span class="n">to_acct</span><span class="p">,</span> <span class="n">delivered_amt</span><span class="p">,</span>
                <span class="n">tx_hash</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">prepend</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">PrependItem</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">AppendItem</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
</code></pre></div>
<p>This method takes a transaction object, parses some of its fields into formats more suitable for displaying to users, and then adds it to the <code>DataViewListCtrl</code> in the transaction history tab.</p>
<p>Add a method to the <code>TWaXLFrame</code> class to update the transaction history based on the <a href="account_tx.html">account_tx response</a> from the worker thread, as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-29" id="codeblock-29button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-29">    <span class="k">def</span> <span class="nf">update_account_tx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Update the transaction history tab with information from an account_tx</span>
<span class="sd">        response.</span>
<span class="sd">        """</span>
        <span class="n">txs</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"transactions"</span><span class="p">]</span>
        <span class="c1"># Note: if you extend the code to do paginated responses, you might want</span>
        <span class="c1"># to keep previous history instead of deleting the contents first.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">DeleteAllItems</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">txs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tx_row</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</code></pre></div>
<p>Lastly, add a similar method to the <code>TWaXLFrame</code> to add a single transaction to the transaction history table whenever the worker thread passes a transaction subscription message:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-30" id="codeblock-30button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-30">    <span class="k">def</span> <span class="nf">add_tx_from_sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add 1 transaction to the history based on a subscription stream message.</span>
<span class="sd">        Assumes only validated transaction streams (e.g. transactions, accounts)</span>
<span class="sd">        not proposed transaction streams.</span>

<span class="sd">        Also, send a notification to the user about it.</span>
<span class="sd">        """</span>
        <span class="c1"># Convert to same format as account_tx results</span>
        <span class="n">t</span><span class="p">[</span><span class="s2">"tx"</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="s2">"transaction"</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_tx_row</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">prepend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># Scroll to top of list.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">EnsureVisible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">RowToItem</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

        <span class="c1"># Send a notification message (aka a "toast") about the transaction.</span>
        <span class="c1"># Note the transaction stream and account_tx include all transactions</span>
        <span class="c1"># that "affect" the account, no just ones directly from/to the account.</span>
        <span class="c1"># For example, if the account has issued tokens, it gets notified when</span>
        <span class="c1"># other users transfer those tokens among themselves.</span>
        <span class="n">notif</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">adv</span><span class="o">.</span><span class="n">NotificationMessage</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"New Transaction"</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span>
                <span class="sa">f</span><span class="s2">"New </span><span class="si">{</span><span class="n">t</span><span class="p">[</span><span class="s1">'tx'</span><span class="p">][</span><span class="s1">'TransactionType'</span><span class="p">]</span><span class="si">}</span><span class="s2"> transaction confirmed!"</span><span class="p">)</span>
        <span class="n">notif</span><span class="o">.</span><span class="n">SetFlags</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ICON_INFORMATION</span><span class="p">)</span>
        <span class="n">notif</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</code></pre></div>
<p>As before, you can test your wallet app with your own test account if you use the <a href="xrp-testnet-faucet.html">Testnet Faucet</a> and the <a href="tx-sender.html">Transaction Sender</a>. On the Faucet page, select <strong>Get Testnet credentials</strong> (or use the same credentials from before). Input either the address or secret when you open your wallet app. On the Transaction Sender page, paste your address into the <strong>Destination Address</strong> field, click <strong>Initialize</strong>, then click various transaction buttons to see how your wallet displays the results.</p>
<h3 id="5-send-xrp">5. Send XRP<a aria-hidden="true" class="hover_anchor" href="#5-send-xrp"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong> <a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/py/5_send_xrp.py" target="_blank"><code>5_send_xrp.py</code> <i aria-hidden="true" class="fa fa-external-link"></i></a></p>
<p>Until now, you've made the app able to view data from the ledger, and it's capable of showing the transactions an account has received. Now it's finally time to make the app capable of <em>sending</em> transactions. For now, you can stick to sending <a href="direct-xrp-payments.html">direct XRP payments</a> because there are more complexities involved in sending <a href="issued-currencies.html">issued tokens</a>.</p>
<p>The main window gets a new "Send XRP" button:</p>
<p><img alt='Screenshot: main frame with "Send XRP" button enabled' src="img/python-wallet-5-main.png"/></p>
<p>Clicking this button opens a dialog where the user can enter the details of the payment:</p>
<p><img alt='Screenshot: "Send XRP" dialog' src="img/python-wallet-5-dialog.png"/></p>
<p>First, add the <a class="external-link" href="https://docs.python.org/3/howto/regex.html" target="_blank">regular expressions <i aria-hidden="true" class="fa fa-external-link"></i></a> library to the list of imports at the top of the file:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-31" id="codeblock-31button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-31"><span class="kn">import</span> <span class="nn">re</span>
</code></pre></div>
<p>In the <code>XRPLMonitorThread</code> class, add the following lines to the <code>on_connected()</code> method, anywhere <strong>after getting a successful <a href="account_info.html">account_info</a> response</strong>:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-32" id="codeblock-32button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-32">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wallet</span><span class="p">:</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">enable_readwrite</span><span class="p">)</span>
</code></pre></div>
<p>Add a new method to the <code>XRPLMonitorThread</code> class to send an XRP payment based on data the user provides, and alert the GUI when it has been sent:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-33" id="codeblock-33button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-33">    <span class="k">async</span> <span class="k">def</span> <span class="nf">send_xrp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paydata</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Prepare, sign, and send an XRP payment with the provided parameters.</span>
<span class="sd">        Expects a dictionary with:</span>
<span class="sd">        {</span>
<span class="sd">            "dtag": Destination Tag, as a string, optional</span>
<span class="sd">            "to": Destination address (classic or X-address)</span>
<span class="sd">            "amt": Amount of decimal XRP to send, as a string</span>
<span class="sd">        }</span>
<span class="sd">        """</span>
        <span class="n">dtag</span> <span class="o">=</span> <span class="n">paydata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"dtag"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dtag</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">""</span><span class="p">:</span>
            <span class="n">dtag</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">dtag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dtag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dtag</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">dtag</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">dtag</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">**</span><span class="mi">32</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Destination tag must be a 32-bit unsigned integer"</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">"Invalid destination tag:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">"Canceled sending payment."</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="n">tx</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">transactions</span><span class="o">.</span><span class="n">Payment</span><span class="p">(</span>
            <span class="n">account</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="p">,</span>
            <span class="n">destination</span><span class="o">=</span><span class="n">paydata</span><span class="p">[</span><span class="s2">"to"</span><span class="p">],</span>
            <span class="n">amount</span><span class="o">=</span><span class="n">xrpl</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">xrp_to_drops</span><span class="p">(</span><span class="n">paydata</span><span class="p">[</span><span class="s2">"amt"</span><span class="p">]),</span>
            <span class="n">destination_tag</span><span class="o">=</span><span class="n">dtag</span>
        <span class="p">)</span>
        <span class="c1"># Autofill provides a sequence number, but this may fail if you try to</span>
        <span class="c1"># send too many transactions too fast. You can send transactions more</span>
        <span class="c1"># rapidly if you track the sequence number more carefully.</span>
        <span class="n">tx_signed</span> <span class="o">=</span> <span class="k">await</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">transaction</span><span class="o">.</span><span class="n">autofill_and_sign</span><span class="p">(</span>
                <span class="n">tx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wallet</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">transaction</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">tx_signed</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">add_pending_tx</span><span class="p">,</span> <span class="n">tx_signed</span><span class="p">)</span>
</code></pre></div>
<p>In this flow, the app sends the transaction without waiting for it to be confirmed by the consensus process. You should be careful to mark any results from the initial submission as "pending" or "tentative" since the actual result of the transaction <a href="finality-of-results.html">isn't final until it's confirmed</a>. Since the app is also subscribed to the account's transactions, it automatically gets notified when the transaction is confirmed.</p>
<p>Now, create a custom dialog for the user to input the necessary details for the payment:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-34" id="codeblock-34button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-34"><span class="k">class</span> <span class="nc">SendXRPDialog</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Dialog</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Pop-up dialog that prompts the user for the information necessary to send a</span>
<span class="sd">    direct XRP-to-XRP payment on the XRPL.</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Dialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Send XRP"</span><span class="p">)</span>
        <span class="n">sizer</span> <span class="o">=</span> <span class="n">AutoGridBagSizer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>

        <span class="n">lbl_to</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"To (Address):"</span><span class="p">)</span>
        <span class="n">lbl_dtag</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Destination Tag:"</span><span class="p">)</span>
        <span class="n">lbl_amt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Amount of XRP:"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txt_to</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txt_amt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SpinCtrlDouble</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">"20.0"</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.000001</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txt_amt</span><span class="o">.</span><span class="n">SetDigits</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txt_amt</span><span class="o">.</span><span class="n">SetIncrement</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

        <span class="c1"># The "Send" button is functionally an "OK" button except for the text.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_send</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Send"</span><span class="p">)</span>
        <span class="n">btn_cancel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_CANCEL</span><span class="p">)</span>

        <span class="n">sizer</span><span class="o">.</span><span class="n">BulkAdd</span><span class="p">(((</span><span class="n">lbl_to</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_to</span><span class="p">),</span>
                       <span class="p">(</span><span class="n">lbl_dtag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="p">),</span>
                       <span class="p">(</span><span class="n">lbl_amt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_amt</span><span class="p">),</span>
                       <span class="p">(</span><span class="n">btn_cancel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">btn_send</span><span class="p">))</span> <span class="p">)</span>
        <span class="n">sizer</span><span class="o">.</span><span class="n">Fit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_TEXT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_dest_tag_edit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txt_to</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_TEXT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_to_edit</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_payment_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Construct a dictionary with the relevant payment details to pass to the</span>
<span class="sd">        worker thread for making a payment. Called after the user clicks "Send".</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"to"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_to</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span>
            <span class="s2">"dtag"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span>
            <span class="s2">"amt"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_amt</span><span class="o">.</span><span class="n">GetValue</span><span class="p">(),</span>
        <span class="p">}</span>
</code></pre></div>
<p>This subclass of <a class="external-link" href="https://docs.wxpython.org/wx.Dialog.html" target="_blank"><code>wx.Dialog</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> has several custom widgets, which are laid out using the <code>GridBagSizer</code> defined earlier. Notably, it has text boxes for the "To" address, the amount of XRP, and the <a href="source-and-destination-tags.html">destination tag</a> to use, if any. (A destination tag is kind of like a phone extension for an XRP Ledger address: for addresses owned by individuals, you don't need it, but if the destination address has many users then you need to specify it so that the destination knows which recipient you intended. It's common to need a destination tag to deposit at a cryptocurrency exchange.) The dialog also has <strong>OK</strong> and <strong>Cancel</strong> buttons, which automatically function to cancel or complete the dialog, although the "OK" button is labeled "Send" instead to make it clearer what the app does when the user clicks it.</p>
<p>The <code>SendXRPDialog</code> constructor also binds two event handlers for when the user inputs text in the "to" and "destination tag" fields, so you need the definitions for those handlers to the same class. First, add <code>on_to_edit()</code>:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-35" id="codeblock-35button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-35">    <span class="k">def</span> <span class="nf">on_to_edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When the user edits the "To" field, check that the address is valid.</span>
<span class="sd">        """</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_to</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">is_valid_classic_address</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="ow">or</span>
                <span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">is_valid_xaddress</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_send</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">v</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">classic_address</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_send</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_send</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
</code></pre></div>
<p>This checks the "To" address to ensure that it matches two conditions:</p>
<ol>
<li>It's a validly formatted classic address or X-address.</li>
<li>It's not the user's own address—you can't send XRP to yourself.</li>
</ol>
<p>If either condition is not met, the handler disables the "Send" button for this dialog. If both conditions are met, it enables the "Send" button.</p>
<p>Next, add the <code>on_dest_tag_edit()</code> handler, also as a method of the <code>SendXRPDialog</code> class:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-36" id="codeblock-36button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-36">    <span class="k">def</span> <span class="nf">on_dest_tag_edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When the user edits the Destination Tag field, strip non-numeric</span>
<span class="sd">        characters from it.</span>
<span class="sd">        """</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">"[^0-9]"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">ChangeValue</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># SetValue would generate another EVT_TEXT</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">SetInsertionPointEnd</span><span class="p">()</span>
</code></pre></div>
<p>In other GUI toolkits, you might be able to use a dedicated number entry control for the Destination Tag field, but with wxPython there is only a generic text entry field, so the <code>on_dest_tag_edit()</code> handler makes it behave more like a number-only control by instantly deleting any non-numeric characters the user tries to enter in the field.</p>
<p>From here, you need to edit the <code>TWaXLFrame</code> class. First, in the <code>build_ui()</code> method, you need to add a new "Send XRP" button, and bind it to a new event handler. Add the following lines <strong>before the code to add things to the sizer</strong>:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-37" id="codeblock-37button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-37">        <span class="c1"># Send XRP button. Disabled until we have a secret key &amp; network connection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sxb</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">main_panel</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Send XRP"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sxb</span><span class="o">.</span><span class="n">SetToolTip</span><span class="p">(</span><span class="s2">"Disabled in read-only mode."</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sxb</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">click_send_xrp</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sxb</span><span class="p">)</span>
</code></pre></div>
<p>Still in the <code>build_ui()</code> method, add the new button to the <code>main_sizer</code> so it fits nicely in between the account info area and the ledger info area. The sizer code <strong>at the end of the "Tab 1" section</strong> should look like the following, including one new line and the previous (unchanged) lines:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-38" id="codeblock-38button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-38">        <span class="n">main_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">main_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acct_info_area</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">main_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sxb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">main_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ledger_info</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">main_panel</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">main_sizer</span><span class="p">)</span>
</code></pre></div>
<p>Also in the <code>build_ui()</code> method, initialize a dictionary to hold rows with pending transaction details, so that you can replace them with the confirmed results when those are available. Add this line <strong>anywhere near the "Tab 2" section</strong> that sets up <code>self.tx_list</code> code:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-39" id="codeblock-39button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-39">        <span class="bp">self</span><span class="o">.</span><span class="n">pending_tx_rows</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># Map pending tx hashes to rows in the history UI</span>
</code></pre></div>
<p>The "Send XRP" button starts out disabled, so you need to add a new method to the <code>TWaXLFrame</code> class to enable it when the right conditions are met:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-40" id="codeblock-40button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-40">    <span class="k">def</span> <span class="nf">enable_readwrite</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Enable buttons for sending transactions.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sxb</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sxb</span><span class="o">.</span><span class="n">SetToolTip</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
</code></pre></div>
<p>The changes you made to <code>on_connected()</code> earlier in this step call this method after successfully receiving account data, but only if the worker class has a <code>Wallet</code> instance—meaning the user input the secret key to an account that really exists. If the user input an address, this method never gets called.</p>
<p>Add the handler for when the user clicks the "Send XRP" button as a method of the <code>TWaXLFrame</code> class:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-41" id="codeblock-41button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-41">    <span class="k">def</span> <span class="nf">click_send_xrp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Pop up a dialog for the user to input how much XRP to send where, and</span>
<span class="sd">        send the transaction (if the user doesn't cancel).</span>
<span class="sd">        """</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">SendXRPDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">CenterOnScreen</span><span class="p">()</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">resp</span> <span class="o">!=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Send XRP canceled"</span><span class="p">)</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="n">paydata</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">get_payment_data</span><span class="p">()</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_bg_job</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">send_xrp</span><span class="p">(</span><span class="n">paydata</span><span class="p">))</span>
        <span class="n">notif</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">adv</span><span class="o">.</span><span class="n">NotificationMessage</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Sending!"</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span>
                <span class="sa">f</span><span class="s2">"Sending a payment for </span><span class="si">{</span><span class="n">paydata</span><span class="p">[</span><span class="s1">'amt'</span><span class="p">]</span><span class="si">}</span><span class="s2"> XRP!"</span><span class="p">)</span>
        <span class="n">notif</span><span class="o">.</span><span class="n">SetFlags</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ICON_INFORMATION</span><span class="p">)</span>
        <span class="n">notif</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</code></pre></div>
<p>This dialog opens a new "Send XRP" dialog using the custom <code>SendXRPDialog</code> class defined earlier in this step. If the user clicks the "Send" button, it passes the details to the worker thread to send the payment, and displays a notification that indicates the transaction is sending. (Note, the transaction can still fail after this point, so the notification does not say what the transaction did.)</p>
<p>Also add a new method to the <code>TWaXLFrame</code> class to display the pending transaction in the Transaction History pane when the worker thread sends it, as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-42" id="codeblock-42button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-42">    <span class="k">def</span> <span class="nf">add_pending_tx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txm</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add a "pending" transaction to the history based on a transaction model</span>
<span class="sd">        that was (presumably) just submitted.</span>
<span class="sd">        """</span>
        <span class="n">confirmation_time</span> <span class="o">=</span> <span class="s2">"(pending)"</span>
        <span class="n">tx_type</span> <span class="o">=</span> <span class="n">txm</span><span class="o">.</span><span class="n">transaction_type</span>
        <span class="n">from_acct</span> <span class="o">=</span> <span class="n">txm</span><span class="o">.</span><span class="n">account</span>
        <span class="k">if</span> <span class="n">from_acct</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">classic_address</span><span class="p">:</span>
            <span class="n">from_acct</span> <span class="o">=</span> <span class="s2">"(Me)"</span>
        <span class="c1"># Some transactions don't have a destination, so we need to handle that.</span>
        <span class="n">to_acct</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">txm</span><span class="p">,</span> <span class="s2">"destination"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">to_acct</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">classic_address</span><span class="p">:</span>
            <span class="n">to_acct</span> <span class="o">=</span> <span class="s2">"(Me)"</span>
        <span class="c1"># Delivered amount is only known after a transaction is processed, so</span>
        <span class="c1"># leave this column empty in the display for pending transactions.</span>
        <span class="n">delivered_amt</span> <span class="o">=</span> <span class="s2">""</span>
        <span class="n">tx_hash</span> <span class="o">=</span> <span class="n">txm</span><span class="o">.</span><span class="n">get_hash</span><span class="p">()</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="p">(</span><span class="n">confirmation_time</span><span class="p">,</span> <span class="n">tx_type</span><span class="p">,</span> <span class="n">from_acct</span><span class="p">,</span> <span class="n">to_acct</span><span class="p">,</span> <span class="n">delivered_amt</span><span class="p">,</span>
                <span class="n">tx_hash</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">txm</span><span class="o">.</span><span class="n">to_xrpl</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">PrependItem</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pending_tx_rows</span><span class="p">[</span><span class="n">tx_hash</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">RowToItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<p>This method is similar to the <code>add_tx_row()</code> method in that it processes a transaction for display and adds it to the Transaction History table. The differences are that it takes one of <a class="external-link" href="https://xrpl-py.readthedocs.io/en/stable/source/xrpl.models.transactions.html" target="_blank">xrpl-py's Transaction models <i aria-hidden="true" class="fa fa-external-link"></i></a> rather than a JSON-like API response; and it handles certain columns differently because the transaction has not yet been confirmed. Importantly, it saves a reference to table row containing this transaction to the <code>pending_tx_rows</code> dictionary, so that later on when the transaction is confirmed, you can remove the table row for the pending version and replace it with the final version of the transaction.</p>
<p>Lastly, update the <code>add_tx_from_sub()</code> method so that it finds and updates pending transactions with their final results when those transactions are confirmed. Add the following lines <strong>right before the call to</strong> <code>self.add_tx_row()</code>:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-43" id="codeblock-43button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-43">        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="s2">"tx"</span><span class="p">][</span><span class="s2">"hash"</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending_tx_rows</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">dvi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending_tx_rows</span><span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="s2">"tx"</span><span class="p">][</span><span class="s2">"hash"</span><span class="p">]]</span>
            <span class="n">pending_row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">ItemToRow</span><span class="p">(</span><span class="n">dvi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tx_list</span><span class="o">.</span><span class="n">DeleteItem</span><span class="p">(</span><span class="n">pending_row</span><span class="p">)</span>
</code></pre></div>
<p>You can now use your wallet to send XRP! You can even fund an entirely new account. To do that:</p>
<ol>
<li>
<p>Open the Python interpreter.</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-44" id="codeblock-44button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-44">python3
</code></pre></div>
<p class="devportal-callout caution"><strong>Caution:</strong> Depending on your OS, the command may be <code>python</code> or <code>python3</code>. You want to open Python 3, not a Python 2.x version.</p>
</li>
<li>
<p>Run the following commands in the Python interpreter:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-45" id="codeblock-45button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-45"><span class="kn">import</span> <span class="nn">xrpl</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">wallet</span><span class="o">.</span><span class="n">Wallet</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">seed</span><span class="p">)</span>
<span class="n">exit</span><span class="p">()</span>
</code></pre></div>
<p>Save the classic address and seed somewhere.</p>
</li>
<li>
<p>Open your wallet app and provide a <strong>Secret</strong> (seed) value from an already-funded address, such as one you got from the <a href="xrp-testnet-faucet.html">Testnet Faucet</a>.</p>
</li>
<li>
<p>Send at least the <a href="reserves.html">base reserve</a> (currently 10 XRP) to the brand-new classic address you generated in the Python interpreter.</p>
</li>
<li>
<p>Wait for the transaction to be confirmed, then close your wallet app.</p>
</li>
<li>
<p>Open your wallet app and provide the seed value you generated in the Python interpreter.</p>
</li>
<li>
<p>You should see the balance and transaction history of your newly-funded account, matching the address you generated in the interpreter.</p>
</li>
</ol>
<h3 id="6-domain-verification-and-polish">6. Domain Verification and Polish<a aria-hidden="true" class="hover_anchor" href="#6-domain-verification-and-polish"><i class="fa fa-link"></i></a></h3>
<p><strong>Full code for this step:</strong> <a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/py/6_verification_and_polish.py" target="_blank"><code>6_verification_and_polish.py</code> <i aria-hidden="true" class="fa fa-external-link"></i></a></p>
<p>One of the biggest shortcomings of the wallet app from the previous step is that it doesn't provide a lot of protections or feedback for users to save them from human error and scams. These sorts of protections are extra important when dealing with the cryptocurrency space, because decentralized systems like the XRP Ledger don't have an admin or support team you can ask to cancel or refund a payment if you made a mistake such as sending it to the wrong address. This step shows how to add some checks on destination addresses to warn the user before sending.</p>
<p>One type of check you can make is to verify the domain name associated with an XRP Ledger address; this is called <a href="xrp-ledger-toml.html#account-verification">account domain verification</a>. When an account's domain is verified, you could show it like this:</p>
<p><img alt="Screenshot: domain verified destination" src="img/python-wallet-6.png"/></p>
<p>When there are other errors, you can expose them to the user with an icon and a tooltip, which looks like this:</p>
<p><img alt="Screenshot: invalid address error icon with tooltip" src="img/python-wallet-6-err.png"/></p>
<p>The following code implements account domain verification; <strong>save it as a new file</strong> named <code>verify_domain.py</code> in the same folder as your app's main file:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-46" id="codeblock-46button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-46"><span class="c1"># Domain verification of XRP Ledger accounts using xrp-ledger.toml file.</span>
<span class="c1"># For information on this process, see:</span>
<span class="c1">#   https://xrpl.org/xrp-ledger-toml.html#account-verification</span>
<span class="c1"># License: MIT. https://github.com/XRPLF/xrpl-dev-portal/blob/master/LICENSE</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">toml</span>
<span class="kn">import</span> <span class="nn">xrpl</span>

<span class="k">def</span> <span class="nf">verify_account_domain</span><span class="p">(</span><span class="n">account</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Verify an account using an xrp-ledger.toml file.</span>

<span class="sd">    Params:</span>
<span class="sd">        account:dict - the AccountRoot object to verify</span>
<span class="sd">    Returns (domain:str, verified:bool)</span>
<span class="sd">    """</span>
    <span class="n">domain_hex</span> <span class="o">=</span> <span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"Domain"</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">domain_hex</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">""</span><span class="p">,</span> <span class="kc">False</span>
    <span class="n">verified</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">hex_to_str</span><span class="p">(</span><span class="n">domain_hex</span><span class="p">)</span>
    <span class="n">toml_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"https://</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/.well-known/xrp-ledger.toml"</span>
    <span class="n">toml_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">toml_url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">toml_response</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
        <span class="n">parsed_toml</span> <span class="o">=</span> <span class="n">toml</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">toml_response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">toml_accounts</span> <span class="o">=</span> <span class="n">parsed_toml</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"ACCOUNTS"</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">for</span> <span class="n">t_a</span> <span class="ow">in</span> <span class="n">toml_accounts</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">t_a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"address"</span><span class="p">)</span> <span class="o">==</span> <span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"Account"</span><span class="p">):</span>
                <span class="n">verified</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
    <span class="k">return</span> <span class="n">domain</span><span class="p">,</span> <span class="n">verified</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"address"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">"Classic address to check domain verification of"</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">JsonRpcClient</span><span class="p">(</span><span class="s2">"https://xrplcluster.com"</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">get_account_info</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span>
            <span class="n">ledger_index</span><span class="o">=</span><span class="s2">"validated"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">verify_account_domain</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s2">"account_data"</span><span class="p">]))</span>
</code></pre></div>
<p><strong>In your app's main file,</strong> import the <code>verify_account_domain</code> function:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-47" id="codeblock-47button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-47"><span class="kn">from</span> <span class="nn">verify_domain</span> <span class="kn">import</span> <span class="n">verify_account_domain</span>
</code></pre></div>
<p>In the <code>XRPLMonitorThread</code> class, add a new <code>check_destination()</code> method to check the destination address, as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-48" id="codeblock-48button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-48">    <span class="k">async</span> <span class="k">def</span> <span class="nf">check_destination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">dlg</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Check a potential destination address's details, and pass them back to</span>
<span class="sd">        a "Send XRP" dialog:</span>
<span class="sd">        - Is the account funded?</span>
<span class="sd">            If not, payments below the reserve base will fail</span>
<span class="sd">        - Do they have DisallowXRP enabled?</span>
<span class="sd">            If so, the user should be warned they don't want XRP, but can click</span>
<span class="sd">            through.</span>
<span class="sd">        - Do they have a verified Domain?</span>
<span class="sd">            If so, we want to show the user the associated domain info.</span>

<span class="sd">        Requires that self.client be connected first.</span>
<span class="sd">        """</span>

        <span class="c1"># The data to send back to the GUI thread: None for checks that weren't</span>
        <span class="c1"># performed, True/False for actual results except where noted.</span>
        <span class="n">account_status</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"funded"</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">"disallow_xrp"</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">"domain_verified"</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">"domain_str"</span><span class="p">:</span> <span class="s2">""</span> <span class="c1"># the decoded domain, regardless of verification</span>
        <span class="p">}</span>

        <span class="c1"># Look up the account. If this fails, the account isn't funded.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">get_account_info</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">ledger_index</span><span class="o">=</span><span class="s2">"validated"</span><span class="p">)</span>
            <span class="n">account_status</span><span class="p">[</span><span class="s2">"funded"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">dest_acct</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s2">"account_data"</span><span class="p">]</span>
        <span class="k">except</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">XRPLRequestFailureException</span><span class="p">:</span>
            <span class="c1"># Not funded, so the other checks don't apply.</span>
            <span class="n">account_status</span><span class="p">[</span><span class="s2">"funded"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="n">dlg</span><span class="o">.</span><span class="n">update_dest_info</span><span class="p">,</span> <span class="n">account_status</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Check DisallowXRP flag</span>
        <span class="n">lsfDisallowXRP</span> <span class="o">=</span> <span class="mh">0x00080000</span>
        <span class="k">if</span> <span class="n">dest_acct</span><span class="p">[</span><span class="s2">"Flags"</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">lsfDisallowXRP</span><span class="p">:</span>
            <span class="n">account_status</span><span class="p">[</span><span class="s2">"disallow_xrp"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">account_status</span><span class="p">[</span><span class="s2">"disallow_xrp"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Check domain verification</span>
        <span class="n">domain</span><span class="p">,</span> <span class="n">verified</span> <span class="o">=</span> <span class="n">verify_account_domain</span><span class="p">(</span><span class="n">dest_acct</span><span class="p">)</span>
        <span class="n">account_status</span><span class="p">[</span><span class="s2">"domain_verified"</span><span class="p">]</span> <span class="o">=</span> <span class="n">verified</span>
        <span class="n">account_status</span><span class="p">[</span><span class="s2">"domain_str"</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain</span>

        <span class="c1"># Send data back to the main thread.</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="n">dlg</span><span class="o">.</span><span class="n">update_dest_info</span><span class="p">,</span> <span class="n">account_status</span><span class="p">)</span>
</code></pre></div>
<p>This code uses <a class="external-link" href="https://xrpl-py.readthedocs.io/en/stable/source/xrpl.asyncio.account.html#xrpl.asyncio.account.get_account_info" target="_blank"><code>xrpl.asyncio.account.get_account_info()</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> to look up the account in the ledger; unlike using the client's <code>request()</code> method, <code>get_account_info()</code> raises an exception if the account is not found.</p>
<p>If the account <em>does</em> exist, the code checks for the <a href="accountroot.html#accountroot-flags"><code>lsfDisallowXRP</code> flag</a>. Note that this is an <code>lsf</code> (ledger state flag) value because this is an object from the ledger state data; these are different than the flag values the <a href="accountset.html">AccountSet transaction</a> uses to configure the same settings.</p>
<p>Finally, the code decodes the account's <code>Domain</code> field, if present, and performs domain verification using the method imported above.</p>
<p class="devportal-callout caution"><strong>Caution:</strong> The background check takes the Send XRP dialog (<code>dlg</code>) as a parameter, since each dialog is a separate instance, but does not modify the dialog directly since that might not be thread-safe. (It <em>only</em> uses <code>wx.CallAfter</code> to pass the results of the check back to the dialog.)</p>
<p>After this, it's time to update the <code>SendXRPDialog</code> class to make it capable of displaying these errors. You can also set a more specific upper bound for how much XRP the account can actually send. Change the constructor to take a new parameter:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-49" id="codeblock-49button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-49">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">max_send</span><span class="o">=</span><span class="mf">100000000.0</span><span class="p">):</span>
</code></pre></div>
<p>Add some icon widgets to the UI, also in the <code>SendXRPDialog</code> constructor:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-50" id="codeblock-50button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-50">        <span class="c1"># Icons to indicate a validation error</span>
        <span class="n">bmp_err</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ArtProvider</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ART_ERROR</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ART_CMN_DIALOG</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBitmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">bmp_err</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err_dtag</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBitmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">bmp_err</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err_amt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBitmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">bmp_err</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err_dtag</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err_amt</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>

        <span class="c1"># Icons for domain verification</span>
        <span class="n">bmp_check</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ArtProvider</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ART_TICK_MARK</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ART_CMN_DIALOG</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domain_text</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBitmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">bmp_check</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">max_send</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">max_send</span> <span class="o">=</span> <span class="mf">100000000.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">err_amt</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">err_amt</span><span class="o">.</span><span class="n">SetToolTip</span><span class="p">(</span><span class="s2">"Not enough XRP to pay the reserve and transaction cost!"</span><span class="p">)</span>
</code></pre></div>
<p>Still in the <code>SendXRPDialog</code> constructor, add a maximum value to the line that creates the <code>self.txt_amt</code> widget:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-51" id="codeblock-51button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-51">        <span class="bp">self</span><span class="o">.</span><span class="n">txt_amt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SpinCtrlDouble</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">"20.0"</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.000001</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="n">max_send</span><span class="p">)</span>
</code></pre></div>
<p>Don't forget to add all the new widgets to the <code>SendXRPDialog</code>'s sizer so they fit in the right places. Update the <code>BulkAdd</code> call in the constructor as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-52" id="codeblock-52button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-52">        <span class="n">sizer</span><span class="o">.</span><span class="n">BulkAdd</span><span class="p">(((</span><span class="n">lbl_to</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_to</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="p">),</span>
                       <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain_text</span><span class="p">),</span>
                       <span class="p">(</span><span class="n">lbl_dtag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">err_dtag</span><span class="p">),</span>
                       <span class="p">(</span><span class="n">lbl_amt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_amt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">err_amt</span><span class="p">),</span>
                       <span class="p">(</span><span class="n">btn_cancel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">btn_send</span><span class="p">))</span> <span class="p">)</span>
</code></pre></div>
<p>Next, refactor the <code>on_to_edit()</code> handler in the <code>SendXRPDialog</code> class to perform more checks, including the new background check on the destination address. The updated handler should be as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-53" id="codeblock-53button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-53">    <span class="k">def</span> <span class="nf">on_to_edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When the user edits the "To" field, check that the address is well-</span>
<span class="sd">        formatted. If it's an X-address, fill in the destination tag and disable</span>
<span class="sd">        it. Also, start a background check to confirm more details about the</span>
<span class="sd">        address.</span>
<span class="sd">        """</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_to</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c1"># Reset warnings / domain verification</span>
        <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">SetToolTip</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domain_text</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">is_valid_xaddress</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
            <span class="n">cl_addr</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">is_test</span> <span class="o">=</span> <span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">xaddress_to_classic_address</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># Not the same as tag = 0</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="s2">""</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">ChangeValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">cl_addr</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">classic_address</span><span class="p">:</span>
                <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">"Can't send XRP to self."</span>
            <span class="k">elif</span> <span class="n">is_test</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">test_network</span><span class="p">:</span>
                <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">"This address is intended for a different network."</span>

        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">IsEditable</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">txt_dtag</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">is_valid_classic_address</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="ow">or</span>
                <span class="n">xrpl</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">addresscodec</span><span class="o">.</span><span class="n">is_valid_xaddress</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_send</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">"Not a valid address."</span>
        <span class="k">elif</span> <span class="n">v</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">classic_address</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_send</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">"Can't send XRP to self."</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">run_bg_job</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">check_destination</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">err_msg</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">SetToolTip</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</code></pre></div>
<p>In addition to starting the background check, this handler does some checks immediately. Any check that doesn't require getting data from the network is probably fast enough to run directly in the handler; if the check requires network access, you have to run it in the worker thread instead.</p>
<p>One of the new checks is to decode X-addresses to pull out the additional data they encode:</p>
<ul>
<li>If the X-address includes a destination tag, show it in the destination tag field.</li>
<li>If the X-address is not intended for a test network and the app is connected to a test network (or the other way around), show an error.</li>
</ul>
<p>One tricky bit of writing handlers like this in GUI code is that you have to be ready for the handler to be called many times as the user inputs and erases data. For example, if you disable a field when some input is invalid, you also have to enable it if the user changes their input to be valid.</p>
<p>The code shows the error icons when it finds errors (and hides them when it doesn't), and adds tooltips with the error message. You could, of course, display errors to the user in another way as well, such as additional pop-up dialogs or a status bar.</p>
<p>Moving on, you also need a new method in the <code>SendXRPDialog</code> class to process the results from the background check. Add the following code:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-54" id="codeblock-54button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-54">    <span class="k">def</span> <span class="nf">update_dest_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest_status</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Update the UI with details provided by a background job to check the</span>
<span class="sd">        destination address.</span>
<span class="sd">        """</span>
        <span class="c1"># Keep existing error message if there is one</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">GetToolTip</span><span class="p">()</span><span class="o">.</span><span class="n">GetTip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="c1"># This method can be called after the dialog it belongs to has been</span>
            <span class="c1"># closed. In that case, there's nothing to do here.</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">dest_status</span><span class="p">[</span><span class="s2">"funded"</span><span class="p">]:</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">"Warning: this account does not exist. The payment will "</span>
                      <span class="s2">"fail unless you send enough to fund it."</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">dest_status</span><span class="p">[</span><span class="s2">"disallow_xrp"</span><span class="p">]:</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">"This account does not want to receive XRP."</span>

        <span class="c1"># Domain verification</span>
        <span class="n">bmp_err</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ArtProvider</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ART_ERROR</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ART_CMN_DIALOG</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
        <span class="n">bmp_check</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ArtProvider</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ART_TICK_MARK</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ART_CMN_DIALOG</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="n">dest_status</span><span class="p">[</span><span class="s2">"domain_str"</span><span class="p">]</span>
        <span class="n">verified</span> <span class="o">=</span> <span class="n">dest_status</span><span class="p">[</span><span class="s2">"domain_verified"</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">domain</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_text</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">verified</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_text</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_text</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="o">.</span><span class="n">SetToolTip</span><span class="p">(</span><span class="s2">"Domain verified"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="o">.</span><span class="n">SetBitmap</span><span class="p">(</span><span class="n">bmp_check</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_text</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_text</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="o">.</span><span class="n">SetToolTip</span><span class="p">(</span><span class="s2">"Failed to verify domain"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="o">.</span><span class="n">SetBitmap</span><span class="p">(</span><span class="n">bmp_err</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domain_verified</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">err_msg</span><span class="p">:</span>
            <span class="c1"># Disabling the button is optional. These types of errors can be</span>
            <span class="c1"># benign, so you could let the user "click through" them.</span>
            <span class="c1"># self.btn_send.Disable()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">SetToolTip</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_send</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">SetToolTip</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">err_to</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</code></pre></div>
<p>This code takes the dictionary passed by the <code>check_destination()</code> and uses it to update various widgets in the Send XRP dialog's GUI.</p>
<p>You need to make a few small updates to configure the maximum send amount in the Send XRP dialog. Start by adding these lines to the <code>TWaXLFrame</code> class's constructor:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-55" id="codeblock-55button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-55">        <span class="c1"># This account's total XRP reserve including base + owner amounts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reserve_xrp</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
<p>Then modify the <code>update_account()</code> method of the <code>TWaXLFrame</code> to save the latest calculated reserve. Modify the last few lines to look like this:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-56" id="codeblock-56button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-56">        <span class="c1"># Display account reserve and save for calculating max send.</span>
        <span class="n">reserve_xrp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_reserve_xrp</span><span class="p">(</span><span class="n">acct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"OwnerCount"</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">reserve_xrp</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">st_reserve</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">reserve_xrp</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reserve_xrp</span> <span class="o">=</span> <span class="n">reserve_xrp</span>
</code></pre></div>
<p>Finally, calculate the maximum amount the user can send and provide it to the Send XRP dialog. Modify <strong>the beginning of the <code>click_send_xrp()</code> handler</strong> as follows:</p>
<div class="codehilite"><div aria-label="Code Buttons" class="btn-group" role="group"><button alt="Copy to clipboard" class="btn btn-outline-secondary clipboard-btn" data-clipboard-target="#codeblock-57" id="codeblock-57button"><i class="fa fa-clipboard"></i></button></div><pre><span></span><code id="codeblock-57">        <span class="n">xrp_bal</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">st_xrp_balance</span><span class="o">.</span><span class="n">GetLabelText</span><span class="p">())</span>
        <span class="n">tx_cost</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">"0.000010"</span><span class="p">)</span>
        <span class="n">reserve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reserve_xrp</span> <span class="ow">or</span> <span class="n">Decimal</span><span class="p">(</span><span class="mf">0.000000</span><span class="p">)</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">SendXRPDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_send</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">xrp_bal</span> <span class="o">-</span> <span class="n">reserve</span> <span class="o">-</span> <span class="n">tx_cost</span><span class="p">))</span>
</code></pre></div>
<p>The formula this code uses to calculate the maximum amount the user can send is the account's XRP balance, minus its <a href="reserves.html">reserve</a> and minus the <a href="transaction-cost.html">transaction cost</a>. The calculation uses the <code>Decimal</code> class to avoid rounding errors, but ultimately it has to be converted down to a <code>float</code> because that's what wxPython's <a class="external-link" href="https://docs.wxpython.org/wx.SpinCtrlDouble.html" target="_blank"><code>wx.SpinCtrlDouble</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> accepts for minimum and maximum values. Still there is less opportunity for floating-point rounding errors to occur if the conversion happens <em>after</em> the other calculations.</p>
<p>Test your wallet app the same way you did in the previous steps. To test domain verification, try entering the following addresses in the "To" box of the Send XRP dialog:</p>
<table class="table-responsive">
<thead>
<tr>
<th style="text-align: left;">Address</th>
<th style="text-align: left;">Domain</th>
<th style="text-align: left;">Verified?</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>rsA2LpzuawewSBQXkiju3YQTMzW13pAAdW</code></td>
<td style="text-align: left;"><code>mduo13.com</code></td>
<td style="text-align: left;">✅ Yes</td>
</tr>
<tr>
<td style="text-align: left;"><code>rf1BiGeXwwQoi8Z2ueFYTEXSwuJYfV2Jpn</code></td>
<td style="text-align: left;"><code>xrpl.org</code></td>
<td style="text-align: left;">❌ No</td>
</tr>
<tr>
<td style="text-align: left;"><code>rPT1Sjq2YGrBMTttX4GZHjKu9dyfzbpAYe</code></td>
<td style="text-align: left;">(Not set)</td>
<td style="text-align: left;">❌ No</td>
</tr>
</tbody>
</table>
<p>To test X-addresses, try the following addresses:</p>
<table class="table-responsive">
<thead>
<tr>
<th style="text-align: left;">Address</th>
<th style="text-align: left;">Destination Tag</th>
<th style="text-align: left;">Test Net?</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>T7YChPFWifjCAXLEtg5N74c7fSAYsvPKxzQAET8tbZ8q3SC</code></td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr>
<td style="text-align: left;"><code>T7YChPFWifjCAXLEtg5N74c7fSAYsvJVm6xKZ14AmjegwRM</code></td>
<td style="text-align: left;">None</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr>
<td style="text-align: left;"><code>X7d3eHCXzwBeWrZec1yT24iZerQjYLjJrFT7A8ZMzzYWCCj</code></td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">No</td>
</tr>
<tr>
<td style="text-align: left;"><code>X7d3eHCXzwBeWrZec1yT24iZerQjYLeTFXz1GU9RBnWr7gZ</code></td>
<td style="text-align: left;">None</td>
<td style="text-align: left;">No</td>
</tr>
</tbody>
</table>
<h2 id="next-steps">Next Steps<a aria-hidden="true" class="hover_anchor" href="#next-steps"><i class="fa fa-link"></i></a></h2>
<p>Now that you have a functional wallet, you can take it in several new directions. The following are a few ideas:</p>
<ul>
<li>You could support more of the XRP Ledger's <a href="transaction-types.html">transaction types</a> including <a href="issued-currencies.html">tokens</a> and <a href="cross-currency-payments.html">cross-currency payments</a><ul>
<li>Example code for displaying token balances and other objects: <a class="external-link" href="https://github.com/XRPLF/xrpl-dev-portal/tree/master/content/_code-samples/build-a-desktop-wallet/py/7_owned_objects.py" target="_blank"><code>7_owned_objects.py</code> <i aria-hidden="true" class="fa fa-external-link"></i></a></li>
</ul>
</li>
<li>Allow the user to trade in the <a href="decentralized-exchange.html">decentralized exchange</a></li>
<li>Add a way to request payments, such as with QR codes or URIs that open in your wallet.</li>
<li>Support better account security including <a href="cryptographic-keys.html#regular-key-pair">regular key pairs</a> or <a href="multi-signing.html">multi-signing</a>.</li>
</ul>
<!-- -->
<!-- -->
<!-- API object types -->
<!-- -->
<!-- -->
<!-- -->
<!-- rippled release notes links -->
    </div>
  </article>
<!-- Feedback Widget -->
<script src="assets/vendor/feedback-widget.js"></script>
<div id="feedback-content"></div>
<script>
  // Options
  const options = {
    analyticsConfig: [
      // { name: 'ga', id: 'UA-45576805-2' },
      { name: 'gtm', id: 'GTM-KCQZ3L8' },
    ],
    analyticsName: 'Feedback Widget Tracker',
    theme: 'xrpl',
    currentPath: window.location.pathname,
    parentElement: '#feedback-content',
  };

  // Init WidgetClass
  const r = new WidgetClass(options);
</script>      </main>
      <!-- Left sidebar last so it's at the end for mobile -->
      <aside class="left-sidebar col-md-5 col-lg-3 order-md-1" role="complementary">


<nav class="nav flex-column dactyl-tree-nav">
  <div class="nav-item nav-parent">
    <a class="nav-link" href="docs.html">Documentation</a>
  </div>
    
    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_2" aria-expanded="false" aria-controls="tree_nav_group_2"></a>

        <a class="nav-link" href="introduction.html">Introduction</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="what-is-the-xrp-ledger.html">What is the XRP Ledger?</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="what-is-xrp.html">What is XRP?</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="crypto-wallets.html">Crypto Wallets</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="txn-and-requests.html">Transactions and Requests</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="software-ecosystem.html">Software Ecosystem</a>
  </div>

    </nav>

  </div>

    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3" aria-expanded="false" aria-controls="tree_nav_group_3"></a>

        <a class="nav-link" href="use-cases.html">Use Cases</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3_1" aria-expanded="false" aria-controls="tree_nav_group_3_1"></a>

        <a class="nav-link" href="payments-uc.html">Payments</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer-to-peer-payments-uc.html">Peer-to-Peer Payments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="restricting-deposits-uc.html">Restricting Deposits</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrow-uc.html">Smart Contracts</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3_2" aria-expanded="false" aria-controls="tree_nav_group_3_2"></a>

        <a class="nav-link" href="tokenization.html">Tokenization</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="stablecoin-issuer.html">Stablecoin Issuer</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3_2_2" aria-expanded="false" aria-controls="tree_nav_group_3_2_2"></a>

        <a class="nav-link" href="nft-mkt-overview.html">NFT Marketplace Overview</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken-marketplace.html">NFT Marketplace</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="authorized-minter.html">Authorized Minter</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="digital-artist.html">Digital Artist</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_3_3" aria-expanded="false" aria-controls="tree_nav_group_3_3"></a>

        <a class="nav-link" href="defi-uc.html">Decentralized Finance</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_3_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="algorithmic-trading.html">Algorithmic Trading</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="list-xrp-as-an-exchange.html">List XRP as an Exchange</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4" aria-expanded="false" aria-controls="tree_nav_group_4"></a>

        <a class="nav-link" href="concepts.html">Concepts</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_1" aria-expanded="false" aria-controls="tree_nav_group_4_1"></a>

        <a class="nav-link" href="networks-and-servers.html">Networks and Servers</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rippled-server-modes.html">rippled Server Modes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="clustering.html">Clustering</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-history.html">Ledger History</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer-protocol.html">Peer Protocol</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-censorship-detection.html">Transaction Censorship Detection</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="parallel-networks.html">Parallel Networks</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="amendments.html">Amendments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="the-clio-server.html">The Clio Server</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_2" aria-expanded="false" aria-controls="tree_nav_group_4_2"></a>

        <a class="nav-link" href="consensus.html">Consensus Protocol</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus-structure.html">Consensus Structure</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus-principles-and-rules.html">Consensus Principles and Rules</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus-protections.html">Consensus Protections Against Attacks and Failure Modes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="invariant-checking.html">Invariant Checking</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fee-voting.html">Fee Voting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="negative-unl.html">Negative UNL</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus-research.html">Consensus Research</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_3" aria-expanded="false" aria-controls="tree_nav_group_4_3"></a>

        <a class="nav-link" href="ledgers.html">Ledgers</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-structure.html">Ledger Structure</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="open-closed-validated-ledgers.html">Open, Closed, and Validated Ledgers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-close-times.html">Ledger Close Times</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_4" aria-expanded="false" aria-controls="tree_nav_group_4_4"></a>

        <a class="nav-link" href="transactions.html">Transactions</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fees.html">Fees (Disambiguation)</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="reliable-transaction-submission.html">Reliable Transaction Submission</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="secure-signing.html">Secure Signing</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="source-and-destination-tags.html">Source and Destination Tags</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-cost.html">Transaction Cost</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-queue.html">Transaction Queue</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_4_7" aria-expanded="false" aria-controls="tree_nav_group_4_4_7"></a>

        <a class="nav-link" href="finality-of-results.html">Finality of Results</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_4_7">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="look-up-transaction-results.html">Look Up Transaction Results</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-malleability.html">Transaction Malleability</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="canceling-a-transaction.html">Canceling a Transaction</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_5" aria-expanded="false" aria-controls="tree_nav_group_4_5"></a>

        <a class="nav-link" href="payment-types.html">Payment Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="direct-xrp-payments.html">Direct XRP Payments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cross-currency-payments.html">Cross-Currency Payments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="checks.html">Checks</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrow.html">Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="partial-payments.html">Partial Payments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="payment-channels.html">Payment Channels</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_6" aria-expanded="false" aria-controls="tree_nav_group_4_6"></a>

        <a class="nav-link" href="tokens.html">Tokens</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_6">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_6_1" aria-expanded="false" aria-controls="tree_nav_group_4_6_1"></a>

        <a class="nav-link" href="non-fungible-tokens.html">Non-Fungible Tokens</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_6_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-storage.html">NFT Payload Storage</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="non-fungible-token-transfers.html">Trading NFTokens on the XRP Ledger</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-reserve-requirements.html">NFT Reserve Requirements</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken-batch-minting.html">Batch minting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken-authorized-minting.html">Authorizing Another Account to Mint Your NFTs</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken-auctions.html">Running an NFT Auction</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-collections.html">Minting NFTs into Collections</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-fixed-supply.html">Guaranteeing a Fixed Supply of NFTs</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft-apis.html">NFT APIs</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="trust-lines-and-issuing.html">Trust Lines and Issuing</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="authorized-trust-lines.html">Authorized Trust Lines</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="clawing-back-tokens.html">Clawing Back Tokens <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_6_5" aria-expanded="false" aria-controls="tree_nav_group_4_6_5"></a>

        <a class="nav-link" href="freezes.html">Freezing Tokens</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_6_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="common-misconceptions-about-freezes.html">Common Misunderstandings about Freezes</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rippling.html">Rippling</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transfer-fees.html">Transfer Fees</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paths.html">Paths</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="demurrage.html">Demurrage <span class="status removed" title="This page describes a legacy feature that has been removed."><i class="fa fa-trash-o"></i></span></a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_6_10" aria-expanded="false" aria-controls="tree_nav_group_4_6_10"></a>

        <a class="nav-link" href="decentralized-exchange.html">Decentralized Exchange</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_6_10">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offers.html">Offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="autobridging.html">Auto-Bridging</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ticksize.html">Tick Size</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="automated-market-makers.html">Automated Market Makers <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_4_7" aria-expanded="false" aria-controls="tree_nav_group_4_7"></a>

        <a class="nav-link" href="accounts.html">Accounts</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_4_7">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="multi-signing.html">Multi-Signing</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tickets.html">Tickets</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account-types.html">Account Types</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="deleting-accounts.html">Deleting Accounts</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="reserves.html">Reserves</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="addresses.html">Addresses</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cryptographic-keys.html">Cryptographic Keys</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="depositauth.html">Deposit Authorization</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

    
  <div class="nav-item active-parent">

      <a class="nav-toggler " role="button" data-toggle="collapse" href="#tree_nav_group_5" aria-expanded="true" aria-controls="tree_nav_group_5"></a>

        <a class="nav-link" href="tutorials.html">Tutorials</a>

    <nav class="nav flex-column show " id="tree_nav_group_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="public-servers.html">Public Servers</a>
  </div>

      
  <div class="nav-item active-parent">

      <a class="nav-toggler " role="button" data-toggle="collapse" href="#tree_nav_group_5_2" aria-expanded="true" aria-controls="tree_nav_group_5_2"></a>

        <a class="nav-link" href="python.html">Python</a>

    <nav class="nav flex-column show " id="tree_nav_group_5_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get-started-using-python.html">Get Started Using Python</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_2_2" aria-expanded="false" aria-controls="tree_nav_group_5_2_2"></a>

        <a class="nav-link" href="modular-tutorials-in-python.html">Modular Tutorials in Python</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_2_2">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_2_2_1" aria-expanded="false" aria-controls="tree_nav_group_5_2_2_1"></a>

        <a class="nav-link" href="send-payments-using-python.html">Send Payments Using Python</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_2_2_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-create-accounts-send-xrp.html">Create Accounts and Send XRP Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-create-trustline-send-currency.html">Create Trust Line and Send Currency Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-create-time-based-escrows.html">Create Time-based Escrows Using Python</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_2_2_2" aria-expanded="false" aria-controls="tree_nav_group_5_2_2_2"></a>

        <a class="nav-link" href="nfts-using-python.html">NFTs Using Python</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_2_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-mint-and-burn-nfts.html">Mint and Burn NFTs Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-transfer-nfts.html">Transfer NFTs Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-broker-sale.html">Broker an NFT Sale Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-authorize-minter.html">Assign an Authorized Minter Using Python</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="py-batch-minting.html">Batch Mint NFTs</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item active">
    <a class="nav-link nav-leaf" href="build-a-desktop-wallet-in-python.html">Build a Desktop Wallet in Python</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_3" aria-expanded="false" aria-controls="tree_nav_group_5_3"></a>

        <a class="nav-link" href="javascript.html">JavaScript</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get-started-using-javascript.html">Get Started Using JavaScript</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_3_2" aria-expanded="false" aria-controls="tree_nav_group_5_3_2"></a>

        <a class="nav-link" href="modular-tutorials-in-javascript.html">Modular Tutorials in JavaScript</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_3_2">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_3_2_1" aria-expanded="false" aria-controls="tree_nav_group_5_3_2_1"></a>

        <a class="nav-link" href="send-payments-using-javascript.html">Send Payments Using JavaScript</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_3_2_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-accounts-send-xrp-using-javascript.html">Create Accounts and Send XRP Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-trustline-send-currency-using-javascript.html">Create Trust Line and Send Currency Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-time-based-escrows-using-javascript.html">Create Time-based Escrows Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-conditional-escrows-using-javascript.html">Create Conditional Escrows Using JavaScript</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_3_2_2" aria-expanded="false" aria-controls="tree_nav_group_5_3_2_2"></a>

        <a class="nav-link" href="nfts-using-javascript.html">NFTs Using JavaScript</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_3_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="mint-and-burn-nfts-using-javascript.html">Mint and Burn NFTs Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transfer-nfts-using-javascript.html">Transfer NFTs Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="broker-an-nft-sale-using-javascript.html">Broker an NFT Sale Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="assign-an-authorized-minter-using-javascript.html">Assign an Authorized Minter Using JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="batch-mint-nfts-using-javascript.html">Batch Mint NFTs Using JavaScript</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="build-a-browser-wallet-in-javascript.html">Build a Browser Wallet in JavaScript</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="build-a-desktop-wallet-in-javascript.html">Build a Desktop Wallet in JavaScript</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_4" aria-expanded="false" aria-controls="tree_nav_group_5_4"></a>

        <a class="nav-link" href="java.html">Java</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get-started-using-java.html">Get Started Using Java</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_5" aria-expanded="false" aria-controls="tree_nav_group_5_5"></a>

        <a class="nav-link" href="http-websocket-apis-tutorials.html">HTTP / Websocket APIs</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get-started-using-http-websocket-apis.html">Get Started Using HTTP / WebSocket APIs</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="monitor-incoming-payments-with-websocket.html">Monitor Incoming Payments with WebSocket</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6" aria-expanded="false" aria-controls="tree_nav_group_5_6"></a>

        <a class="nav-link" href="tasks.html">Tasks</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_1" aria-expanded="false" aria-controls="tree_nav_group_5_6_1"></a>

        <a class="nav-link" href="manage-account-settings.html">Manage Account Settings</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="assign-a-regular-key-pair.html">Assign a Regular Key Pair</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="change-or-remove-a-regular-key-pair.html">Change or Remove a Regular Key Pair</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="disable-master-key-pair.html">Disable Master Key Pair</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="set-up-multi-signing.html">Set Up Multi-Signing</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-a-multi-signed-transaction.html">Send a Multi-Signed Transaction</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="require-destination-tags.html">Require Destination Tags</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offline-account-setup.html">Offline Account Setup Tutorial</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="use-tickets.html">Use Tickets</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-xrp.html">Send XRP</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_3" aria-expanded="false" aria-controls="tree_nav_group_5_6_3"></a>

        <a class="nav-link" href="use-specialized-payment-types.html">Use Specialized Payment Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_3_1" aria-expanded="false" aria-controls="tree_nav_group_5_6_3_1"></a>

        <a class="nav-link" href="use-escrows.html">Use Escrows</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-a-time-held-escrow.html">Send a Time-Held Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-a-conditionally-held-escrow.html">Send a Conditionally-Held Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cancel-an-expired-escrow.html">Cancel an Expired Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="look-up-escrows.html">Look up Escrows</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="use-an-escrow-as-a-smart-contract.html">Use an Escrow as a Smart Contract</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_3_2" aria-expanded="false" aria-controls="tree_nav_group_5_6_3_2"></a>

        <a class="nav-link" href="use-payment-channels.html">Use Payment Channels</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="open-a-payment-channel-to-enable-an-inter-exchange-network.html">Open a Payment Channel to Enable an Inter-Exchange Network</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_3_3" aria-expanded="false" aria-controls="tree_nav_group_5_6_3_3"></a>

        <a class="nav-link" href="use-checks.html">Use Checks</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_3_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="send-a-check.html">Send a Check</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cash-a-check-for-an-exact-amount.html">Cash a Check for an Exact Amount</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cash-a-check-for-a-flexible-amount.html">Cash a Check for a Flexible Amount</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cancel-a-check.html">Cancel a Check</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="look-up-checks-by-sender.html">Look Up Checks by Sender</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="look-up-checks-by-recipient.html">Look Up Checks by Recipient</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_5_6_4" aria-expanded="false" aria-controls="tree_nav_group_5_6_4"></a>

        <a class="nav-link" href="use-tokens.html">Use Tokens</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_5_6_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="issue-a-fungible-token.html">Issue a Fungible Token</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="trade-in-the-decentralized-exchange.html">Trade in the Decentralized Exchange</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enable-no-freeze.html">Enable No Freeze</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enact-global-freeze.html">Enact Global Freeze</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="freeze-a-trust-line.html">Freeze a Trust Line</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="create-an-automated-market-maker.html">Create an Automated Market Maker <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

    </nav>

  </div>

    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6" aria-expanded="false" aria-controls="tree_nav_group_6"></a>

        <a class="nav-link" href="references.html">References</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1" aria-expanded="false" aria-controls="tree_nav_group_6_1"></a>

        <a class="nav-link" href="protocol-reference.html">XRP Ledger Protocol Reference</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_1" aria-expanded="false" aria-controls="tree_nav_group_6_1_1"></a>

        <a class="nav-link" href="basic-data-types.html">Basic Data Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="base58-encodings.html">base58 Encodings</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="currency-formats.html">Currency Formats</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftoken.html">NFToken</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_2" aria-expanded="false" aria-controls="tree_nav_group_6_1_2"></a>

        <a class="nav-link" href="ledger-data-formats.html">Ledger Data Formats</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-header.html">Ledger Header</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_2_2" aria-expanded="false" aria-controls="tree_nav_group_6_1_2_2"></a>

        <a class="nav-link" href="ledger-entry-types.html">Ledger Entry Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="accountroot.html">AccountRoot</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="amendments-object.html">Amendments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="amm.html">AMM <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="check.html">Check</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="depositpreauth-object.html">DepositPreauth</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="directorynode.html">DirectoryNode</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrow-object.html">Escrow</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="feesettings.html">FeeSettings</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledgerhashes.html">LedgerHashes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="negativeunl.html">NegativeUNL</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenoffer.html">NFTokenOffer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenpage.html">NFTokenPage</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offer.html">Offer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paychannel.html">PayChannel</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ripplestate.html">RippleState</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="signerlist.html">SignerList</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ticket.html">Ticket</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_3" aria-expanded="false" aria-controls="tree_nav_group_6_1_3"></a>

        <a class="nav-link" href="transaction-formats.html">Transaction Reference</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-common-fields.html">Transaction Common Fields</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_3_2" aria-expanded="false" aria-controls="tree_nav_group_6_1_3_2"></a>

        <a class="nav-link" href="transaction-types.html">Transaction Types</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="accountset.html">AccountSet</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="accountdelete.html">AccountDelete</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammbid.html">AMMBid <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammcreate.html">AMMCreate <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammdelete.html">AMMDelete <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammdeposit.html">AMMDeposit <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammvote.html">AMMVote <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ammwithdraw.html">AMMWithdraw <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="checkcancel.html">CheckCancel</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="checkcash.html">CheckCash</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="checkcreate.html">CheckCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="clawback.html">Clawback <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="depositpreauth.html">DepositPreauth</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrowcancel.html">EscrowCancel</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrowcreate.html">EscrowCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="escrowfinish.html">EscrowFinish</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenacceptoffer.html">NFTokenAcceptOffer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenburn.html">NFTokenBurn</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokencanceloffer.html">NFTokenCancelOffer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokencreateoffer.html">NFTokenCreateOffer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nftokenmint.html">NFTokenMint</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offercancel.html">OfferCancel</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="offercreate.html">OfferCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="payment.html">Payment</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paymentchannelclaim.html">PaymentChannelClaim</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paymentchannelcreate.html">PaymentChannelCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="paymentchannelfund.html">PaymentChannelFund</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="setregularkey.html">SetRegularKey</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="signerlistset.html">SignerListSet</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ticketcreate.html">TicketCreate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="trustset.html">TrustSet</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_3_3" aria-expanded="false" aria-controls="tree_nav_group_6_1_3_3"></a>

        <a class="nav-link" href="pseudo-transaction-types.html">Pseudo-Transactions</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_3_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enableamendment.html">EnableAmendment</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="setfee.html">SetFee</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="unlmodify.html">UNLModify</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_1_3_4" aria-expanded="false" aria-controls="tree_nav_group_6_1_3_4"></a>

        <a class="nav-link" href="transaction-results.html">Transaction Results</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_1_3_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tec-codes.html">tec Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tef-codes.html">tef Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tel-codes.html">tel Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tem-codes.html">tem Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ter-codes.html">ter Codes</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tes-success.html">tes Success</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction-metadata.html">Transaction Metadata</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="serialization.html">Serialization Format</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_2" aria-expanded="false" aria-controls="tree_nav_group_6_2"></a>

        <a class="nav-link" href="client-libraries.html">Client Libraries</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_2">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_2_1" aria-expanded="false" aria-controls="tree_nav_group_6_2_1"></a>

        <a class="nav-link external-link" target="_blank" href="https://js.xrpl.org/">JavaScript / TypeScript Client Library <i aria-hidden="true" class="fa fa-external-link"></i></a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_2_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="xrpljs2-migration-guide.html">Migration Guide for ripple-lib 1.x to xrpl.js 2.x</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf external-link" target="_blank" href="https://xrpl-py.readthedocs.io/">Python Client Library <i aria-hidden="true" class="fa fa-external-link"></i></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf external-link" target="_blank" href="https://javadoc.io/doc/org.xrpl/">Java Client Library <i aria-hidden="true" class="fa fa-external-link"></i></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf external-link" target="_blank" href="https://www.rubydoc.info/gems/xrbp">Ruby Client Library <i aria-hidden="true" class="fa fa-external-link"></i></a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3" aria-expanded="false" aria-controls="tree_nav_group_6_3"></a>

        <a class="nav-link" href="http-websocket-apis.html">HTTP / WebSocket APIs</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_1" aria-expanded="false" aria-controls="tree_nav_group_6_3_1"></a>

        <a class="nav-link" href="api-conventions.html">API Conventions</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="request-formatting.html">Request Formatting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="response-formatting.html">Response Formatting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="error-formatting.html">Error Formatting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="markers-and-pagination.html">Markers and Pagination</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rate-limiting.html">Rate Limiting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rippled-server-states.html">rippled Server States</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ctid.html">Compact Transaction Identifier</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2" aria-expanded="false" aria-controls="tree_nav_group_6_3_2"></a>

        <a class="nav-link" href="public-api-methods.html">Public API Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_1" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_1"></a>

        <a class="nav-link" href="account-methods.html">Account Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_channels.html">account_channels</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_currencies.html">account_currencies</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_info.html">account_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_lines.html">account_lines</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_nfts.html">account_nfts</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_objects.html">account_objects</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_offers.html">account_offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="account_tx.html">account_tx</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="gateway_balances.html">gateway_balances</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="noripple_check.html">noripple_check</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_2" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_2"></a>

        <a class="nav-link" href="ledger-methods.html">Ledger Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger.html">ledger</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_closed.html">ledger_closed</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_current.html">ledger_current</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_data.html">ledger_data</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_entry.html">ledger_entry</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_3" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_3"></a>

        <a class="nav-link" href="transaction-methods.html">Transaction Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="submit.html">submit</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="submit_multisigned.html">submit_multisigned</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="transaction_entry.html">transaction_entry</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tx.html">tx</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="tx_history.html">tx_history</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_4" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_4"></a>

        <a class="nav-link" href="path-and-order-book-methods.html">Path and Order Book Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="amm_info.html">amm_info <span class="status not_enabled" title="This feature is not currently enabled on the production XRP Ledger."><i class="fa fa-flask"></i></span></a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="book_offers.html">book_offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="deposit_authorized.html">deposit_authorized</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft_buy_offers.html">nft_buy_offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft_sell_offers.html">nft_sell_offers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="path_find.html">path_find</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ripple_path_find.html">ripple_path_find</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_5" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_5"></a>

        <a class="nav-link" href="payment-channel-methods.html">Payment Channel Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="channel_authorize.html">channel_authorize</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="channel_verify.html">channel_verify</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_6" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_6"></a>

        <a class="nav-link" href="subscription-methods.html">Subscription Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_6">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="subscribe.html">subscribe</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="unsubscribe.html">unsubscribe</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_7" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_7"></a>

        <a class="nav-link" href="server-info-methods.html">Server Info Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_7">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fee.html">fee</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="manifest.html">manifest</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server_info.html">server_info (rippled)</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server_state.html">server_state</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_8" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_8"></a>

        <a class="nav-link" href="clio-methods.html">Clio Server</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_8">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server_info-clio.html">server_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger-clio.html">ledger</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft_history.html">nft_history</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="nft_info.html">nft_info</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_2_9" aria-expanded="false" aria-controls="tree_nav_group_6_3_2_9"></a>

        <a class="nav-link" href="utility-methods.html">Utility Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_2_9">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="json.html">json</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ping.html">ping</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="random.html">random</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3" aria-expanded="false" aria-controls="tree_nav_group_6_3_3"></a>

        <a class="nav-link" href="admin-api-methods.html">Admin API Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_1" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_1"></a>

        <a class="nav-link" href="key-generation-methods.html">Key Generation Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validation_create.html">validation_create</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="wallet_propose.html">wallet_propose</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_2" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_2"></a>

        <a class="nav-link" href="logging-and-data-management-methods.html">Logging and Data Management Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="can_delete.html">can_delete</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="crawl_shards.html">crawl_shards</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="download_shard.html">download_shard</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_cleaner.html">ledger_cleaner</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_request.html">ledger_request</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="log_level.html">log_level</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="logrotate.html">logrotate</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="node_to_shard.html">node_to_shard</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_3" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_3"></a>

        <a class="nav-link" href="server-control-methods.html">Server Control Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_3">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="ledger_accept.html">ledger_accept</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="stop.html">stop</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validation_seed.html">validation_seed <span class="status removed" title="This page describes a legacy feature that has been removed."><i class="fa fa-trash-o"></i></span></a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_4" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_4"></a>

        <a class="nav-link" href="signing-methods.html">Signing Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="sign.html">sign</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="sign_for.html">sign_for</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_5" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_5"></a>

        <a class="nav-link" href="peer-management-methods.html">Peer Management Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="connect.html">connect</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer_reservations_add.html">peer_reservations_add</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer_reservations_del.html">peer_reservations_del</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer_reservations_list.html">peer_reservations_list</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peers.html">peers</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_3_6" aria-expanded="false" aria-controls="tree_nav_group_6_3_3_6"></a>

        <a class="nav-link" href="status-and-debugging-methods.html">Status and Debugging Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_3_6">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="consensus_info.html">consensus_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="feature.html">feature</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fetch_info.html">fetch_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="get_counts.html">get_counts</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="print.html">print</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validator_info.html">validator_info</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validator_list_sites.html">validator_list_sites</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validators.html">validators</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_6_3_4" aria-expanded="false" aria-controls="tree_nav_group_6_3_4"></a>

        <a class="nav-link" href="peer-port-methods.html">Peer Port Methods</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_6_3_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="health-check.html">Health Check</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="peer-crawler.html">Peer Crawler</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="validator-list.html">Validator List Method</a>
  </div>

    </nav>

  </div>

    </nav>

  </div>

      
      
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="xrp-ledger-toml.html">xrp-ledger.toml File</a>
  </div>

    </nav>

  </div>

    
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7" aria-expanded="false" aria-controls="tree_nav_group_7"></a>

        <a class="nav-link" href="infrastructure.html">Infrastructure</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="commandline-usage.html">Commandline Usage</a>
  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_2" aria-expanded="false" aria-controls="tree_nav_group_7_2"></a>

        <a class="nav-link" href="install-rippled.html">Install rippled</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="system-requirements.html">System Requirements</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="install-rippled-on-centos-rhel-with-yum.html">Install on CentOS/Red Hat with yum</a>
  </div>

      
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="install-rippled-on-ubuntu.html">Install on Ubuntu or Debian Linux</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="update-rippled-automatically-on-linux.html">Update Automatically on Linux</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="update-rippled-manually-on-centos-rhel.html">Update Manually on CentOS/Red Hat</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="update-rippled-manually-on-ubuntu.html">Update Manually on Ubuntu or Debian</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="build-on-linux-mac-windows.html">Build rippled on Linux, Mac, or Windows</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="build-run-rippled-in-reporting-mode.html">Build and Run rippled in Reporting Mode</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="capacity-planning.html">Capacity Planning</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="rippled-1-3-migration-instructions.html">rippled v1.3.x Migration Instructions <span class="status removed" title="This page describes a legacy feature that has been removed."><i class="fa fa-trash-o"></i></span></a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_3" aria-expanded="false" aria-controls="tree_nav_group_7_3"></a>

        <a class="nav-link" href="configure-rippled.html">Configure rippled</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_3">
      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_3_1" aria-expanded="false" aria-controls="tree_nav_group_7_3_1"></a>

        <a class="nav-link" href="server-modes.html">Server Modes</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_3_1">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="run-rippled-as-a-validator.html">Run rippled as a Validator</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="run-rippled-as-a-stock-server.html">Run rippled as a Stock Server</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_3_2" aria-expanded="false" aria-controls="tree_nav_group_7_3_2"></a>

        <a class="nav-link" href="data-retention.html">Data Retention</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_3_2">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-full-history.html">Configure Full History</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="online-deletion.html">Online Deletion</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-online-deletion.html">Configure Online Deletion</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-advisory-deletion.html">Configure Advisory Deletion</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="history-sharding.html">History Sharding</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-history-sharding.html">Configure History Sharding</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-amendment-voting.html">Configure Amendment Voting</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="test-amendments.html">Test Amendments</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-statsd.html">Configure StatsD</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="connect-your-rippled-to-the-xrp-test-net.html">Connect Your rippled to a Parallel Network</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-grpc.html">Configure gRPC</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enable-public-signing.html">Enable Public Signing</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_4" aria-expanded="false" aria-controls="tree_nav_group_7_4"></a>

        <a class="nav-link" href="configure-peering.html">Peering</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_4">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="cluster-rippled-servers.html">Cluster rippled Servers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-a-private-server.html">Configure a Private Server</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="configure-the-peer-crawler.html">Configure the Peer Crawler</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="enable-link-compression.html">Enable Link Compression</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="forward-ports-for-peering.html">Forward Ports for Peering</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="manually-connect-to-a-specific-peer.html">Manually Connect to a Specific Peer</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="set-max-number-of-peers.html">Set Maximum Number of Peers</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="use-a-peer-reservation.html">Use a Peer Reservation</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_5" aria-expanded="false" aria-controls="tree_nav_group_7_5"></a>

        <a class="nav-link" href="use-stand-alone-mode.html">Testing and Auditing</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_5">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="start-a-new-genesis-ledger-in-stand-alone-mode.html">Start a New Genesis Ledger in Stand-Alone Mode</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="load-a-saved-ledger-in-stand-alone-mode.html">Load a Saved Ledger in Stand-Alone Mode</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="advance-the-ledger-in-stand-alone-mode.html">Advance the Ledger in Stand-Alone Mode</a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">

      <a class="nav-toggler collapsed" role="button" data-toggle="collapse" href="#tree_nav_group_7_6" aria-expanded="false" aria-controls="tree_nav_group_7_6"></a>

        <a class="nav-link" href="troubleshoot-the-rippled-server.html">Troubleshooting</a>

    <nav class="nav flex-column collapse" id="tree_nav_group_7_6">
      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="diagnosing-problems.html">Diagnosing Problems with rippled</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="health-check-interventions.html">Health Check Interventions</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="understanding-log-messages.html">Understanding Log Messages</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server-doesnt-sync.html">rippled Server Doesn't Sync</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server-is-amendment-blocked.html">rippled Server is Amendment Blocked</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="server-wont-start.html">rippled Server Won't Start</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="fix-sqlite-tx-db-page-size-issue.html">Fix SQLite Transaction Database Page Size Issue <span class="status removed" title="This page describes a legacy feature that has been removed."><i class="fa fa-trash-o"></i></span></a>
  </div>

    </nav>

  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="install-clio-on-ubuntu.html">Install Clio on Ubuntu Linux</a>
  </div>

      
  <div class="nav-item ">
    <a class="nav-link nav-leaf" href="private-network-with-docker.html">Run a Private Network with Docker</a>
  </div>

    </nav>

  </div>

</nav>      </aside>
    </div><!--/.row (main layout)-->
  </div>

<footer class="xrpl-footer" role="contentinfo">
  <section class="container-fluid">
    <div class="row">
        <div class="col-lg">
          <h5>About</h5>
          <ul class="nav footer-nav flex-column">
            <li class="nav-item"><a href="xrp-ledger-overview.html" class="nav-link">XRPL Overview</a></li>
            <li class="nav-item"><a href="uses.html" class="nav-link">Use Cases & Featured Projects</a></li>
            <li class="nav-item"><a href="history.html" class="nav-link">History</a></li>
            <li class="nav-item"><a href="xrp-overview.html" class="nav-link">XRP Overview</a></li>
            <li class="nav-item"><a href="impact.html" class="nav-link">Impact</a></li>
            <li class="nav-item"><a href="https://foundation.xrpl.org/" class="nav-link external-link">XRPL Foundation</a></li>
            <li class="nav-item"><a href="faq.html" class="nav-link">FAQ</a></li>
            <li class="nav-item"><a href="privacy-policy.html" class="nav-link">Privacy Policy</a></li>
          </ul>
        </div><!--/.col -->

        <div class="col-lg">
          <h5>Docs</h5>
          <ul class="nav footer-nav flex-column">
            <li class="nav-item"><a href="docs.html" class="nav-link">Documentation</a></li>
            <li class="nav-item"><a href="introduction.html" class="nav-link">Introduction</a></li>
            <li class="nav-item"><a href="use-cases.html" class="nav-link">Use Cases</a></li>
            <li class="nav-item"><a href="concepts.html" class="nav-link">Concepts</a></li>
            <li class="nav-item"><a href="tutorials.html" class="nav-link">Tutorials</a></li>
            <li class="nav-item"><a href="references.html" class="nav-link">References</a></li>
            <li class="nav-item"><a href="infrastructure.html" class="nav-link">Infrastructure</a></li>
          </ul>
        </div><!--/.col -->

        <div class="col-lg">
          <h5>Resources</h5>
          <ul class="nav footer-nav flex-column">
            <li class="nav-item"><a href="resources.html" class="nav-link">Resources</a></li>
            <li class="nav-item"><a href="code-samples.html" class="nav-link">Code Samples</a></li>
            <li class="nav-item"><a href="dev-tools.html" class="nav-link">Dev Tools</a></li>
            <li class="nav-item"><a href="https://learn.xrpl.org/" class="nav-link external-link">XRPL Learning Portal</a></li>
            <li class="nav-item"><a href="https://livenet.xrpl.org/" class="nav-link external-link">Ledger Explorer</a></li>
            <li class="nav-item"><a href="known-amendments.html" class="nav-link">Known Amendments</a></li>
            <li class="nav-item"><a href="contribute-code.html" class="nav-link">Contribute Code</a></li>
            <li class="nav-item"><a href="contribute-documentation.html" class="nav-link">Contribute Documentation</a></li>
          </ul>
        </div><!--/.col -->

        <div class="col-lg">
          <h5>Community</h5>
          <ul class="nav footer-nav flex-column">
            <li class="nav-item"><a href="contribute.html" class="nav-link">Contribute to the XRPL Community</a></li>
            <li class="nav-item"><a href="events.html" class="nav-link">Events</a></li>
            <li class="nav-item"><a href="ambassadors.html" class="nav-link">Ambassadors</a></li>
            <li class="nav-item"><a href="developer-funding.html" class="nav-link">Developer Funding</a></li>
            <li class="nav-item"><a href="https://jobs.xrpl.org/" class="nav-link external-link">XRPL Jobs</a></li>
            <li class="nav-item"><a href="https://xrpl.org/blog/" class="nav-link external-link">Dev Blog</a></li>
            <li class="nav-item"><a href="https://xrplgrants.org/" class="nav-link external-link">XRPL Grants</a></li>
            <li class="nav-item"><a href="https://github.com/XRPLF" class="nav-link external-link">GitHub</a></li>
            <li class="nav-item"><a href="https://github.com/XRPLF/xrpl-dev-portal/raw/master/content/XRPL_Logo_Kit.zip" class="nav-link external-link">XRPL Brand Kit</a></li>
            <li class="nav-item"><a href="report-a-scam.html" class="nav-link">Report a Scam</a></li>
          </ul>
        </div><!--/.col -->

  </section>

  <section class="container-fluid mt-20 absolute-bottom-footer">

    <div class="d-lg-flex row">
      <a href="/" class="footer-brand"><img src="assets/img/XRPLedger_DevPortal-white.svg" class="logo"  height="24" alt="XRPL.org" /></a>
      <span class="flex-grow-1">&nbsp;</span>
      <div class="copyright-license">&copy; 2023 XRP Ledger. <a href="https://raw.githubusercontent.com/XRPLF/xrpl-dev-portal/master/LICENSE">Open Source.</a>
      </div>
    </div><!-- /.absolute_bottom_footer -->

  </section>
</footer>

<!-- Jump to top button -->
<a href="#main_content_wrapper" class="jump-to-top btn btn-primary" role="button" title="Jump to top of page"><i class="fa fa-arrow-up"></i></a>
<script type="text/javascript" src="assets/js/jump-to-top.js"></script>

  <!-- Non-blocking resources -->
  <!-- Bootstrap JS -->
  <script src="assets/vendor/bootstrap.min.js"></script>
  <!-- fontawesome icons -->
  <link rel="stylesheet" href="assets/vendor/fontawesome/css/font-awesome.min.css" />


  <!-- XRPL AI -->
  <script id="xrplai-options">
    var TARGET_XRPL_DEV_PORTAL_BRANCH = 'main';
    var PROMPT_MODE = 'prompt';
    var RUNTIME_LOCATION = 'ripplex';
    var DEV_XRPLAI_RIPPLEX_IO_PROJECT_KEY = 'sk_test_i4WeLrhPtulIx1wHkcb15XouWrGiY9bf';
    var DEV_XRPLAI_RIPPLEX_API_BASE_URL = 'https://api.xrplai.dev.ripplex.io';
    var LOCALHOST_API_BASE_URL = 'http://api.localhost:3000';
    var CHAT_ENDPOINT = '/v1/chat';
    var PROMPT_ENDPOINT = '/v1/chat';
    var FEEDBACK_ENDPOINT = '/v1/feedback';
    var BASE_URL = RUNTIME_LOCATION === 'ripplex'
      ? DEV_XRPLAI_RIPPLEX_API_BASE_URL
      : LOCALHOST_API_BASE_URL;
    var CHAT_API_URL = `${BASE_URL}${CHAT_ENDPOINT}`;
    var PROMPT_API_URL = `${BASE_URL}${PROMPT_ENDPOINT}`;
    var FEEDBACK_API_URL = `${BASE_URL}${FEEDBACK_ENDPOINT}`;

    /** @type {import('@xrpl/ai-react').MarkpromptOptions} */
    window.markprompt = {
      // NOTE: This is the development key, DO NOT USE THIS IN PRODCTION
      projectKey: DEV_XRPLAI_RIPPLEX_IO_PROJECT_KEY,
      options: {
        chat: {
          enabled: PROMPT_MODE === 'chat',
          apiUrl: CHAT_API_URL,
        },
        feedback: {
          enabled: true,
          apiUrl: FEEDBACK_API_URL,
          heading: "Do you want to leave additional feedback?",
          extended: {
            enabled: true,
            extendedButtonText: "Submit",
          }
        },
        prompt: {
          examples: {
            enabled: true,
          },
          tabPosition: 'left',
          position: 'bottom',
          apiUrl: PROMPT_API_URL,
          showSubmitButton: true,
          systemPrompt: `
You are a very enthusiastic company representative who loves to help people! Given the following sections from the documentation (preceded by a section id), answer the question using only that information, outputted in Markdown format. If you are unsure and the answer is not explicitly written in the documentation, say "".

Context sections:
---


Question: ""

Answer (including related code snippets if available and markdown links to relevant things):
              `.trim(),
        },
        references: {
          display: 'end',
          getHref: (reference) => {
            const { file } = reference;
            if (file && file.path) {
              // /\/content\/[^_][^/]*\.md/.test(file.path)
              if (file.path.includes('content/') && !file.path.includes('content/_') && file.path.endsWith('.md')) {
                // Remove the extension if it's a regular content page that lives on xrpl.org
                // return file.path.replace(/\.[^.]+$/, '');
                // Change extension to html and remove content/ from the URL
                if (file.path.endsWith('ja.md')) {
                  // Japanese lives at /ja/<filename>.html
                  return `ja/${file.path.replace(/content\//, '').replace(/\.ja\.md$/, '.html')}`
                }
                return file.path.replace(/content\//, '').replace(/\.md$/, '.html')
              } else {
                // Otherwise link to a file on the github repo such as .js or README.md
                return `https://github.com/XRPLF/xrpl-dev-portal/blob/master/${file.path}`;
              }
            } else {
              // Handle the case where file or file.path is missing
              return '';
            }
          },
          getLabel: (reference) => {
            return reference.meta?.leadHeading?.value || reference.file?.title;
          },
        },
        showBranding: false,
        trigger: {
          customElement: true,
          customElementId: "topsearchboxcontainer",
        },
        search: {
          enabled: true,
          provider: {
            name: 'algolia',
            apiKey: '3431349deec23b0bc3dcd3424beb9a6e',
            appId: 'R39QY3MZC7',
            indexName: 'xrpl',
          },
        },
        support: {
          disclaimer: {
            displayedBeforeAnswer: false,
          }
        },
      },
    };
  </script>
  <script type="module" src="assets/js/xrplai.js"></script>


</body>

</html>